(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{1604:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return s});var n=a(45);function r(e,t){return(new n.Client).requestPromise("/organizations/".concat(e,"/releases/").concat(encodeURIComponent(t),"/"),{method:"DELETE"})}function s(e){return e.reduce(function(e,t){var a=t.filename,n=t.repoName,r=t.author,s=t.type;return e.hasOwnProperty(n)||(e[n]={}),e[n].hasOwnProperty(a)||(e[n][a]={authors:{},types:new Set,repos:new Set}),e[n][a].authors[r.email]=r,e[n][a].types.add(s),e},{})}},1639:function(e,t,a){"use strict";var n=a(1),r=a.n(n),s=a(0),c=a.n(s),o=a(17),l=a.n(o),i=a(3),u=a(309),m=a(2),d=l()({displayName:"ReleaseStats",propTypes:{release:r.a.object},render:function(){var e=this.props.release,t=e.commitCount||0,a=e.authors&&e.authors.length||0;if(0===t)return null;var n=t+Object(m.t)(1!==t?" commits ":" commit ")+Object(m.t)("by ")+a+Object(m.t)(1!==a?" authors":" author");return c.a.createElement("div",{className:"release-stats"},c.a.createElement(p,null,n),c.a.createElement("span",{style:{display:"inline-block"}},c.a.createElement(u.a,{users:e.authors,avatarSize:25,typeMembers:"authors"})))}}),p=Object(i.default)("div",{target:"eyl9sdc0"})("color:",function(e){return e.theme.gray2},";font-size:12px;line-height:1.2;font-weight:600;text-transform:uppercase;margin-bottom:4px;");t.a=d},1730:function(e,t,a){"use strict";var n=a(4),r=a.n(n),s=a(6),c=a.n(s),o=a(7),l=a.n(o),i=a(5),u=a.n(i),m=a(8),d=a.n(m),p=a(1),h=a.n(p),v=a(0),f=a.n(v),E=a(2),g=a(133),j=a(54),b=a(79),y=a(146),N=a(1639),I=a(148),O=a(68),w=a(214),R=a(10),x=a(39),C=a(9),D=a(24),S=a(110),T=a(1604),z=function(e){function t(){var e,a;r()(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=l()(this,(e=u()(t)).call.apply(e,[this].concat(s)))).handleDelete=function(){var e=a.props,t=e.orgId,n=e.projectId,r=e.release,s=n?"/".concat(t,"/").concat(n,"/releases/"):"/organizations/".concat(t,"/releases/");Object(x.addLoadingMessage)(Object(E.t)("Deleting Release...")),Object(T.a)(t,r.version).then(function(){R.browserHistory.push(s)}).catch(function(){Object(x.addErrorMessage)(Object(E.t)("This release is referenced by active issues and cannot be removed."))})},a}return d()(t,e),c()(t,[{key:"render",value:function(){return f.a.createElement("div",{className:"m-b-1"},f.a.createElement("div",{className:"btn-group"},f.a.createElement(S.default,{onConfirm:this.handleDelete,message:Object(E.t)("Deleting this release is permanent. Are you sure you wish to continue?")},f.a.createElement(D.default,{size:"small",icon:"icon-trash"},Object(E.t)("Delete")))))}}]),t}(f.a.Component);z.propTypes={orgId:h.a.string.isRequired,projectId:h.a.string,release:C.default.Release.isRequired},a.d(t,"a",function(){return k});var k=function(e){function t(){return r()(this,t),l()(this,u()(t).apply(this,arguments))}return d()(t,e),c()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.release,n=t.orgId,r=t.projectId,s=r?"/".concat(n,"/").concat(r,"/releases/").concat(encodeURIComponent(a.version),"/"):"/organizations/".concat(n,"/releases/").concat(encodeURIComponent(a.version),"/"),c=[{title:Object(E.t)("Overview"),to:s},{title:Object(E.t)("New Issues"),to:"".concat(s,"new-events/")},{title:Object(E.t)("All Issues"),to:"".concat(s,"all-events/")},{title:Object(E.t)("Artifacts"),to:"".concat(s,"artifacts/")},{title:Object(E.t)("Commits"),to:"".concat(s,"commits/")}];return f.a.createElement("div",{className:"release-details"},f.a.createElement("div",{className:"row"},f.a.createElement("div",{className:"col-sm-4 col-xs-12"},f.a.createElement("h3",null,Object(E.t)("Release")," ",f.a.createElement("strong",null,f.a.createElement(w.a,{orgId:n,projectId:r,version:a.version,anchor:!1}))),!!a.url&&f.a.createElement("div",null,f.a.createElement(j.a,{href:a.url},f.a.createElement(I.a,null,a.url))),f.a.createElement("div",{className:"release-meta"},f.a.createElement("span",{className:"icon icon-clock"})," ",f.a.createElement(O.default,{date:a.dateCreated}))),f.a.createElement("div",{className:"col-sm-2 hidden-xs"},f.a.createElement(N.a,{release:a})),f.a.createElement("div",{className:"col-sm-2 hidden-xs"},f.a.createElement("div",{className:"release-stats"},f.a.createElement("h6",{className:"nav-header"},Object(E.t)("New Issues")),f.a.createElement("span",{className:"stream-count"},f.a.createElement(g.default,{value:a.newGroups})))),f.a.createElement("div",{className:"col-sm-2 hidden-xs"},f.a.createElement("div",{className:"release-stats"},f.a.createElement("h6",{className:"nav-header"},Object(E.t)("First Event")),a.firstEvent?f.a.createElement("span",{className:"stream-count"},f.a.createElement(O.default,{date:a.firstEvent})):f.a.createElement("span",null,"—"))),f.a.createElement("div",{className:"col-sm-2 hidden-xs"},f.a.createElement("div",{className:"release-stats"},f.a.createElement("h6",{className:"nav-header"},Object(E.t)("Last Event")),a.lastEvent?f.a.createElement("span",{className:"stream-count"},f.a.createElement(O.default,{date:a.lastEvent})):f.a.createElement("span",null,"—")))),f.a.createElement(z,{api:this.api,orgId:n,projectId:r,release:a}),f.a.createElement(y.default,null,c.map(function(t){return f.a.createElement(b.default,{key:t.to,to:"".concat(t.to).concat(e.context.location.search),isActive:function(){return t.to===e.context.location.pathname}},t.title)})))}}]),t}(f.a.Component);k.propTypes={release:h.a.object.isRequired,orgId:h.a.string.isRequired,projectId:h.a.string},k.contextTypes={location:h.a.object}},2339:function(e,t,a){"use strict";a.r(t);var n=a(97),r=a.n(n),s=a(1),c=a.n(s),o=a(0),l=a.n(o),i=a(17),u=a.n(i),m=a(10),d=a(37),p=a(53),h=a(33),v=a(225),f=a(9),E=a(189),g=a(1730),j=u()({displayName:"ProjectReleaseDetails",propTypes:{setProjectNavSection:c.a.func,environment:f.default.Environment},contextTypes:{organization:f.default.Organization},childContextTypes:{release:c.a.object},mixins:[d.default,v.a],getInitialState:function(){return{release:null,loading:!0,error:!1}},getChildContext:function(){return{release:this.state.release}},componentWillMount:function(){var e=this.props,t=e.location,a=e.params,n=a.orgId,r=a.version;new Set(this.context.organization.features).has("sentry10")&&m.browserHistory.replace("/organizations/".concat(n,"/releases/").concat(r,"/").concat(t.search)),this.props.setProjectNavSection("releases"),this.fetchData()},componentDidUpdate:function(e){this.props.environment!==e.environment&&this.fetchData()},getTitle:function(){var e=this.getProject();return"Release "+this.props.params.version+" | "+e.slug},fetchData:function(){var e=this;this.setState({loading:!0,error:!1});var t=this.props.environment,a=t?{environment:t.name}:{};this.api.request(this.getReleaseDetailsEndpoint(),{query:a,success:function(t){e.setState({loading:!1,release:t})},error:function(){e.setState({loading:!1,error:!0})}})},getReleaseDetailsEndpoint:function(){var e=this.props.params,t=e.orgId,a=e.projectId,n=encodeURIComponent(e.version);return"/projects/".concat(t,"/").concat(a,"/releases/").concat(n,"/")},render:function(){if(this.state.loading)return l.a.createElement(h.default,null);if(this.state.error)return l.a.createElement(p.default,{onRetry:this.fetchData});var e=this.state.release,t=this.props.params,a=t.orgId,n=t.projectId;return l.a.createElement(r.a,{title:this.getTitle()},l.a.createElement("div",{className:"ref-release-details"},l.a.createElement(g.a,{release:e,orgId:a,projectId:n}),l.a.cloneElement(this.props.children,{release:e,environment:this.props.environment})))}});t.default=Object(E.a)(j)}}]);
//# sourceMappingURL=ProjectReleaseDetails.js.map