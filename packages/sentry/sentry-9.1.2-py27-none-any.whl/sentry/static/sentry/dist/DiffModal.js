(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1539:function(t,e,n){"use strict";n.r(e);var a=n(11),r=n.n(a),s=n(4),i=n.n(s),o=n(6),c=n.n(o),u=n(7),d=n.n(u),l=n(5),p=n.n(l),f=n(8),g=n.n(f),v=n(1),h=n.n(v),m=n(0),E=n.n(m),y=n(26),b=n.n(y),I=n(17),k=n.n(I),j=n(3),w=n(39),x=n(2),q=n(37),D=n(33),R=n(446),N=function(t){function e(){var t,n;i()(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=d()(this,(t=p()(e)).call.apply(t,[this].concat(r)))).state={loading:!0,baseEvent:{},targetEvent:{},SplitDiffAsync:null},n}return g()(e,t),c()(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props,a=e.baseIssueId,r=e.targetIssueId,s=e.baseEventId,i=e.targetEventId;Promise.all([n.e(141).then(n.bind(null,2347)),this.fetchData(a,s),this.fetchData(r,i)]).then(function(e){var n=b()(e,3),a=n[0].default,r=n[1],s=n[2];t.setState({SplitDiffAsync:a,baseEvent:t.getException(r),targetEvent:t.getException(s),loading:!1})}).catch(function(){Object(w.addErrorMessage)(Object(x.t)("Error loading events"))})}},{key:"getException",value:function(t){if(!t||!t.entries)return[];var e=t.entries.find(function(t){return"exception"===t.type});if(!e){var n=t.entries.find(function(t){return"message"===t.type});return n?n.data&&n.data.message&&[n.data.message]:[]}return e.data?e.data.values.filter(function(t){return!!t.stacktrace}).map(function(e){return Object(R.a)(e.stacktrace,t.platform,e)}).reduce(function(t,e){return t.concat(e)},[]):[]}},{key:"getEndpoint",value:function(t,e){var n=this.props,a=n.orgId,r=n.projectId;return"latest"!==e?"/projects/".concat(a,"/").concat(r,"/events/").concat(e,"/"):"/issues/".concat(t,"/events/").concat(e,"/")}},{key:"fetchData",value:function(t,e){return this.props.api.requestPromise(this.getEndpoint(t,e))}},{key:"render",value:function(){var t=this,e=this.props.className,n=this.state.SplitDiffAsync,a=!this.state.loading&&!!n;return E.a.createElement(S,{className:e,loading:this.state.loading},this.state.loading&&E.a.createElement(D.default,null),a&&this.state.baseEvent.map(function(e,a){return E.a.createElement(n,{key:a,base:e,target:t.state.targetEvent[a]||"",type:"words"})}))}}]),e}(E.a.Component);N.propTypes={api:h.a.object,baseIssueId:h.a.string.isRequired,targetIssueId:h.a.string.isRequired,baseEventId:h.a.string.isRequired,targetEventId:h.a.string.isRequired,orgId:h.a.string.isRequired,projectId:h.a.string.isRequired},N.defaultProps={baseEventId:"latest",targetEventId:"latest"};var O=k()({displayName:"IssueDiffContainer",mixins:[q.default],render:function(){return E.a.createElement(N,r()({},this.props,{api:this.api}))}}),A=function(t){return t.loading&&Object(j.css)("background-color:white;justify-content:center;")||""},S=Object(j.default)("div",{target:"e1mqtsvu0"})("background-color:#f7f8f9;overflow:auto;padding:10px;flex:1;display:flex;flex-direction:column;",A,";"),C=function(t){function e(){return i()(this,e),d()(this,p()(e).apply(this,arguments))}return g()(e,t),c()(e,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.Body;return E.a.createElement(n,null,E.a.createElement(O,r()({className:e},this.props)))}}]),e}(E.a.Component);C.propTypes={Body:h.a.func};e.default=C}}]);
//# sourceMappingURL=DiffModal.js.map