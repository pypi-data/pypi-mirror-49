(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{2293:function(e,t,a){"use strict";a.r(t),a.d(t,"SavedSearchRow",function(){return M});var n=a(38),r=a.n(n),c=a(12),l=a.n(c),o=a(4),s=a.n(o),i=a(6),u=a.n(i),d=a(7),f=a.n(d),h=a(5),p=a.n(h),m=a(8),v=a.n(m),E=a(11),g=a.n(E),y=a(16),j=a(1),S=a.n(j),D=a(0),b=a.n(D),x=a(3),R=a(25),O=a(2),w=a(153),U=a(24),k=a(110),I=a(145),L=a(30),z=a(394),q=a(9),T=a(99),F=function(e){return b.a.createElement(y.Flex,g()({flex:"1",justify:"center"},e))},C=Object(x.default)("div",{target:"e1e9fsi50"})("font-size:18px;margin-bottom:5px;"),M=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=f()(this,(e=p()(t)).call.apply(e,[this].concat(r)))).handleRemove=function(){var e=a.props,t=e.data;(0,e.onRemove)({data:t})},a.handleDefault=function(){var e=a.props,t=e.data;(0,e.onDefault)({data:t,isDefault:!0})},a.handleUserDefault=function(){var e=a.props,t=e.data;(0,e.onUserDefault)({data:t,isUserDefault:!0})},a}return v()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.canModify,n=!a&&!t.isPrivate;return b.a.createElement(R.f,{p:0,py:2,align:"center"},b.a.createElement(y.Flex,{flex:"1",px:2,direction:"column"},b.a.createElement(C,null,t.name),b.a.createElement("code",null,t.query)),b.a.createElement(y.Flex,{flex:"1"},b.a.createElement(F,null,b.a.createElement("input",{type:"radio",name:"userDefault",checked:t.isUserDefault,onChange:this.handleUserDefault})),a&&b.a.createElement(F,null,b.a.createElement("input",{type:"radio",name:"default",checked:t.isDefault,onChange:this.handleDefault,disabled:t.isPrivate})),b.a.createElement(F,null,b.a.createElement(k.default,{message:Object(O.t)("Are you sure you want to remove this?"),onConfirm:this.handleRemove,disabled:n},b.a.createElement(U.default,{size:"small",icon:"icon-trash"})))))}}]),t}(b.a.Component);M.propTypes={data:S.a.object.isRequired,canModify:S.a.bool.isRequired,onDefault:S.a.func.isRequired,onUserDefault:S.a.func.isRequired,onRemove:S.a.func.isRequired};var P=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=f()(this,(e=p()(t)).call.apply(e,[this].concat(c)))).handleUpdate=function(e){var t=a.props.params,n=t.orgId,c=t.projectId,o=L.default.add(Object(O.t)("Saving changes..")),s=e.data,i=e.isDefault,u=e.isUserDefault,d=void 0!==i?"isDefault":"isUserDefault",f=a.state.savedSearchList,h=f.map(function(e){return l()({},e,r()({},d,s.id===e.id))});a.setState({savedSearchList:h},function(){a.api.request("/projects/".concat(n,"/").concat(c,"/searches/").concat(s.id,"/"),{method:"PUT",data:{isDefault:i,isUserDefault:u},error:function(){a.setState({savedSearchList:f}),L.default.addError(Object(O.t)("Error updating search"))},complete:function(){L.default.remove(o)}})})},a.handleRemovedSearch=function(e){var t=a.props.params,n=t.orgId,r=t.projectId,c=L.default.add(Object(O.t)("Saving changes..")),l=e.data,o=a.state.savedSearchList,s=o.filter(function(e){return e.id!==l.id});a.setState({savedSearchList:s},function(){a.api.request("/projects/".concat(n,"/").concat(r,"/searches/").concat(l.id,"/"),{method:"DELETE",error:function(){a.setState({savedSearchList:o}),L.default.addError(Object(O.t)("Error removing search"))},complete:function(){return L.default.remove(c)}})})},a}return v()(t,e),u()(t,[{key:"getTitle",value:function(){return Object(O.t)("Saved Searches")}},{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,a=e.projectId;return[["savedSearchList","/projects/".concat(t,"/").concat(a,"/searches/")]]}},{key:"renderEmpty",value:function(){return b.a.createElement(I.a,null,b.a.createElement("p",null,Object(O.t)("There are no saved searches for this project.")))}},{key:"renderResults",value:function(){var e=this,t=this.props.params,a=t.orgId,n=t.projectId,r=this.context.organization,c=r&&new Set(r.access),l=r&&c.has("project:write")||!1;return b.a.createElement(b.a.Fragment,null,this.state.savedSearchList.map(function(t){return b.a.createElement(M,{access:c,key:t.id,canModify:l,orgId:a,projectId:n,data:t,onUserDefault:e.handleUpdate,onDefault:e.handleUpdate,onRemove:e.handleRemovedSearch})}))}},{key:"renderBody",value:function(){var e=this.context.organization,t=e&&new Set(e.access),a=e&&t.has("project:write")||!1,n=this.state.savedSearchList.length>0;return b.a.createElement("div",null,b.a.createElement(T.default,{title:Object(O.t)("Saved Searches")}),b.a.createElement(R.a,null,b.a.createElement(R.e,{disablePadding:!0},b.a.createElement(y.Flex,{flex:"1"},b.a.createElement(y.Flex,{flex:"1",px:2},Object(O.t)("Search")),b.a.createElement(y.Flex,{flex:"1"},b.a.createElement(F,null,Object(O.t)("My Default")),a&&b.a.createElement(F,null,Object(O.t)("Team Default")),b.a.createElement(F,null,Object(O.t)("Remove"))))),b.a.createElement(R.c,null,n?this.renderResults():this.renderEmpty())))}}]),t}(w.default);P.contextTypes={organization:q.default.Organization};var A=function(e,t){return t.organization.features.includes("org-saved-searches")?b.a.createElement(z.a,null):b.a.createElement(P,e)};A.contextTypes={organization:q.default.Organization},t.default=A}}]);
//# sourceMappingURL=ProjectSavedSearches.js.map