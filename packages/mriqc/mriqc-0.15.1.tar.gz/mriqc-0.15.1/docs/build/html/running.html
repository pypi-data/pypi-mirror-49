

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running mriqc &mdash; mriqc 0.9 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="mriqc 0.9 documentation" href="index.html"/>
        <link rel="next" title="Image Quality Metrics (IQMs)" href="measures.html"/>
        <link rel="prev" title="Installation" href="install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> mriqc
          

          
          </a>

          
            
            
              <div class="version">
                0.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Running mriqc</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-interface">Command line interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Positional Arguments">Positional Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Named Arguments">Named Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Options for filtering BIDS queries">Options for filtering BIDS queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Instrumental options">Instrumental options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Options to handle performance">Options to handle performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Workflow configuration">Workflow configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Specific settings for ANTs">Specific settings for ANTs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Specific settings for AFNI">Specific settings for AFNI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-mriqc-on-hpc-clusters">Running MRIQC on HPC clusters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#singularity-containers">Singularity containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requesting-resources">Requesting resources</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="measures.html">Image Quality Metrics (IQMs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Run mriqc with docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="reports.html">Visual reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">The MRIQC workflows</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mriqc</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Running mriqc</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/running.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-mriqc">
<span id="id1"></span><h1>Running mriqc<a class="headerlink" href="#running-mriqc" title="Permalink to this headline">Â¶</a></h1>
<p>MRIQC is a <a class="reference external" href="http://bids-apps.neuroimaging.io/">BIDS-App</a> <a class="reference internal" href="#bidsapps" id="id2">[BIDSApps]</a>,
and therefore it inherently understands the <abbr title="brain imaging data structure">BIDS</abbr> standard <a class="reference internal" href="#bids" id="id3">[BIDS]</a> and follows the
BIDS-Apps standard command line interface:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">mriqc</span> <span class="n">bids</span><span class="o">-</span><span class="n">root</span><span class="o">/</span> <span class="n">output</span><span class="o">-</span><span class="n">folder</span><span class="o">/</span> <span class="n">participant</span>
</pre></div>
</div>
<p>That simple command runs MRIQC on all the <em>T1w</em> and <em>BOLD</em> images found
under the BIDS-compliant folder <code class="docutils literal"><span class="pre">bids-root/</span></code>.
The last <code class="docutils literal"><span class="pre">participant</span></code> keyword indicates that the first level analysis
is run. (i.e. extracting the <abbr title="image quality metrics">IQMs</abbr> from the
images retrieved within <code class="docutils literal"><span class="pre">bids-root/</span></code>).
The second level (<code class="docutils literal"><span class="pre">group</span></code>) is automatically run if no particular subject
is provided for analysis.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the argument <code class="code docutils literal"><span class="pre">--participant-label</span></code> is not provided, then all
subjects will be processed and the group level analysis will
automatically be executed without need of running the command in item 3.</p>
</div>
<p>To specify one particular subject, the <code class="docutils literal"><span class="pre">--participant-label</span></code> argument
can be used:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">mriqc</span> <span class="n">bids</span><span class="o">-</span><span class="n">root</span><span class="o">/</span> <span class="n">output</span><span class="o">-</span><span class="n">folder</span><span class="o">/</span> <span class="n">participant</span> <span class="o">--</span><span class="n">participant</span><span class="o">-</span><span class="n">label</span> <span class="n">S01</span> <span class="n">S02</span> <span class="n">S03</span>
</pre></div>
</div>
<p>That command will run MRIQC only on the subjects indicated: only
<code class="docutils literal"><span class="pre">bids-root/sub-S01</span></code>, <code class="docutils literal"><span class="pre">bids-root/sub-S02</span></code>, and <code class="docutils literal"><span class="pre">bids-root/sub-S03</span></code>
will be processed.
In this case, the <code class="docutils literal"><span class="pre">group</span></code> level will not be triggered automatically.
We generate the <code class="docutils literal"><span class="pre">group</span></code> level results (the group level report and the
features CSV table) with:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">mriqc</span> <span class="n">bids</span><span class="o">-</span><span class="n">root</span><span class="o">/</span> <span class="n">output</span><span class="o">-</span><span class="n">folder</span><span class="o">/</span> <span class="n">group</span>
</pre></div>
</div>
<p>Examples of the generated visual reports are found
in <a class="reference internal" href="reports.html#reports"><span class="std std-ref">The MRIQC Reports</span></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MRIQC by default attempts to upload anonymized quality metrics to a publicly accessible
web server (<a class="reference external" href="http://mriqc.nimh.nih.gov/">mriqc.nimh.nih.gov</a>). The uploaded data consists
only of calculated quality metrics and scanning parameters. It removes all personal
health information and participant identifiers. We try to collect this data to build normal
distributions for improved outlier detection, but if you do not wish to participate you can
disable the submission with the <code class="docutils literal"><span class="pre">--no-sub</span></code> flag.</p>
</div>
<div class="topic">
<p class="topic-title first">BIDS data organization</p>
<p>The software automatically finds the data the input folder if it
follows the <abbr title="brain imaging data structure">BIDS</abbr> standard <a class="reference internal" href="#bids" id="id4">[BIDS]</a>.
A fast and easy way to check that your dataset fulfills the
<abbr title="brain imaging data structure">BIDS</abbr> standard is
the <a class="reference external" href="http://incf.github.io/bids-validator/">BIDS validator</a>.</p>
</div>
<div class="topic">
<p class="topic-title first">BIDS-App levels</p>
<p>In the <code class="docutils literal"><span class="pre">participant</span></code> level, all individual images to be processed are run
through the pipeline, and the <a class="reference internal" href="measures.html#measures"><span class="std std-ref">MRIQC measures</span></a> are extracted and
the individual reports (see <a class="reference internal" href="reports.html#reports"><span class="std std-ref">The MRIQC Reports</span></a>) generated.
In the <code class="docutils literal"><span class="pre">group</span></code> level, the <abbr title="image quality metrics">IQMs</abbr> extracted in
first place are combined in a table and the group reports are generated.</p>
</div>
<div class="section" id="command-line-interface">
<h2>Command line interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span class="n">usage</span><span class="p">:</span> <span class="n">mriqc</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">v</span><span class="p">]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">participant_label</span> <span class="n">PARTICIPANT_LABEL</span> <span class="p">[</span><span class="n">PARTICIPANT_LABEL</span> <span class="o">...</span><span class="p">]]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">session</span><span class="o">-</span><span class="nb">id</span> <span class="n">SESSION_ID</span> <span class="p">[</span><span class="n">SESSION_ID</span> <span class="o">...</span><span class="p">]]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">run</span><span class="o">-</span><span class="nb">id</span> <span class="n">RUN_ID</span> <span class="p">[</span><span class="n">RUN_ID</span> <span class="o">...</span><span class="p">]]</span> <span class="p">[</span><span class="o">--</span><span class="n">task</span><span class="o">-</span><span class="nb">id</span> <span class="n">TASK_ID</span> <span class="p">[</span><span class="n">TASK_ID</span> <span class="o">...</span><span class="p">]]</span>
             <span class="p">[</span><span class="o">-</span><span class="n">m</span> <span class="p">[{</span><span class="n">T1w</span><span class="p">,</span><span class="n">bold</span><span class="p">,</span><span class="n">T2w</span><span class="p">}</span> <span class="p">[{</span><span class="n">T1w</span><span class="p">,</span><span class="n">bold</span><span class="p">,</span><span class="n">T2w</span><span class="p">}</span> <span class="o">...</span><span class="p">]]]</span> <span class="p">[</span><span class="o">-</span><span class="n">w</span> <span class="n">WORK_DIR</span><span class="p">]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">report</span><span class="o">-</span><span class="nb">dir</span> <span class="n">REPORT_DIR</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">verbose</span><span class="o">-</span><span class="n">reports</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">write</span><span class="o">-</span><span class="n">graph</span><span class="p">]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">profile</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">use</span><span class="o">-</span><span class="n">plugin</span> <span class="n">USE_PLUGIN</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">sub</span><span class="p">]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">email</span> <span class="n">EMAIL</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">webapi</span><span class="o">-</span><span class="n">addr</span> <span class="n">WEBAPI_ADDR</span><span class="p">]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">webapi</span><span class="o">-</span><span class="n">port</span> <span class="n">WEBAPI_PORT</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">upload</span><span class="o">-</span><span class="n">strict</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">n_procs</span> <span class="n">N_PROCS</span><span class="p">]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">mem_gb</span> <span class="n">MEM_GB</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">testing</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">f</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">ica</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">hmc</span><span class="o">-</span><span class="n">afni</span><span class="p">]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">hmc</span><span class="o">-</span><span class="n">fsl</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fft</span><span class="o">-</span><span class="n">spikes</span><span class="o">-</span><span class="n">detector</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">fd_thres</span> <span class="n">FD_THRES</span><span class="p">]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">ants</span><span class="o">-</span><span class="n">nthreads</span> <span class="n">ANTS_NTHREADS</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">ants</span><span class="o">-</span><span class="n">settings</span> <span class="n">ANTS_SETTINGS</span><span class="p">]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">deoblique</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">despike</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">start</span><span class="o">-</span><span class="n">idx</span> <span class="n">START_IDX</span><span class="p">]</span>
             <span class="p">[</span><span class="o">--</span><span class="n">stop</span><span class="o">-</span><span class="n">idx</span> <span class="n">STOP_IDX</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">correct</span><span class="o">-</span><span class="nb">slice</span><span class="o">-</span><span class="n">timing</span><span class="p">]</span>
             <span class="n">bids_dir</span> <span class="n">output_dir</span> <span class="p">{</span><span class="n">participant</span><span class="p">,</span><span class="n">group</span><span class="p">}</span> <span class="p">[{</span><span class="n">participant</span><span class="p">,</span><span class="n">group</span><span class="p">}</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="Positional Arguments">
<h3>Positional Arguments<a class="headerlink" href="#Positional Arguments" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>bids_dir</kbd></td>
<td>The directory with the input dataset formatted according to the BIDS standard.</td></tr>
<tr><td class="option-group">
<kbd>output_dir</kbd></td>
<td>The directory where the output files should be stored. If you are running group level analysis this folder should be prepopulated with the results of theparticipant level analysis.</td></tr>
<tr><td class="option-group">
<kbd>analysis_level</kbd></td>
<td><p class="first">Possible choices: participant, group</p>
<p class="last">Level of the analysis that will be performed. Multiple participant level analyses can be run independently (in parallel) using the same output_dir.</p>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="Named Arguments">
<h3>Named Arguments<a class="headerlink" href="#Named Arguments" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>-v, &#8211;version</kbd></td>
<td>show program&#8217;s version number and exit</td></tr>
</tbody>
</table>
</div>
<div class="section" id="Options for filtering BIDS queries">
<h3>Options for filtering BIDS queries<a class="headerlink" href="#Options for filtering BIDS queries" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd>&#8211;participant_label, &#8211;participant-label</kbd></td>
</tr>
<tr><td>&#160;</td><td>one or more participant identifiers (the sub- prefix can be removed)</td></tr>
<tr><td class="option-group">
<kbd>&#8211;session-id</kbd></td>
<td>select a specific session to be processed</td></tr>
<tr><td class="option-group">
<kbd>&#8211;run-id</kbd></td>
<td>select a specific run to be processed</td></tr>
<tr><td class="option-group">
<kbd>&#8211;task-id</kbd></td>
<td>select a specific task to be processed</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>-m, &#8211;modalities</kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Possible choices: T1w, bold, T2w</p>
<p class="last">select one of the supported MRI types</p>
</td></tr>
</tbody>
</table>
</div>
<div class="section" id="Instrumental options">
<h3>Instrumental options<a class="headerlink" href="#Instrumental options" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>-w, &#8211;work-dir</kbd></td>
<td></td></tr>
<tr><td class="option-group">
<kbd>&#8211;report-dir</kbd></td>
<td></td></tr>
<tr><td class="option-group" colspan="2">
<kbd>&#8211;verbose-reports</kbd></td>
</tr>
<tr><td>&#160;</td><td></td></tr>
<tr><td class="option-group">
<kbd>&#8211;write-graph</kbd></td>
<td>Write workflow graph.</td></tr>
<tr><td class="option-group">
<kbd>&#8211;dry-run</kbd></td>
<td>Do not run the workflow.</td></tr>
<tr><td class="option-group">
<kbd>&#8211;profile</kbd></td>
<td>hook up the resource profiler callback to nipype</td></tr>
<tr><td class="option-group">
<kbd>&#8211;use-plugin</kbd></td>
<td>nipype plugin configuration file</td></tr>
<tr><td class="option-group">
<kbd>&#8211;no-sub</kbd></td>
<td>Turn off submission of anonymized quality metrics to MRIQC&#8217;s metrics repository.</td></tr>
<tr><td class="option-group">
<kbd>&#8211;email</kbd></td>
<td>Email address to include with quality metric submission.</td></tr>
<tr><td class="option-group">
<kbd>&#8211;webapi-addr</kbd></td>
<td>IP address where the MRIQC WebAPI is listening</td></tr>
<tr><td class="option-group">
<kbd>&#8211;webapi-port</kbd></td>
<td>port where the MRIQC WebAPI is listening</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>&#8211;upload-strict</kbd></td>
</tr>
<tr><td>&#160;</td><td>upload will fail if if upload is strict</td></tr>
</tbody>
</table>
</div>
<div class="section" id="Options to handle performance">
<h3>Options to handle performance<a class="headerlink" href="#Options to handle performance" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd>&#8211;n_procs, &#8211;nprocs, &#8211;n_cpus, &#8211;nprocs</kbd></td>
</tr>
<tr><td>&#160;</td><td>number of threads</td></tr>
<tr><td class="option-group">
<kbd>&#8211;mem_gb</kbd></td>
<td>available total memory</td></tr>
<tr><td class="option-group">
<kbd>&#8211;testing</kbd></td>
<td>use testing settings for a minimal footprint</td></tr>
<tr><td class="option-group">
<kbd>-f, &#8211;float32</kbd></td>
<td>Cast the input data to float32 if it&#8217;s represented in higher precision (saves space and improves perfomance)</td></tr>
</tbody>
</table>
</div>
<div class="section" id="Workflow configuration">
<h3>Workflow configuration<a class="headerlink" href="#Workflow configuration" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>&#8211;ica</kbd></td>
<td>Run ICA on the raw data and include the componentsin the individual reports (slow but potentially very insightful)</td></tr>
<tr><td class="option-group">
<kbd>&#8211;hmc-afni</kbd></td>
<td>Use ANFI 3dvolreg for head motion correction (HMC) - default</td></tr>
<tr><td class="option-group">
<kbd>&#8211;hmc-fsl</kbd></td>
<td>Use FSL MCFLIRT instead of AFNI for head motion correction (HMC)</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>&#8211;fft-spikes-detector</kbd></td>
</tr>
<tr><td>&#160;</td><td>Turn on FFT based spike detector (slow).</td></tr>
<tr><td class="option-group">
<kbd>&#8211;fd_thres</kbd></td>
<td>motion threshold for FD computation</td></tr>
</tbody>
</table>
</div>
<div class="section" id="Specific settings for ANTs">
<h3>Specific settings for ANTs<a class="headerlink" href="#Specific settings for ANTs" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd>&#8211;ants-nthreads</kbd></td>
</tr>
<tr><td>&#160;</td><td>number of threads that will be set in ANTs processes</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>&#8211;ants-settings</kbd></td>
</tr>
<tr><td>&#160;</td><td>path to JSON file with settings for ANTS</td></tr>
</tbody>
</table>
</div>
<div class="section" id="Specific settings for AFNI">
<h3>Specific settings for AFNI<a class="headerlink" href="#Specific settings for AFNI" title="Permalink to this headline">Â¶</a></h3>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd>&#8211;deoblique</kbd></td>
<td>Deoblique the functional scans during head motion correction preprocessing</td></tr>
<tr><td class="option-group">
<kbd>&#8211;despike</kbd></td>
<td>Despike the functional scans during head motion correction preprocessing</td></tr>
<tr><td class="option-group">
<kbd>&#8211;start-idx</kbd></td>
<td>Initial volume in functional timeseries that should be considered for preprocessing</td></tr>
<tr><td class="option-group">
<kbd>&#8211;stop-idx</kbd></td>
<td>Final volume in functional timeseries that should be considered for preprocessing</td></tr>
<tr><td class="option-group" colspan="2">
<kbd>&#8211;correct-slice-timing</kbd></td>
</tr>
<tr><td>&#160;</td><td>Perform slice timing correction</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="running-mriqc-on-hpc-clusters">
<h2>Running MRIQC on HPC clusters<a class="headerlink" href="#running-mriqc-on-hpc-clusters" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="singularity-containers">
<h3>Singularity containers<a class="headerlink" href="#singularity-containers" title="Permalink to this headline">Â¶</a></h3>
</div>
<div class="section" id="requesting-resources">
<h3>Requesting resources<a class="headerlink" href="#requesting-resources" title="Permalink to this headline">Â¶</a></h3>
<p>We have profiled cores and memory usages with the <em>resource profiler</em>
tool of nipype.</p>
<p>An MRIQC run of one subject (from the ABIDE) dataset, containing only one
run, one BOLD task (resting-state) yielded the following report:</p>
<blockquote>
<div><iframe src="_static/bold-1subject-1task.html" height="345px" width="100%"></iframe><p>Using the <code class="docutils literal"><span class="pre">MultiProc</span></code> plugin of nipype with <code class="docutils literal"><span class="pre">nprocs=10</span></code>, the workflow
nodes run across the available processors for 41.68 minutes.
A memory peak of 8GB is reached by the end of the runtime, when the
plotting nodes are fired up.</p>
</div></blockquote>
<p>We also profiled MRIQC on a dataset with 8 tasks (one run per task),
on ds030 of OpenfMRI:</p>
<blockquote>
<div><iframe src="_static/bold-1subject-8tasks.html" height="345px" width="100%"></iframe><p>Again, we used <code class="docutils literal"><span class="pre">n_procs=10</span></code>. The software run for roughly about the same
time (47.11 min). Most of the run time, memory usage keeps around a
maximum of 10GB. Since we saw a memory consumption of 1-2GB during the
the 1-task example, a rule of thumb may be that each task takes around
1GB of memory.</p>
</div></blockquote>
<div class="topic">
<p class="topic-title first">References</p>
<table class="docutils citation" frame="void" id="bids" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[BIDS]</td><td><em>(<a class="fn-backref" href="#id3">1</a>, <a class="fn-backref" href="#id4">2</a>)</em> <a class="reference external" href="http://bids.neuroimaging.io/">Brain Imaging Data Structure</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="bidsapps" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[BIDSApps]</a></td><td><a class="reference external" href="http://bids-apps.neuroimaging.io/">BIDS-Apps: portable neuroimaging pipelines that understand BIDS
datasets</a></td></tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="measures.html" class="btn btn-neutral float-right" title="Image Quality Metrics (IQMs)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Oscar Esteban.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>