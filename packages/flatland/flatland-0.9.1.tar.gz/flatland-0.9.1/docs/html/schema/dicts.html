
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Dicts &#8212; flatland 0.9.1.dev3+g27237b1.d20190726 documentation</title>
    <link rel="stylesheet" href="../_static/flatland.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lists" href="lists.html" />
    <link rel="prev" title="Dates and Times" href="datetimes.html" /> 
  </head><body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dicts">
<h1>Dicts<a class="headerlink" href="#dicts" title="Permalink to this headline">¶</a></h1>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>intro</p>
</div>
<div class="section" id="set-policy">
<span id="id2"></span><h2><code class="docutils literal notranslate"><span class="pre">set()</span></code> Policy<a class="headerlink" href="#set-policy" title="Permalink to this headline">¶</a></h2>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>strict, duck, etc.</p>
</div>
</div>
<div class="section" id="validation">
<h2>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h2>
<p>If <a class="reference internal" href="../api.html#flatland.schema.containers.Container.descent_validators" title="flatland.schema.containers.Container.descent_validators"><code class="xref py py-attr docutils literal notranslate"><span class="pre">descent_validators</span></code></a> is defined, these validators
will be run first, before member elements are validated.</p>
<p>If <a class="reference internal" href="schema.html#flatland.schema.base.Element.validators" title="flatland.schema.base.Element.validators"><code class="xref py py-attr docutils literal notranslate"><span class="pre">validators</span></code></a> is defined, these
validators will be run after member elements are validated.</p>
</div>
<div class="section" id="dict">
<h2><code class="docutils literal notranslate"><span class="pre">Dict</span></code><a class="headerlink" href="#dict" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flatland.schema.containers.Dict">
<em class="property">class </em><code class="sig-name descname">Dict</code><span class="sig-paren">(</span><em class="sig-param">value=Unspecified</em>, <em class="sig-param">**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#flatland.schema.containers.Dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../api.html#flatland.schema.containers.Mapping" title="flatland.schema.containers.Mapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">flatland.schema.containers.Mapping</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a></p>
<p>A mapping Container with named members.</p>
<dl class="attribute">
<dt id="flatland.schema.containers.Dict.policy">
<code class="sig-name descname">policy</code><em class="property"> = 'subset'</em><a class="headerlink" href="#flatland.schema.containers.Dict.policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated.  One of ‘strict’, ‘subset’ or ‘duck’.  Default ‘subset’.</p>
<p>Operates as <a class="reference internal" href="../validation/builtin.html#flatland.validation.containers.SetWithAllFields" title="flatland.validation.containers.SetWithAllFields"><code class="xref py py-class docutils literal notranslate"><span class="pre">SetWithAllFields</span></code></a>
and <a class="reference internal" href="../validation/builtin.html#flatland.validation.containers.SetWithKnownFields" title="flatland.validation.containers.SetWithKnownFields"><code class="xref py py-class docutils literal notranslate"><span class="pre">SetWithKnownFields</span></code></a>, except
raises an exception immediately upon <a class="reference internal" href="#flatland.schema.containers.Dict.set" title="flatland.schema.containers.Dict.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set()</span></code></a>.</p>
<p>To migrate to the new validators, set <a class="reference internal" href="#flatland.schema.containers.Dict.policy" title="flatland.schema.containers.Dict.policy"><code class="xref py py-attr docutils literal notranslate"><span class="pre">policy</span></code></a> to <code class="docutils literal notranslate"><span class="pre">None</span></code> to
disable the policy behavior.</p>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.Dict.of">
<code class="sig-name descname">of</code><span class="sig-paren">(</span><em class="sig-param">*fields</em><span class="sig-paren">)</span><a class="headerlink" href="#flatland.schema.containers.Dict.of" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>doc of()</p>
</div>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.Dict.from_object">
<em class="property">classmethod </em><code class="sig-name descname">from_object</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">include=None</em>, <em class="sig-param">omit=None</em>, <em class="sig-param">rename=None</em>, <em class="sig-param">**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#flatland.schema.containers.Dict.from_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an element initialized with an object’s attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – any object</p></li>
<li><p><strong>include</strong> – optional, an iterable of attribute names to pull from
<em>obj</em>, if present on the object.  Only these attributes will be
included.</p></li>
<li><p><strong>omit</strong> – optional, an iterable of attribute names to ignore on
<strong>obj</strong>.  All other attributes matching a named field on the
mapping will be included.</p></li>
<li><p><strong>rename</strong> – optional, a mapping of attribute-to-field name
transformations.  Attributes specified in the mapping will be
included regardless of <em>include</em> or <em>omit</em>.</p></li>
<li><p><strong>**kw</strong> – keyword arguments will be passed to the element’s
constructor.</p></li>
</ul>
</dd>
</dl>
<p><em>include</em> and <em>omit</em> are mutually exclusive.</p>
<p>This is a convenience constructor for <a class="reference internal" href="#flatland.schema.containers.Dict.set_by_object" title="flatland.schema.containers.Dict.set_by_object"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_by_object()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">element</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
<span class="n">element</span><span class="o">.</span><span class="n">set_by_object</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">omit</span><span class="p">,</span> <span class="n">rename</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.Dict.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">policy=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flatland.schema.containers.Dict.set" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Todo</p>
<p>doc set()</p>
</div>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.Dict.set_by_object">
<code class="sig-name descname">set_by_object</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">include=None</em>, <em class="sig-param">omit=None</em>, <em class="sig-param">rename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flatland.schema.containers.Dict.set_by_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Set fields with an object’s attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – any object</p></li>
<li><p><strong>include</strong> – optional, an iterable of attribute names to pull from
<em>obj</em>, if present on the object.  Only these attributes will be
included.</p></li>
<li><p><strong>omit</strong> – optional, an iterable of attribute names to ignore on
<strong>obj</strong>.  All other attributes matching a named field on the
mapping will be included.</p></li>
<li><p><strong>rename</strong> – optional, a mapping of attribute-to-field name
transformations.  Attributes specified in the mapping will be
included regardless of <em>include</em> or <em>omit</em>.</p></li>
</ul>
</dd>
</dl>
<p><em>include</em> and <em>omit</em> are mutually exclusive.</p>
<p>Sets fields on <em>self</em>, using as many attributes as possible from
<em>obj</em>.  Object attributes that do not correspond to field names are
ignored.</p>
<p>Mapping instances have two corresponding methods useful for
round-tripping values in and out of your domain objects.</p>
<p><a class="reference internal" href="#flatland.schema.containers.Dict.update_object" title="flatland.schema.containers.Dict.update_object"><code class="xref py py-meth docutils literal notranslate"><span class="pre">update_object()</span></code></a> performs the inverse of <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_object()</span></code>, and
<a class="reference internal" href="#flatland.schema.containers.Dict.slice" title="flatland.schema.containers.Dict.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a> is useful for constructing new objects.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="s1">&#39;biff&#39;</span><span class="p">,</span> <span class="s1">&#39;secret&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">form</span> <span class="o">=</span> <span class="n">UserForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">form</span><span class="o">.</span><span class="n">set_by_object</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;login&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
<span class="go">u&#39;biff&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;new-password&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">form</span><span class="o">.</span><span class="n">update_object</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">omit</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;verify_password&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span><span class="o">.</span><span class="n">password</span>
<span class="go">u&#39;new-password&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_keywords</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">omit</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;verify_password&#39;</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user_keywords</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">[&#39;login&#39;, &#39;password&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="o">**</span><span class="n">user_keywords</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.Dict.update_object">
<code class="sig-name descname">update_object</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">include=None</em>, <em class="sig-param">omit=None</em>, <em class="sig-param">rename=None</em>, <em class="sig-param">key=&lt;function &lt;lambda&gt;&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#flatland.schema.containers.Dict.update_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Update an object’s attributes using the element’s values.</p>
<p>Produces a <a class="reference internal" href="#flatland.schema.containers.Dict.slice" title="flatland.schema.containers.Dict.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice()</span></code></a> using <em>include</em>, <em>omit</em>, <em>rename</em> and
<em>key</em>, and sets the selected attributes on <em>obj</em> using
<code class="docutils literal notranslate"><span class="pre">setattr</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>nothing. <em>obj</em> is modified directly.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.Dict.slice">
<code class="sig-name descname">slice</code><span class="sig-paren">(</span><em class="sig-param">include=None</em>, <em class="sig-param">omit=None</em>, <em class="sig-param">rename=None</em>, <em class="sig-param">key=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flatland.schema.containers.Dict.slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="docutils literal notranslate"><span class="pre">dict</span></code> containing a subset of the element’s values.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sparsedict">
<h2><code class="docutils literal notranslate"><span class="pre">SparseDict</span></code><a class="headerlink" href="#sparsedict" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flatland.schema.containers.SparseDict">
<em class="property">class </em><code class="sig-name descname">SparseDict</code><span class="sig-paren">(</span><em class="sig-param">value=Unspecified</em>, <em class="sig-param">**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#flatland.schema.containers.SparseDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#flatland.schema.containers.Dict" title="flatland.schema.containers.Dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">flatland.schema.containers.Dict</span></code></a></p>
<p>A Mapping which may contain a subset of the schema’s allowed keys.</p>
<p>This differs from <a class="reference internal" href="#flatland.schema.containers.Dict" title="flatland.schema.containers.Dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a> in that new instances are not created with
empty values for all possible keys.  In addition, mutating operations are
allowed so long as the operations operate within the schema.  For example,
you may <a class="reference internal" href="#flatland.schema.containers.SparseDict.pop" title="flatland.schema.containers.SparseDict.pop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pop()</span></code></a> and <code class="docutils literal notranslate"><span class="pre">del</span></code> members of the mapping.</p>
<dl class="attribute">
<dt id="flatland.schema.containers.SparseDict.minimum_fields">
<code class="sig-name descname">minimum_fields</code><em class="property"> = None</em><a class="headerlink" href="#flatland.schema.containers.SparseDict.minimum_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>The subset of fields to autovivify on instantiation.</p>
<p>May be <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">'required'</span></code>.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>, mappings will be
created empty and mutation operations are unrestricted within the
bounds of the <code class="xref py py-attr docutils literal notranslate"><span class="pre">field_schema</span></code>.  If <code class="docutils literal notranslate"><span class="pre">required</span></code>, fields with
<code class="xref py py-attr docutils literal notranslate"><span class="pre">optional</span></code> of <code class="docutils literal notranslate"><span class="pre">False</span></code> will always be present after
instantiation, and attempts to remove them from the mapping with <code class="docutils literal notranslate"><span class="pre">del</span></code>
and friends will raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.SparseDict.may_contain">
<code class="sig-name descname">may_contain</code><span class="sig-paren">(</span><em class="sig-param">key</em><span class="sig-paren">)</span><a class="headerlink" href="#flatland.schema.containers.SparseDict.may_contain" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the element schema allows a field named <strong>key</strong>.</p>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.SparseDict.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None.  Remove all items from D.<a class="headerlink" href="#flatland.schema.containers.SparseDict.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.SparseDict.popitem">
<code class="sig-name descname">popitem</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; (k, v), remove and return some (key, value) pair as a<a class="headerlink" href="#flatland.schema.containers.SparseDict.popitem" title="Permalink to this definition">¶</a></dt>
<dd><p>2-tuple; but raise KeyError if D is empty.</p>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.SparseDict.pop">
<code class="sig-name descname">pop</code><span class="sig-paren">(</span><em class="sig-param">k</em><span class="optional">[</span>, <em class="sig-param">d</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; v, remove specified key and return the corresponding value.<a class="headerlink" href="#flatland.schema.containers.SparseDict.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>If key is not found, d is returned if given, otherwise KeyError is raised</p>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.SparseDict.setdefault">
<code class="sig-name descname">setdefault</code><span class="sig-paren">(</span><em class="sig-param">k</em><span class="optional">[</span>, <em class="sig-param">d</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; D.get(k,d), also set D[k]=d if k not in D<a class="headerlink" href="#flatland.schema.containers.SparseDict.setdefault" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.SparseDict.is_empty">
<em class="property">property </em><code class="sig-name descname">is_empty</code><a class="headerlink" href="#flatland.schema.containers.SparseDict.is_empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Mappings are never empty.</p>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.SparseDict.set_default">
<code class="sig-name descname">set_default</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flatland.schema.containers.SparseDict.set_default" title="Permalink to this definition">¶</a></dt>
<dd><p>set() the element to the schema default.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/flatland.png" alt="Logo"/>
            </a></p>
  <h3>Contents</h3>
  <ul>
    <li><ul>
<li><a class="reference internal" href="#">Dicts</a><ul>
<li><a class="reference internal" href="#set-policy"><code class="docutils literal notranslate"><span class="pre">set()</span></code> Policy</a></li>
<li><a class="reference internal" href="#validation">Validation</a></li>
<li><a class="reference internal" href="#dict"><code class="docutils literal notranslate"><span class="pre">Dict</span></code></a></li>
<li><a class="reference internal" href="#sparsedict"><code class="docutils literal notranslate"><span class="pre">SparseDict</span></code></a></li>
</ul>
</li>
</ul>
</li>
  </ul>
<h3>Topics</h3>
<ul>
  <li><ul>
  <li><a href="index.html">Defining and Using Forms</a><ul>
      <li>Previous: <a href="datetimes.html" title="previous chapter">Dates and Times</a></li>
      <li>Next: <a href="lists.html" title="next chapter">Lists</a></li>
  </ul></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2018, the flatland authors and contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>