{"version":3,"sources":["webpack:///./app/components/modals/recoveryOptionsModal.jsx"],"names":["RecoveryOptionsModal","_getPrototypeOf2","_this","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","this","_len","arguments","length","args","Array","_key","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","call","apply","concat","handleSkipSms","setState","skipSms","state","_this$props","props","authenticatorName","closeModal","Body","Header","_this$state","authenticators","_authenticators$reduc","reduce","obj","item","id","recovery","sms","recoveryEnrolled","isEnrolled","displaySmsPrompt","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","Fragment","closeButton","onHide","t","app_views_settings_components_text_textBlock__WEBPACK_IMPORTED_MODULE_12__","app_components_alert__WEBPACK_IMPORTED_MODULE_9__","type","className","app_components_button__WEBPACK_IMPORTED_MODULE_11__","onClick","name","autoFocus","priority","to","Object","emotion__WEBPACK_IMPORTED_MODULE_0__","marginLeft","space","authId","AsyncComponent","propTypes","PropTypes","func","onClose","string","isRequired","oneOfType","node"],"mappings":"iRAUMA,cASJ,SAAAA,IAAqB,IAAAC,EAAAC,EAAAC,IAAAC,KAAAJ,GAAA,QAAAK,EAAAC,UAAAC,OAANC,EAAM,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAANF,EAAME,GAAAJ,UAAAI,GAAA,OACnBR,EAAAS,IAAAP,MAAAH,EAAAW,IAAAZ,IAAAa,KAAAC,MAAAb,EAAA,CAAAG,MAAAW,OAASP,MAUXQ,cAAgB,WACdd,EAAKe,SAAS,CAACC,SAAS,KAVxBhB,EAAKiB,MAAQ,CACXD,SAAS,GAHQhB,8DAQnB,MAAO,CAAC,CAAC,iBAAkB,mEAOhB,IAAAkB,EAC2ChB,KAAKiB,MAApDC,EADIF,EACJE,kBAAmBC,EADfH,EACeG,WAAYC,EAD3BJ,EAC2BI,KAAMC,EADjCL,EACiCK,OADjCC,EAEuBtB,KAAKe,MAAhCQ,EAFID,EAEJC,eAAgBT,EAFZQ,EAEYR,QAFZU,EAIaD,EAAeE,OAAO,SAACC,EAAKC,GAElD,OADAD,EAAIC,EAAKC,IAAMD,EACRD,GACN,IAHIG,EAJIL,EAIJK,SAAUC,EAJNN,EAIMM,IAIXC,EAAmBF,GAAYA,EAASG,WACxCC,EAAmBH,IAAQA,EAAIE,aAAelB,EAEpD,OACEoB,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACEH,EAAAC,EAAAC,cAACf,EAAD,CAAQiB,aAAW,EAACC,OAAQpB,GACzBqB,YAAE,sCAGLN,EAAAC,EAAAC,cAAChB,EAAD,KACEc,EAAAC,EAAAC,cAACK,EAAA,QAAD,KACGD,YAAE,qDAAsDtB,IAE3DgB,EAAAC,EAAAC,cAACK,EAAA,QAAD,KACGD,YAAE,mEAGJP,EAECC,EAAAC,EAAAC,cAACM,EAAA,QAAD,CAAOC,KAAK,WACTH,YAAE,+DAILN,EAAAC,EAAAC,cAACM,EAAA,QAAD,CAAOC,KAAK,WACTH,YAAC,2JAQPP,EAECC,EAAAC,EAAAC,cAAA,OAAKQ,UAAU,gBACbV,EAAAC,EAAAC,cAACS,EAAA,QAAD,CAAQC,QAAS9C,KAAKY,cAAemC,KAAK,WAAWC,WAAS,GAC3DR,YAAE,mBAELN,EAAAC,EAAAC,cAACS,EAAA,QAAD,CACEI,SAAS,UACTH,QAAS3B,EACT+B,GAAE,kCAAAvC,OAAoCmB,EAAIF,GAAxC,YACFmB,KAAK,WAJPH,UAAAO,OAAAC,EAAA,IAAAD,CAKO,CAACE,WAAYC,kBAAM,KACxBN,WAAS,GAERR,YAAE,wBAKPN,EAAAC,EAAAC,cAAA,OAAKQ,UAAU,gBACbV,EAAAC,EAAAC,cAACS,EAAA,QAAD,CACEI,SAAS,UACTH,QAAS3B,EACT+B,GACEnB,EAAgB,kCAAApB,OACsBkB,EAAS0B,OAD/B,KAEZ,8BAENR,KAAK,WACLC,WAAS,GAERR,YAAE,gCAhGkBgB,WAA7B5D,EACG6D,UAAY,CACjBtC,WAAYuC,IAAUC,KACtBC,QAASF,IAAUC,KACnBzC,kBAAmBwC,IAAUG,OAAOC,WACpC1C,KAAMsC,IAAUK,UAAU,CAACL,IAAUC,KAAMD,IAAUM,OAAOF,WAC5DzC,OAAQqC,IAAUK,UAAU,CAACL,IAAUC,KAAMD,IAAUM,OAAOF,YAmGnDlE","file":"RecoveryOptionsModal.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {t} from 'app/locale';\nimport Alert from 'app/components/alert';\nimport AsyncComponent from 'app/components/asyncComponent';\nimport Button from 'app/components/button';\nimport TextBlock from 'app/views/settings/components/text/textBlock';\nimport space from 'app/styles/space';\n\nclass RecoveryOptionsModal extends AsyncComponent {\n  static propTypes = {\n    closeModal: PropTypes.func,\n    onClose: PropTypes.func,\n    authenticatorName: PropTypes.string.isRequired,\n    Body: PropTypes.oneOfType([PropTypes.func, PropTypes.node]).isRequired,\n    Header: PropTypes.oneOfType([PropTypes.func, PropTypes.node]).isRequired,\n  };\n\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      skipSms: false,\n    };\n  }\n\n  getEndpoints() {\n    return [['authenticators', '/users/me/authenticators/']];\n  }\n\n  handleSkipSms = () => {\n    this.setState({skipSms: true});\n  };\n\n  renderBody() {\n    const {authenticatorName, closeModal, Body, Header} = this.props;\n    const {authenticators, skipSms} = this.state;\n\n    const {recovery, sms} = authenticators.reduce((obj, item) => {\n      obj[item.id] = item;\n      return obj;\n    }, {});\n    const recoveryEnrolled = recovery && recovery.isEnrolled;\n    const displaySmsPrompt = sms && !sms.isEnrolled && !skipSms;\n\n    return (\n      <React.Fragment>\n        <Header closeButton onHide={closeModal}>\n          {t('Two-Factor Authentication Enabled')}\n        </Header>\n\n        <Body>\n          <TextBlock>\n            {t('Two-factor authentication via %s has been enabled.', authenticatorName)}\n          </TextBlock>\n          <TextBlock>\n            {t('You should now set up recovery options to secure your account.')}\n          </TextBlock>\n\n          {displaySmsPrompt ? (\n            // set up backup phone number\n            <Alert type=\"warning\">\n              {t('We recommend adding a phone number as a backup 2FA method.')}\n            </Alert>\n          ) : (\n            // get recovery codes\n            <Alert type=\"warning\">\n              {t(\n                `Recovery codes are the only way to access your account if you lose\n                  your device and cannot receive two-factor authentication codes.`\n              )}\n            </Alert>\n          )}\n        </Body>\n\n        {displaySmsPrompt ? (\n          // set up backup phone number\n          <div className=\"modal-footer\">\n            <Button onClick={this.handleSkipSms} name=\"skipStep\" autoFocus>\n              {t('Skip this step')}\n            </Button>\n            <Button\n              priority=\"primary\"\n              onClick={closeModal}\n              to={`/settings/account/security/mfa/${sms.id}/enroll/`}\n              name=\"addPhone\"\n              css={{marginLeft: space(1)}}\n              autoFocus\n            >\n              {t('Add a Phone Number')}\n            </Button>\n          </div>\n        ) : (\n          // get recovery codes\n          <div className=\"modal-footer\">\n            <Button\n              priority=\"primary\"\n              onClick={closeModal}\n              to={\n                recoveryEnrolled\n                  ? `/settings/account/security/mfa/${recovery.authId}/`\n                  : '/settings/account/security/'\n              }\n              name=\"getCodes\"\n              autoFocus\n            >\n              {t('Get Recovery Codes')}\n            </Button>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default RecoveryOptionsModal;\n"],"sourceRoot":""}