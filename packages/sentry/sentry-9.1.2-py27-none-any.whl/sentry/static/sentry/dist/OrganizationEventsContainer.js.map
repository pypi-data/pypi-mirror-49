{"version":3,"sources":["webpack:///./app/components/betaTag.jsx","webpack:////usr/src/sentry/node_modules/lodash/memoize.js","webpack:////usr/src/sentry/node_modules/lodash/_MapCache.js","webpack:///./app/views/organizationEvents/searchBar.jsx","webpack:///./app/views/organizationEvents/index.jsx"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_emotion__WEBPACK_IMPORTED_MODULE_1__","app_views_settings_components_tag__WEBPACK_IMPORTED_MODULE_2__","app_components_tooltip__WEBPACK_IMPORTED_MODULE_3__","app_styles_space__WEBPACK_IMPORTED_MODULE_4__","app_locale__WEBPACK_IMPORTED_MODULE_5__","StyledTag","styled","Tag","target","p","theme","fontSizeSmall","space","BetaTag","a","createElement","title","t","tooltipOptions","placement","priority","size","MapCache","FUNC_ERROR_TEXT","memoize","func","resolver","TypeError","memoized","args","arguments","key","apply","this","cache","has","get","result","set","Cache","module","exports","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","index","length","clear","entry","prototype","tagToObjectReducer","acc","name","SEARCH_SPECIAL_CHARS_REGEXP","RegExp","concat","NEGATION_OPERATOR","SEARCH_WILDCARD","SearchBar","_this","classCallCheck_default","possibleConstructorReturn_default","getPrototypeOf_default","call","getEventFieldValues","memoize_default","tag","query","_this$props","props","api","organization","fetchTagValues","slug","then","results","flatten_default","filter","_ref","defined","map","_ref2","Error","_ref3","getAllTags","undefined","sort","reduce","prepareQuery","replace","state","tags","_this2","_this$props2","fetchOrganizationTags","setState","_ref4","addErrorMessage","react_default","smartSearchBar","extends_default","onGetTagValues","supportedTags","excludeEnvironment","dropdownClassName","css","React","PureComponent","propTypes","PropTypes","object","SentryTypes","Organization","withApi","OrganizationEventsContainer","handleSearch","router","location","push","pathname","getParams","objectSpread_default","children","feature","features","hookName","renderDisabled","globalSelectionHeader","resetParamsOnChange","styles_organization","noProjectMessage","Body","HeaderTitle","betaTag","StyledSearchBar","placeholder","onSearch","Component","withOrganization","withGlobalSelection","whiteDark","PageHeading"],"mappings":"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","file":"OrganizationEventsContainer.js","sourcesContent":["import React from 'react';\nimport styled from 'react-emotion';\nimport Tag from 'app/views/settings/components/tag';\nimport Tooltip from 'app/components/tooltip';\nimport space from 'app/styles/space';\nimport {t} from 'app/locale';\n\nconst BetaTag = () => (\n  <Tooltip\n    title={t('This feature is in beta and may change in the future.')}\n    tooltipOptions={{\n      placement: 'right',\n    }}\n  >\n    <StyledTag priority=\"beta\" size=\"small\">\n      beta\n    </StyledTag>\n  </Tooltip>\n);\n\nconst StyledTag = styled(Tag)`\n  position: relative;\n  top: -1px;\n  font-size: ${p => p.theme.fontSizeSmall};\n  font-weight: normal;\n  padding: 3px 6px;\n  margin-left: ${space(0.5)};\n  border-radius: 20px;\n`;\n\nexport default BetaTag;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","import {css} from 'react-emotion';\nimport {flatten, memoize} from 'lodash';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {NEGATION_OPERATOR, SEARCH_WILDCARD} from 'app/constants';\nimport {addErrorMessage} from 'app/actionCreators/indicator';\nimport {defined} from 'app/utils';\nimport {fetchOrganizationTags, fetchTagValues} from 'app/actionCreators/tags';\nimport {t} from 'app/locale';\nimport SentryTypes from 'app/sentryTypes';\nimport SmartSearchBar from 'app/components/smartSearchBar';\nimport withApi from 'app/utils/withApi';\n\nconst tagToObjectReducer = (acc, name) => {\n  acc[name] = {\n    key: name,\n    name,\n  };\n  return acc;\n};\n\nconst SEARCH_SPECIAL_CHARS_REGEXP = new RegExp(\n  `^${NEGATION_OPERATOR}|\\\\${SEARCH_WILDCARD}`,\n  'g'\n);\n\nclass SearchBar extends React.PureComponent {\n  static propTypes = {\n    api: PropTypes.object,\n    organization: SentryTypes.Organization,\n  };\n\n  constructor() {\n    super();\n\n    this.state = {\n      tags: {},\n    };\n  }\n\n  componentDidMount() {\n    const {api, organization} = this.props;\n    fetchOrganizationTags(api, organization.slug).then(\n      results => {\n        this.setState({\n          tags: this.getAllTags(results.map(({key}) => key)),\n        });\n      },\n      () => addErrorMessage(t('There was a problem fetching tags'))\n    );\n  }\n\n  /**\n   * Returns array of tag values that substring match `query`; invokes `callback`\n   * with data when ready\n   */\n  getEventFieldValues = memoize((tag, query) => {\n    const {api, organization} = this.props;\n\n    return fetchTagValues(api, organization.slug, tag.key, query).then(\n      results => flatten(results.filter(({name}) => defined(name)).map(({name}) => name)),\n      () => {\n        throw new Error('Unable to fetch event field values');\n      }\n    );\n  }, ({key}, query) => `${key}-${query}`);\n\n  getAllTags = (orgTags = []) => orgTags.sort().reduce(tagToObjectReducer, {});\n\n  /**\n   * Prepare query string (e.g. strip special characters like negation operator)\n   */\n  prepareQuery = query => {\n    return query.replace(SEARCH_SPECIAL_CHARS_REGEXP, '');\n  };\n\n  render() {\n    return (\n      <SmartSearchBar\n        {...this.props}\n        onGetTagValues={this.getEventFieldValues}\n        supportedTags={this.state.tags}\n        prepareQuery={this.prepareQuery}\n        excludeEnvironment\n        dropdownClassName={css`\n          max-height: 300px;\n          overflow-y: auto;\n        `}\n      />\n    );\n  }\n}\n\nexport default withApi(SearchBar);\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from 'react-emotion';\n\nimport {getParams} from 'app/views/organizationEvents/utils/getParams';\nimport {t} from 'app/locale';\nimport BetaTag from 'app/components/betaTag';\nimport Feature from 'app/components/acl/feature';\nimport GlobalSelectionHeader from 'app/components/organizations/globalSelectionHeader';\nimport NoProjectMessage from 'app/components/noProjectMessage';\nimport SentryTypes from 'app/sentryTypes';\nimport PageHeading from 'app/components/pageHeading';\nimport withGlobalSelection from 'app/utils/withGlobalSelection';\nimport withOrganization from 'app/utils/withOrganization';\nimport {PageContent, PageHeader} from 'app/styles/organization';\n\nimport SearchBar from './searchBar';\n\nclass OrganizationEventsContainer extends React.Component {\n  static propTypes = {\n    organization: SentryTypes.Organization,\n    router: PropTypes.object,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n  }\n\n  handleSearch = query => {\n    const {router, location} = this.props;\n    router.push({\n      pathname: location.pathname,\n      query: getParams({\n        ...(location.query || {}),\n        query,\n      }),\n    });\n  };\n\n  render() {\n    const {organization, location, children} = this.props;\n\n    return (\n      <Feature features={['events']} hookName=\"events-page\" renderDisabled>\n        <GlobalSelectionHeader\n          organization={organization}\n          resetParamsOnChange={['cursor']}\n        />\n        <PageContent>\n          <NoProjectMessage organization={organization}>\n            <Body>\n              <PageHeader>\n                <HeaderTitle>\n                  {t('Events')} <BetaTag />\n                </HeaderTitle>\n                <StyledSearchBar\n                  organization={organization}\n                  query={(location.query && location.query.query) || ''}\n                  placeholder={t('Search for events, users, tags, and everything else.')}\n                  onSearch={this.handleSearch}\n                />\n              </PageHeader>\n              {children}\n            </Body>\n          </NoProjectMessage>\n        </PageContent>\n      </Feature>\n    );\n  }\n}\nexport default withOrganization(withGlobalSelection(OrganizationEventsContainer));\nexport {OrganizationEventsContainer};\n\nconst Body = styled('div')`\n  background-color: ${p => p.theme.whiteDark};\n  flex-direction: column;\n  flex: 1;\n`;\n\nconst HeaderTitle = styled(PageHeading)`\n  flex: 1;\n`;\n\nconst StyledSearchBar = styled(SearchBar)`\n  flex: 1;\n`;\n"],"sourceRoot":""}