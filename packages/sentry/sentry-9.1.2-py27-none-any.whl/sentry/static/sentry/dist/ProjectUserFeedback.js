(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{1717:function(e,t,r){"use strict";r.d(t,"a",function(){return N});var n=r(12),a=r.n(n),s=r(4),i=r.n(s),o=r(6),c=r.n(o),u=r(7),l=r.n(u),p=r(5),d=r.n(p),m=r(8),h=r.n(m),f=r(177),v=r.n(f),g=r(0),y=r.n(g),b=r(10),E=r(1),k=r.n(E),j=r(2),S=r(107),q=r(25),L=r(188),N=function(e){function t(){return i()(this,t),l()(this,d()(t).apply(this,arguments))}return h()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.location,r=t.pathname,n=t.query,s=e.pageLinks,i=e.children,o=e.status,c=v()(n,"status"),u=a()({},n,{status:""});return y.a.createElement("div",null,y.a.createElement("div",{className:"row"},y.a.createElement("div",{className:"col-sm-9",style:{marginBottom:"5px"}},y.a.createElement(L.a,{withMargins:!0},Object(j.t)("User Feedback"))),y.a.createElement("div",{className:"col-sm-3",style:{textAlign:"right",marginTop:"4px"}},y.a.createElement("div",{className:"btn-group"},y.a.createElement(b.Link,{to:{pathname:r,query:c},className:"btn btn-sm btn-default"+("unresolved"===o?" active":"")},Object(j.t)("Unresolved")),y.a.createElement(b.Link,{to:{pathname:r,query:u},className:"btn btn-sm btn-default"+(""===o?" active":"")},Object(j.t)("All Issues"))))),y.a.createElement(q.a,null,y.a.createElement(q.c,{className:"issue-list"},i)),y.a.createElement(S.default,{pageLinks:s}))}}]),t}(y.a.Component);N.propTypes={location:k.a.object.isRequired,pageLinks:k.a.string,status:k.a.string.isRequired}},2343:function(e,t,r){"use strict";r.r(t),r.d(t,"ProjectUserFeedback",function(){return x});var n=r(12),a=r.n(n),s=r(44),i=r.n(s),o=r(177),c=r.n(o),u=r(1),l=r.n(u),p=r(0),d=r.n(p),m=r(17),h=r.n(m),f=r(10),v=r(97),g=r.n(v),y=r(84),b=r.n(y),E=r(9),k=r(37),j=r(225),S=r(67),q=r(53),L=r(33),N=r(618),I=r(437),w=r(145),O=r(2),Q=r(189),R=r(56),U=r(1717),x=h()({displayName:"ProjectUserFeedback",propTypes:{organization:E.default.Organization.isRequired,defaultQuery:l.a.string,defaultStatus:l.a.string,setProjectNavSection:l.a.func,environment:E.default.Environment},contextTypes:{project:E.default.Project},mixins:[k.default,j.a],getDefaultProps:function(){return{defaultQuery:"",defaultStatus:"unresolved"}},getInitialState:function(){return a()({reportList:[],loading:!0,error:!1,pageLinks:"",query:this.props.defaultQuery,status:this.props.defaultStatus,environment:this.props.environment},this.getQueryStringState(this.props))},componentWillMount:function(){var e=this.props,t=e.organization,r=e.params.orgId;if(new Set(t.features).has("sentry10")){var n=this.context.project.id;f.browserHistory.replace("/organizations/".concat(r,"/user-feedback/?project=").concat(n))}this.props.setProjectNavSection("user-feedback"),this.fetchData()},componentWillReceiveProps:function(e){var t=c()(b.a.parse(e.location.search),"environment"),r=c()(b.a.parse(this.props.location.search),"environment");i()(t,r)||this.setState(this.getQueryStringState(e),this.fetchData),e.environment!==this.props.environment&&this.setState({environment:e.environment},this.fetchData)},getQueryStringState:function(e){var t=e.location.query,r="status"in t?t.status:this.props.defaultStatus;return{query:"query"in t?t.query:this.props.defaultQuery,status:r}},fetchData:function(){var e=this;this.setState({loading:!0,error:!1});var t=this.props.params,r=a()({},this.props.location.query,{per_page:50,query:this.state.query,status:this.state.status});this.state.environment?r.environment=this.state.environment.name:delete r.environment,this.api.request("/projects/".concat(t.orgId,"/").concat(t.projectId,"/user-reports/"),{query:r,success:function(t,r,n){var a=t.map(function(e){return e.issue});S.a.add(a),e.setState({error:!1,loading:!1,reportList:t,pageLinks:n.getResponseHeader("Link")})},error:function(){e.setState({error:!0,loading:!1})}})},getUserFeedbackUrl:function(){var e=this.props.params;return"/".concat(e.orgId,"/").concat(e.projectId,"/settings/user-feedback/")},renderStreamBody:function(){return this.state.loading?d.a.createElement(L.default,null):this.state.error?d.a.createElement(q.default,{onRetry:this.fetchData}):this.state.reportList.length>0?this.renderResults():this.state.query&&this.state.query!==this.props.defaultQuery?this.renderNoQueryResults():this.renderEmpty()},renderNoQueryResults:function(){return d.a.createElement(w.a,null,d.a.createElement("p",null,Object(O.t)("Sorry, no results match your search query.")))},renderEmpty:function(){var e=this.state.environment,t=e?Object(O.tct)("No user reports have been collected from your [env] environment.",{env:e.displayName}):Object(O.t)("No user reports have been collected.");return d.a.createElement(w.a,null,d.a.createElement("p",null,t),d.a.createElement("p",null,d.a.createElement(f.Link,{to:this.getUserFeedbackUrl()},Object(O.t)("Learn how to integrate User Feedback"))))},renderResults:function(){var e=this.props.params,t=e.orgId,r=e.projectId;return this.state.reportList.map(function(e){var n=e.issue;return d.a.createElement(N.a,{key:e.id,id:n.id,data:n},d.a.createElement(I.a,{report:e,orgId:t,projectId:r,issueId:n.id}))})},render:function(){var e=this.props.location,t=this.context,r=t.project.slug,n=t.organization.name;return d.a.createElement(g.a,{title:"User Feedback - ".concat(r," - ").concat(n," - Sentry")},d.a.createElement(U.a,{pageLinks:this.state.pageLinks,status:this.state.status,location:e},this.renderStreamBody()))}});t.default=Object(R.a)(Object(Q.a)(x))}}]);
//# sourceMappingURL=ProjectUserFeedback.js.map