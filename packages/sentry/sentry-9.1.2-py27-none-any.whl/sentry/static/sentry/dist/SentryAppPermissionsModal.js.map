{"version":3,"sources":["webpack:///./app/components/modals/sentryAppPermissionsModal.jsx","webpack:////usr/src/sentry/node_modules/lodash/groupBy.js","webpack:////usr/src/sentry/node_modules/lodash/_copyArray.js","webpack:///./app/utils/consolidatedScopes.jsx","webpack:////usr/src/sentry/node_modules/lodash/pull.js","webpack:////usr/src/sentry/node_modules/lodash/pullAll.js","webpack:////usr/src/sentry/node_modules/lodash/_basePullAll.js","webpack:////usr/src/sentry/node_modules/lodash/_baseIndexOfWith.js"],"names":["SentryAppPermissionsModal","_this$props","this","props","onInstall","closeModal","permissions","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","Fragment","read","length","app_components_panels__WEBPACK_IMPORTED_MODULE_9__","key","t","concat","join","write","admin","_this","_this$props2","app","orgId","Header","Body","closeButton","onHide","name","Title","renderPermissions","className","redirectUrl","RedirectionInfo","StyledButton","priority","onClick","ConsolidatedScopes","scopes","toPermissions","React","Component","propTypes","PropTypes","func","isRequired","oneOfType","node","SentryTypes","SentryApplication","string","styled","Button","target","space","p","theme","gray5","gray2","baseAssignValue","__webpack_require__","createAggregator","hasOwnProperty","Object","prototype","groupBy","result","value","call","push","module","exports","source","array","index","Array","PERMISSION_LEVELS","HUMAN_RESOURCE_NAMES","project","team","release","event","org","member","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default","compareScopes","b","permissionLevel","scope","permission","split","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default","defaultResourcePermissions","includes","Release","lodash_pull__WEBPACK_IMPORTED_MODULE_5___default","topScopes","forEach","_scope$split","_scope$split2","_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default","resource","_scope$split3","_scope$split4","scopeList","_this2","values","lodash_groupBy__WEBPACK_IMPORTED_MODULE_4___default","map","sort","pop","Project","Team","Event","Organization","Member","pull","baseRest","basePullAll","arrayMap","baseIndexOf","baseIndexOfWith","baseUnary","copyArray","splice","iteratee","comparator","indexOf","seen","fromIndex","computed"],"mappings":"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","file":"SentryAppPermissionsModal.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Button from 'app/components/button';\nimport {t} from 'app/locale';\nimport {Panel, PanelItem} from 'app/components/panels';\nimport SentryTypes from 'app/sentryTypes';\nimport space from 'app/styles/space';\nimport styled from 'react-emotion';\nimport ConsolidatedScopes from 'app/utils/consolidatedScopes';\n\nclass SentryAppPermissionsModal extends React.Component {\n  static propTypes = {\n    closeModal: PropTypes.func.isRequired,\n    onInstall: PropTypes.func.isRequired,\n    Body: PropTypes.oneOfType([PropTypes.func, PropTypes.node]).isRequired,\n    Header: PropTypes.oneOfType([PropTypes.func, PropTypes.node]).isRequired,\n    app: SentryTypes.SentryApplication.isRequired,\n    orgId: PropTypes.string.isRequired,\n  };\n\n  onInstall() {\n    const {onInstall, closeModal} = this.props;\n    onInstall();\n    closeModal();\n  }\n\n  get permissions() {\n    return new ConsolidatedScopes(this.props.app.scopes).toPermissions();\n  }\n\n  renderPermissions() {\n    const permissions = this.permissions;\n    return (\n      <React.Fragment>\n        {permissions.read.length > 0 && (\n          <PanelItem key=\"read\">\n            <p>\n              <strong>{t('Read')}</strong>\n              {t(` access to ${permissions.read.join(', ')}`)}\n            </p>\n          </PanelItem>\n        )}\n        {permissions.write.length > 0 && (\n          <PanelItem key=\"write\">\n            <p>\n              <strong>{t('Read')}</strong>\n              {t(' and ')}\n              <strong>{t('write')}</strong>\n              {t(` access to ${permissions.write.join(', ')}`)}\n            </p>\n          </PanelItem>\n        )}\n        {permissions.admin.length > 0 && (\n          <PanelItem key=\"admin\">\n            <p>\n              <strong>{t('Admin')}</strong>\n              {t(` access to ${permissions.admin.join(', ')}`)}\n            </p>\n          </PanelItem>\n        )}\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const {closeModal, app, orgId, Header, Body} = this.props;\n    return (\n      <React.Fragment>\n        <Header closeButton onHide={closeModal}>\n          {t(`Install ${app.name}`)}\n        </Header>\n        <Body>\n          <Title>\n            {t('Install on your ')}\n            <strong>{orgId}</strong>\n            {t(' organization with the following permissions:')}\n          </Title>\n          <Panel>{this.renderPermissions()}</Panel>\n        </Body>\n        <div className=\"modal-footer\">\n          {app.redirectUrl && (\n            <RedirectionInfo>\n              {t(\n                `After installation you'll be redirected to the ${app.name} service to finish setup.`\n              )}\n            </RedirectionInfo>\n          )}\n          <StyledButton priority=\"success\" onClick={() => this.onInstall()}>\n            {t('Install')}\n          </StyledButton>\n          <StyledButton onClick={closeModal}>{t('Cancel')}</StyledButton>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SentryAppPermissionsModal;\n\nconst StyledButton = styled(Button)`\n  margin-left: ${space(1)};\n`;\n\nconst Title = styled('p')`\n  color: ${p => p.theme.gray5};\n`;\n\nconst RedirectionInfo = styled('div')`\n  padding-right: 5px;\n  font-size: 12px;\n  color: ${p => p.theme.gray2};\n`;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","import {pull, groupBy} from 'lodash';\n\nconst PERMISSION_LEVELS = {\n  read: 0,\n  write: 1,\n  admin: 2,\n};\n\nconst HUMAN_RESOURCE_NAMES = {\n  project: 'Project',\n  team: 'Team',\n  release: 'Release',\n  event: 'Event',\n  org: 'Organization',\n  member: 'Member',\n};\n\nconst PROJECT_RELEASES = 'project:releases';\n\nexport default class ConsolidatedScopes {\n  constructor(scopes) {\n    this.scopes = scopes;\n  }\n\n  /**\n   * Convert into a list of Permissions, grouped by resource.\n   *\n   * This is used in the new/edit Sentry App form. That page displays permissions\n   * in a per-Resource manner, meaning one row for Project, one for Organization, etc.\n   *\n   * This exposes scopes in a way that works for that UI.\n   *\n   * Example:\n   *    {\n   *      'Project': 'read',\n   *      'Organization': 'write',\n   *      'Team': 'no-access',\n   *      ...\n   *    }\n   */\n  toResourcePermissions() {\n    const scopes = [...this.scopes];\n    const permissions = this.defaultResourcePermissions;\n\n    // The scope for releases is `project:releases`, but instead of displaying\n    // it as a permission of Project, we want to separate it out into its own\n    // row for Releases.\n    if (scopes.includes(PROJECT_RELEASES)) {\n      permissions.Release = 'admin';\n      pull(scopes, PROJECT_RELEASES); // remove project:releases\n    }\n\n    this.topScopes(scopes).forEach(scope => {\n      const [resource, permission] = scope.split(':');\n      permissions[HUMAN_RESOURCE_NAMES[resource]] = permission;\n    });\n\n    return permissions;\n  }\n\n  /**\n   * Convert into a list of Permissions, grouped by access and including a\n   * list of resources per access level.\n   *\n   * This is used in the Permissions Modal when installing an App. It displays\n   * scopes in a per-Permission way, meaning one row for Read, one for Write,\n   * and one for Admin.\n   *\n   * This exposes scopes in a way that works for that UI.\n   *\n   * Example:\n   *    {\n   *      read:  ['Project', 'Organization'],\n   *      write: ['Member'],\n   *      admin: ['Release']\n   *    }\n   */\n  toPermissions() {\n    const scopes = [...this.scopes];\n    const permissions = {read: [], write: [], admin: []};\n\n    // The scope for releases is `project:releases`, but instead of displaying\n    // it as a permission of Project, we want to separate it out into its own\n    // row for Releases.\n    if (scopes.includes(PROJECT_RELEASES)) {\n      permissions.admin.push('Release');\n      pull(scopes, PROJECT_RELEASES); // remove project:releases\n    }\n\n    this.topScopes(scopes).forEach(scope => {\n      const [resource, permission] = scope.split(':');\n      permissions[permission].push(HUMAN_RESOURCE_NAMES[resource]);\n    });\n\n    return permissions;\n  }\n\n  /**\n   * Return the most permissive scope for each resource.\n   *\n   * Example:\n   *    Given the full list of scopes:\n   *      ['project:read', 'project:write', 'team:read', 'team:write', 'team:admin']\n   *\n   *    this would return:\n   *      ['project:write', 'team:admin']\n   */\n  topScopes(scopeList) {\n    return Object.values(groupBy(scopeList, scope => scope.split(':')[0]))\n      .map(scopes => scopes.sort(this.compareScopes))\n      .map(scopes => scopes.pop());\n  }\n\n  compareScopes = (a, b) => {\n    return this.permissionLevel(a) - this.permissionLevel(b);\n  };\n\n  /**\n   * Numerical value of the scope where Admin is higher than Write,\n   * which is higher than Read. Used to sort scopes by access.\n   */\n  permissionLevel = scope => {\n    const permission = scope.split(':')[1];\n    return PERMISSION_LEVELS[permission];\n  };\n\n  get defaultResourcePermissions() {\n    return {\n      Project: 'no-access',\n      Team: 'no-access',\n      Release: 'no-access',\n      Event: 'no-access',\n      Organization: 'no-access',\n      Member: 'no-access',\n    };\n  }\n}\n","var baseRest = require('./_baseRest'),\n    pullAll = require('./pullAll');\n\n/**\n * Removes all given values from `array` using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n * to remove elements from an array by predicate.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {...*} [values] The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pull(array, 'a', 'c');\n * console.log(array);\n * // => ['b', 'b']\n */\nvar pull = baseRest(pullAll);\n\nmodule.exports = pull;\n","var basePullAll = require('./_basePullAll');\n\n/**\n * This method is like `_.pull` except that it accepts an array of values to remove.\n *\n * **Note:** Unlike `_.difference`, this method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pullAll(array, ['a', 'c']);\n * console.log(array);\n * // => ['b', 'b']\n */\nfunction pullAll(array, values) {\n  return (array && array.length && values && values.length)\n    ? basePullAll(array, values)\n    : array;\n}\n\nmodule.exports = pullAll;\n","var arrayMap = require('./_arrayMap'),\n    baseIndexOf = require('./_baseIndexOf'),\n    baseIndexOfWith = require('./_baseIndexOfWith'),\n    baseUnary = require('./_baseUnary'),\n    copyArray = require('./_copyArray');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAllBy` without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAll(array, values, iteratee, comparator) {\n  var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n      index = -1,\n      length = values.length,\n      seen = array;\n\n  if (array === values) {\n    values = copyArray(values);\n  }\n  if (iteratee) {\n    seen = arrayMap(array, baseUnary(iteratee));\n  }\n  while (++index < length) {\n    var fromIndex = 0,\n        value = values[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n      if (seen !== array) {\n        splice.call(seen, fromIndex, 1);\n      }\n      splice.call(array, fromIndex, 1);\n    }\n  }\n  return array;\n}\n\nmodule.exports = basePullAll;\n","/**\n * This function is like `baseIndexOf` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOfWith(array, value, fromIndex, comparator) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(array[index], value)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseIndexOfWith;\n"],"sourceRoot":""}