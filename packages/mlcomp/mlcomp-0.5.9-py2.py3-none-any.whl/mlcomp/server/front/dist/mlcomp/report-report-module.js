(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+LPY":function(t,e){t.exports="<router-outlet></router-outlet>"},"1T+H":function(t,e){t.exports='<div style="text-align:center">{{item.name}}</div>\n<img [attr.src]="\'data:image/JPEG;base64,\'+data.data">'},"1nhq":function(t,e){t.exports='<mat-accordion>\n    <mat-expansion-panel (opened)="dag_panel_open = true"\n                         (closed)="dag_panel_open = false">\n        <mat-expansion-panel-header>\n            <mat-panel-title>\n                Dags\n            </mat-panel-title>\n            <mat-panel-description>\n                Dags to add/remove\n            </mat-panel-description>\n        </mat-expansion-panel-header>\n\n        <app-dags *ngIf="dag_panel_open" [report]="id"></app-dags>\n    </mat-expansion-panel>\n\n    <mat-expansion-panel (opened)="task_panel_open = true"\n                         (closed)="task_panel_open = false">\n        <mat-expansion-panel-header>\n            <mat-panel-title>\n                Tasks\n            </mat-panel-title>\n            <mat-panel-description>\n                Tasks to add/remove\n            </mat-panel-description>\n        </mat-expansion-panel-header>\n\n        <app-tasks *ngIf="task_panel_open" [report]="id"></app-tasks>\n    </mat-expansion-panel>\n\n</mat-accordion>\n\n<app-layout [item]="report.layout" [data]="report.data" [report_id]="id" *ngIf="report"></app-layout>\n\n\n\n'},"4r8v":function(t,e){t.exports="\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlcG9ydC9pbnRlcm5hbC9pbWcvaW1nLmNvbXBvbmVudC5jc3MifQ== */"},"7C2W":function(t,e){t.exports="\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlcG9ydC9pbnRlcm5hbC9zZXJpZXMvc2VyaWVzLmNvbXBvbmVudC5jc3MifQ== */"},LVab:function(t,e,n){"use strict";n.r(e);var a=n("mrSG"),i=n("CcnG"),o=n("ZYCi"),s=function(){function t(){}return t.prototype.ngOnInit=function(){},t=a.b([Object(i.n)({selector:"app-reports",template:n("+LPY"),styles:[n("R3N3")]}),a.d("design:paramtypes",[])],t)}(),r=n("dK7+"),d=n("+2/a"),p=n("Ip0R"),c=n("9VKz"),l=function(){function t(t,e,n,a,i){this.service=t,this.location=e,this.router=n,this.route=a,this.resource_service=i,this.dag_panel_open=!1,this.task_panel_open=!1}return t.prototype.ngOnInit=function(){var t=this;this.id=this.route.snapshot.paramMap.get("id"),this.resource_service.load("plotly").then(function(){t.service.get_obj(t.id).subscribe(function(e){t.report=e})})},t=a.b([Object(i.n)({selector:"app-report-detail",template:n("1nhq"),styles:[n("g+v/")]}),a.d("design:paramtypes",[d.a,p.f,o.b,o.a,c.a])],t)}(),m=[{path:"",component:s,children:[{path:"",component:r.a},{path:"report-detail/:id",component:l}]}],u=function(){function t(){}return t=a.b([Object(i.L)({imports:[o.c.forChild(m)],exports:[o.c]})],t)}(),h=n("d2mR"),g=n("2G9v"),f=n("Afm0"),y=function(){function t(){this.data_updated=new i.x}return t=a.b([Object(i.D)({providedIn:"root"})],t)}(),b=function(){function t(t){this.layout_service=t,this.id="series_"+Math.random().toString()}return t.prototype.ngOnInit=function(){this.display(),this.subscribe_data_changed()},t.prototype.display=function(){var t=this;setTimeout(function(){if(document.getElementById(t.id)){for(var e={title:t.data.name,height:300,width:600,margin:{b:40,t:40}},n=0,a=t.data.series;n<a.length;n++){for(var i=a[n],o=[],s=0,r=i.time;s<r.length;s++){var d=r[s],p=new Date(Date.parse(d));o.push(f.a.format_date_time(p))}i.text=o}if(t.data.series.map(function(t){return t.plotted}).reduce(function(t,e){return t+e},0)>0){for(var c=Array.from(Array(t.data.series.length).keys()),l={y:[],text:[]},m=0,u=t.data.series;m<u.length;m++){var h=u[m];l.y.push(h.y.slice(h.plotted));o=h.text.slice(h.plotted);l.text.push(o),h.plotted+=o.length}window.Plotly.extendTraces(t.id,l,c)}else{window.Plotly.newPlot(t.id,t.data.series,e);for(var g=0,y=t.data.series;g<y.length;g++){(h=y[g]).plotted=h.x.length}}}},100)},t.prototype.subscribe_data_changed=function(){var t=this;this.layout_service.data_updated.subscribe(function(e){if(e.key==t.item.source){for(var n=!1,a=0;a<t.data.series.length;a++)for(var i=t.data.series[a],o=0,s=e.data;o<s.length;o++){var r=s[o];if(r.task_id==i.task_id&&r.group==i.group&&r.source==i.source&&r.x.length>t.data.series[a].x.length){t.data.series[a].x=r.x,t.data.series[a].y=r.y,t.data.series[a].time=r.time,n=!0;break}}n&&t.display()}})},t.create_single_task=function(t){for(var e=t[0],n={name:e.source+" - "+e.task_name,series:[]},a=0,i=t;a<i.length;a++){var o=i[a];(o=f.a.clone(o)).plotted=0,o.name=o.group,n.series.push(o)}return[n]},t.create_multi_key=function(t,e){for(var n={},a=0,i=t;a<i.length;a++){var o=i[a];(o=f.a.clone(o))[e]in n||(n[o[e]]={name:o.source+" - "+("group"==e?o[e]:o.task_name),series:[]}),o.name="task_id"==e?o.group:o.task_name,o.plotted=0,n[o[e]].series.push(o)}var s=[];for(var r in n)s.push(n[r]);return s},t.create=function(t,e){if(!e||0==e.length)return[];var n=f.a.unique(e,"task_id");if(0==n.length)return[];e=e.filter(function(e){return!t.group||-1!=t.part.indexOf(e.group)});for(var a=[],i=0,o=1==n.length?this.create_single_task(e):t.multi?this.create_multi_key(e,"task_id"):this.create_multi_key(e,"group");i<o.length;i++){var s=o[i],r=f.a.clone(t);a.push([r,s])}return a},a.b([Object(i.G)(),a.d("design:type",g.l)],t.prototype,"item",void 0),a.b([Object(i.G)(),a.d("design:type",g.n)],t.prototype,"data",void 0),t=a.b([Object(i.n)({selector:"app-series",template:n("OZ10"),styles:[n("7C2W")]}),a.d("design:paramtypes",[y])],t)}(),_=function(){function t(t){this.layout_service=t}return t.prototype.ngOnInit=function(){this.subscribe_data_changed()},t.prototype.subscribe_data_changed=function(){var t=this;this.layout_service.data_updated.subscribe(function(e){e.key==t.item.source&&(t.data=e.data[t.item.index])})},a.b([Object(i.G)(),a.d("design:type",g.l)],t.prototype,"item",void 0),a.b([Object(i.G)(),a.d("design:type",Object)],t.prototype,"data",void 0),t=a.b([Object(i.n)({selector:"app-img",template:n("1T+H"),styles:[n("4r8v")]}),a.d("design:paramtypes",[y])],t)}(),v=n("ZCBN"),x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collection_part="img_classify",e}return a.c(e,t),e=a.b([Object(i.D)({providedIn:"root"})],e)}(n("Bqtk").a),I=function(t){function e(e,n,a,o){var s=t.call(this,e,n,!1)||this;return s.service=e,s.location=n,s.layout_service=a,s.resource_service=o,s.displayed_columns=["img"],s.loaded=new i.x,s.metric_diff_min=0,s.metric_diff_max=1,s}return a.c(e,t),e.prototype.subscribe_data_changed=function(){var t=this;this.layout_service.data_updated.subscribe(function(e){if(e.key==t.item.source)for(var n=e.data[t.item.index],a=t.data.epochs.length;a<n.epochs.length;a++)t.data.epochs.push(n.epochs[a])})},e.prototype._ngOnInit=function(){var t=this;this.subscribe_data_changed(),this.data_updated.subscribe(function(e){t.resource_service.load("plotly").then(function(){t.plot_confusion(e.confusion,e.part,e.class_names)})})},e.prototype.plot_confusion=function(t,e,n){if(t&&t.data){var a=this,i=n.slice(),o=n.slice();o.reverse(),t.data.reverse();for(var s=[{x:i,y:o,z:t.data,type:"heatmap",colorscale:[[0,"#3D9970"],[1,"#001f3f"]],showscale:!1}],r={title:"Heatmap",annotations:[],width:300,height:300,modebar:!1,xaxis:{ticks:"",side:"top"},yaxis:{ticks:"",ticksuffix:" ",width:700,height:700,autosize:!1}},d=0;d<o.length;d++)for(var p=0;p<i.length;p++){if(0!=t.data[d][p])var c="white";else c="black";var l={xref:"x1",yref:"y1",x:i[p],y:o[d],text:t.data[d][p],font:{family:"Arial",size:12,color:c},showarrow:!1};r.annotations.push(l)}var m="img_classify_"+e;window.Plotly.newPlot(m,s,r,{displayModeBar:!1}),document.getElementById(m).on("plotly_click",function(t){var e=t.points[0],i=n.indexOf(e.y),o=n.indexOf(e.x);i==a.y&&o==a.y_pred?(a.y=null,a.y_pred=null):(a.y=i,a.y_pred=o),a.change.emit()})}},e.prototype.get_filter=function(){if(!this.data||null==this.data.epoch)return null;var e={};return e.paginator=t.prototype.get_filter.call(this),e.task=this.data.task,e.part=this.data.part,e.epoch=this.data.epoch,e.group=this.data.group,e.y=this.y,e.y_pred=this.y_pred,e.metric_diff_min=this.metric_diff_min,e.metric_diff_max=this.metric_diff_max,e},e.prototype.epoch_changed=function(t){this.data.epoch=t.value,this.change.emit()},a.b([Object(i.G)(),a.d("design:type",g.l)],e.prototype,"item",void 0),a.b([Object(i.G)(),a.d("design:type",g.g)],e.prototype,"data",void 0),a.b([Object(i.S)(),a.d("design:type",Object)],e.prototype,"loaded",void 0),e=a.b([Object(i.n)({selector:"app-img-classify",template:n("hpSd"),styles:[n("x3/q")]}),a.d("design:paramtypes",[x,p.f,y,c.a])],e)}(v.a),j=function(){function t(t,e){this.service=t,this.layout_service=e,this.items_joined=[],this.items_joined_data=[]}return t.prototype.ngOnInit=function(){this.subscribe_report_changed(),this.form_items_joined()},t.prototype.form_items_joined=function(){if(this.items_joined=[],this.item.items)for(var t=0,e=this.item.items;t<e.length;t++){var n=e[t];if("series"==n.type)for(var a=0,i=b.create(n,this.data[n.source]);a<i.length;a++){var o=i[a];this.items_joined.push(o[0]),this.items_joined_data.push(o[1])}else if(-1!=["img_classify","img"].indexOf(n.type)){if(!(n.source in this.data))continue;for(var s=0,r=0,d=this.data[n.source];r<d.length;r++){var p=d[r],c=f.a.clone(n);c.index=s,this.items_joined.push(c),this.items_joined_data.push(p),s++}}else this.items_joined.push(n),this.items_joined_data.push(this.data)}},t.prototype.td_width=function(t){for(var e=0,n=0,a=this.items_joined;n<a.length;n++){var i=a[n];e+=i.cols?i.cols:1}return(100*(t.cols?t.cols:1)/e).toString()+"%"},t.prototype.subscribe_report_changed=function(){var t=this;null!=this.report_id&&(this.interval=setInterval(function(){return t.update()},5e3),this.service.data_updated.subscribe(function(e){t.update(!0)}))},t.prototype.update=function(t){var e=this;void 0===t&&(t=!1),this.service.get_obj(this.report_id).subscribe(function(n){if(e.item&&!t){if(JSON.stringify(e.item)!=JSON.stringify(n.layout))e.data=n.data,e.item=n.layout,e.form_items_joined();else for(var a in n.data)if(JSON.stringify(e.data[a])!=JSON.stringify(n.data[a])){if(n.data[a].length!=e.data[a].length){e.data=n.data,e.item=n.layout,e.form_items_joined();break}e.layout_service.data_updated.emit({key:a,data:n.data[a]}),e.data[a]=n.data[a]}}else e.data=n.data,e.item=n.layout,e.form_items_joined()})},t.prototype.ngOnDestroy=function(){this.interval&&clearInterval(this.interval)},a.b([Object(i.G)(),a.d("design:type",g.l)],t.prototype,"item",void 0),a.b([Object(i.G)(),a.d("design:type",Object)],t.prototype,"data",void 0),a.b([Object(i.G)(),a.d("design:type",Number)],t.prototype,"report_id",void 0),a.b([Object(i.G)(),a.d("design:type",String)],t.prototype,"id",void 0),t=a.b([Object(i.n)({selector:"app-layout",template:n("dM2D"),styles:[n("nplR")]}),a.d("design:paramtypes",[d.a,y])],t)}();n.d(e,"ReportModule",function(){return w});var w=function(){function t(){}return t=a.b([Object(i.L)({imports:[u,h.a],declarations:[b,_,I,s,j,l]})],t)}()},OZ10:function(t,e){t.exports='<div [attr.id]="id"></div>'},R3N3:function(t,e){t.exports="\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlcG9ydC9yZXBvcnQvcmVwb3J0LmNvbXBvbmVudC5jc3MifQ== */"},dM2D:function(t,e){t.exports='<div *ngIf="item.type==\'root\'" style="margin-top: 10px">\n    <app-layout [data]="data" [item]="child" *ngFor="let child of items_joined"></app-layout>\n</div>\n\n<mat-expansion-panel [expanded]="item.expanded!=null?item.expanded:true" *ngIf="item.type==\'panel\'">\n    <mat-expansion-panel-header>\n        <mat-panel-title>\n            {{item.title}}\n        </mat-panel-title>\n    </mat-expansion-panel-header>\n\n    <div *ngIf="items_joined.length>0">\n        <div *ngIf="item.parent_cols">\n            <mat-grid-list cols="{{item.parent_cols}}" rowHeight="{{item.row_height}}px" *ngIf="!item.table">\n\n                <div *ngFor="let child of items_joined; index as i">\n                    <mat-grid-tile [colspan]="child.cols!=null?child.cols:1" [rowspan]="child.rows!=null?child.rows:1">\n                        <app-layout [item]="child" [data]="items_joined_data[i]"></app-layout>\n                    </mat-grid-tile>\n                </div>\n\n            </mat-grid-list>\n\n        </div>\n\n        <table *ngIf="item.table" style="width: 100%;height: 100%">\n            <td *ngFor="let child of items_joined; index as i" [style.width]="td_width(child)">\n                <app-layout [item]="child" [data]="items_joined_data[i]"></app-layout>\n            </td>\n        </table>\n\n        <div *ngIf="item.row_height==null&&!item.table">\n            <app-layout [item]="child" [data]="items_joined_data[i]" *ngFor="let child of items_joined; index as i"></app-layout>\n        </div>\n    </div>\n\n</mat-expansion-panel>\n\n<div *ngIf="item.type==\'series\'">\n    <app-series [item]="item" [data]="data"></app-series>\n</div>\n\n<div *ngIf="item.type==\'img\'">\n   <app-img [item]="item" [data]="data"></app-img>\n</div>\n\n<div *ngIf="item.type==\'img_classify\'">\n    <app-img-classify [item]="item" [data]="data"></app-img-classify>\n</div>\n\n\n'},"g+v/":function(t,e){t.exports="\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JlcG9ydC9yZXBvcnQtZGV0YWlsL3JlcG9ydC1kZXRhaWwuY29tcG9uZW50LmNzcyJ9 */"},hpSd:function(t,e){t.exports='<div class="mat-elevation-z8">\n    <table mat-table [dataSource]="dataSource">\n\n        <ng-container matColumnDef="img">\n            <th mat-header-cell *matHeaderCellDef>\n                <div>{{data.part}}</div>\n                <mat-button-toggle-group [attr.fxLayout]="\'row wrap\'" (change)="epoch_changed($event)" appearance="legacy">\n                    <mat-button-toggle [value]="epoch" *ngFor="let epoch of data.epochs">\n                        <mat-icon>{{epoch}}</mat-icon>\n                    </mat-button-toggle>\n\n                </mat-button-toggle-group>\n\n                <div [id]="\'img_classify_\'+data.part"></div>\n\n                <mat-card class="result">\n                    <mat-card-content>\n                        <section class="section" *ngIf="data.epoch!=null">\n                            <div>\n                                <div>min diff</div>\n                                <mat-slider\n                                        [max]="1"\n                                        [min]="0"\n                                        [step]="0.01"\n                                        [thumbLabel]="true"\n                                        (change) = "change.emit()"\n                                        [(ngModel)]="metric_diff_min">\n\n                                </mat-slider>\n                            </div>\n\n                            <div>\n                                <div style="text-align: right">max diff</div>\n                                <mat-slider\n                                        [max]="1"\n                                        [min]="0"\n                                        [step]="0.01"\n                                        [thumbLabel]="true"\n                                        (change) = "change.emit()"\n                                        [(ngModel)]="metric_diff_max">\n\n                                </mat-slider>\n                            </div>\n                        </section>\n\n                    </mat-card-content>\n                </mat-card>\n            </th>\n            <td mat-cell *matCellDef="let element">\n                <div>True:{{element.y}} &nbsp; Pred:{{element.y_pred}} &nbsp; Diff: {{element.metric_diff}}</div>\n                <img [attr.src]="\'data:image/JPEG;base64,\' + element.content">\n            </td>\n        </ng-container>\n\n        <tr mat-header-row *matHeaderRowDef="displayed_columns"></tr>\n        <tr mat-row *matRowDef="let row; columns: displayed_columns;"></tr>\n    </table>\n\n    <mat-paginator [pageSizeOptions]="[15, 30, 100]" [length]="total" [pageSize]="15"></mat-paginator>\n</div>'},nplR:function(t,e){t.exports="app-layout{\n    width: 100%;\n    height: 100%;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVwb3J0L2ludGVybmFsL2xheW91dC9sYXlvdXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFdBQVc7SUFDWCxZQUFZO0FBQ2hCIiwiZmlsZSI6InNyYy9hcHAvcmVwb3J0L2ludGVybmFsL2xheW91dC9sYXlvdXQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbImFwcC1sYXlvdXR7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xufSJdfQ== */"},"x3/q":function(t,e){t.exports="mat-button-toggle-group {\n    flex-wrap: wrap;\n}\n\nimg {\n    height: auto;\n    width: auto;\n}\n\n.section {\n    display: flex;\n    align-content: center;\n    align-items: center;\n    height: 12px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVwb3J0L2ludGVybmFsL2ltZy1jbGFzc2lmeS9pbWctY2xhc3NpZnkuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxZQUFZO0lBQ1osV0FBVztBQUNmOztBQUVBO0lBQ0ksYUFBYTtJQUNiLHFCQUFxQjtJQUNyQixtQkFBbUI7SUFDbkIsWUFBWTtBQUNoQiIsImZpbGUiOiJzcmMvYXBwL3JlcG9ydC9pbnRlcm5hbC9pbWctY2xhc3NpZnkvaW1nLWNsYXNzaWZ5LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJtYXQtYnV0dG9uLXRvZ2dsZS1ncm91cCB7XG4gICAgZmxleC13cmFwOiB3cmFwO1xufVxuXG5pbWcge1xuICAgIGhlaWdodDogYXV0bztcbiAgICB3aWR0aDogYXV0bztcbn1cblxuLnNlY3Rpb24ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgaGVpZ2h0OiAxMnB4O1xufSJdfQ== */"}}]);
//# sourceMappingURL=report-report-module.js.map