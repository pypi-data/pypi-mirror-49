(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{2295:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return z});var n=a(12),r=a.n(n),o=a(4),c=a.n(o),i=a(6),s=a.n(i),l=a(7),u=a.n(l),d=a(5),p=a.n(d),h=a(8),m=a.n(h),v=a(1),g=a.n(v),f=a(10),k=a(0),j=a.n(k),y=a(17),E=a.n(y),w=a(2),b=a(37),I=a(153),T=a(24),A=a(106),R=a(479),S=a(30),q=a(25),L=a(99),O=a(241),H=a(445),x=E()({displayName:"ServiceHookRow",propTypes:{orgId:g.a.string.isRequired,projectId:g.a.string.isRequired,hook:g.a.object.isRequired,onToggleActive:g.a.func.isRequired},mixins:[b.default],getInitialState:function(){return{loading:!1,error:!1}},render:function(){var e=this.props,t=e.orgId,a=e.projectId,n=e.hook;return j.a.createElement(R.default,{label:j.a.createElement(f.Link,{to:"/settings/".concat(t,"/projects/").concat(a,"/hooks/").concat(n.id,"/")},j.a.createElement(H.a,{value:n.url})),help:n.events&&0!==n.events.length?j.a.createElement("small",null,n.events.join(", ")):j.a.createElement("small",null,j.a.createElement("em",null,"no events configured"))},j.a.createElement(O.default,{isActive:"active"===n.status,size:"lg",toggle:this.props.onToggleActive}))}}),z=function(e){function t(){var e,a;c()(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=u()(this,(e=p()(t)).call.apply(e,[this].concat(o)))).onToggleActive=function(e){var t=a.props.params,n=t.orgId,o=t.projectId,c=S.default.add(Object(w.t)("Saving changes.."));a.api.request("/projects/".concat(n,"/").concat(o,"/hooks/").concat(e.id,"/"),{method:"PUT",data:{isActive:"active"!==e.status},success:function(e){S.default.remove(c);var t=a.state.hookList.map(function(t){return t.id===e.id?r()({},t,e):t});a.setState({hookList:t})},error:function(){S.default.remove(c),S.default.add(Object(w.t)("Unable to remove application. Please try again."),"error",{duration:3e3})}})},a}return m()(t,e),s()(t,[{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,a=e.projectId;return[["hookList","/projects/".concat(t,"/").concat(a,"/hooks/")]]}},{key:"renderEmpty",value:function(){return j.a.createElement(A.default,null,Object(w.t)("There are no service hooks associated with this project."))}},{key:"renderResults",value:function(){var e=this,t=this.props.params,a=t.orgId,n=t.projectId;return j.a.createElement(j.a.Fragment,null,j.a.createElement(q.e,{key:"header"},Object(w.t)("Service Hook")),j.a.createElement(q.c,{key:"body"},j.a.createElement(q.b,{type:"info",icon:"icon-circle-exclamation"},"Service Hooks are an early adopter preview feature and will change in the future."),this.state.hookList.map(function(t){return j.a.createElement(x,{key:t.id,orgId:a,projectId:n,hook:t,onToggleActive:e.onToggleActive.bind(e,t)})})))}},{key:"renderBody",value:function(){var e;e=this.state.hookList.length>0?this.renderResults():this.renderEmpty();var t=this.props.params,a=t.orgId,n=t.projectId,r=new Set(this.context.organization.access);return j.a.createElement("div",{className:"ref-project-service-hooks"},j.a.createElement(L.default,{title:Object(w.t)("Service Hooks"),action:r.has("project:write")?j.a.createElement(T.default,{"data-test-id":"new-service-hook",to:"/settings/".concat(a,"/projects/").concat(n,"/hooks/new/"),size:"small",priority:"primary"},j.a.createElement("span",{className:"icon-plus"}),"Â ",Object(w.t)("Create New Hook")):null}),j.a.createElement(q.a,null,e))}}]),t}(I.default);z.contextTypes={organization:g.a.object.isRequired}}}]);
//# sourceMappingURL=ProjectServiceHooks.js.map