{% extends 'directory_components/header_footer/domestic_header.html' %}

{% block login_state %}
  <div class="account-links">
    <li class="anonymous" id="login-state-sign-in">
      <a id="header-sign-in-link" href="{{ sso_login_url }}" class="account-link signin">Sign in</a>
    </li>
    <li class="authenticated" id="login-state-profile" style="display: none;">
      <a id="header-profile-link" href="{{ sso_profile_url }}" class="account-link profile">Account</a>
    </li>
    <li class="authenticated" id="login-state-sign-out" style="display: none;">
      <a id="header-sign-out-link" href="{{ sso_logout_url }}" class="account-link signout">Sign out</a>
    </li>
  </div>

  <script type="text/javascript">
    const isAnonymous = document.cookie.indexOf('sso_display_logged_in=true') === -1;
    const accountLinksContainer = document.getElementsByClassName('account-links')[0];
    const profile = document.getElementById('login-state-profile');
    const signOut = document.getElementById('login-state-sign-out');
    const signIn = document.getElementById('login-state-sign-in');
    if (isAnonymous) {
      accountLinksContainer.removeChild(profile);
      accountLinksContainer.removeChild(signOut);
    } else {
      profile.style.display = 'inline-block';
      signOut.style.display = 'inline-block';
      accountLinksContainer.removeChild(signIn);
    }
  </script>
{% endblock %}
