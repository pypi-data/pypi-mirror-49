{"version":3,"sources":["webpack:///./app/components/modals/redirectToProject.jsx"],"names":["RedirectToProjectModal","props","_this","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","call","state","timer","_this2","setInterval","window","location","assign","getNewPath","setState","_this$props","params","slug","recreateRoute","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default","projectId","_this$props2","Header","Body","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","Fragment","t","app_components_text__WEBPACK_IMPORTED_MODULE_13__","tct","project","concat","ButtonWrapper","app_components_button__WEBPACK_IMPORTED_MODULE_12__","priority","href","React","Component","propTypes","PropTypes","string","isRequired","oneOfType","func","node","withRouter","styled","Flex","target"],"mappings":"sVAWMA,cAWJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,IAAAC,KAAAJ,IACjBE,EAAAG,IAAAD,KAAAE,IAAAN,GAAAO,KAAAH,KAAMH,KAEDO,MAAQ,CACXC,MAAO,GAJQP,mEAQC,IAAAQ,EAAAN,KAClBO,YAAY,WACND,EAAKF,MAAMC,OAAS,EACtBG,OAAOC,SAASC,OAAOJ,EAAKK,cAI9BL,EAAKM,SAAS,SAAAR,GAAK,MAAK,CACtBC,MAAOD,EAAMC,MAAQ,MAEtB,0CAGQ,IAAAQ,EACYb,KAAKH,MAArBiB,EADID,EACJC,OAAQC,EADJF,EACIE,KAEf,OAAOC,YAAc,GAADC,IAAA,GACfjB,KAAKH,MADU,CAElBiB,OAAQG,IAAA,GACHH,EADC,CAEJI,UAAWH,wCAKR,IAAAI,EACsBnB,KAAKH,MAA3BkB,EADAI,EACAJ,KAAMK,EADND,EACMC,OAAQC,EADdF,EACcE,KACrB,OACEC,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACEH,EAAAC,EAAAC,cAACJ,EAAD,KAASM,YAAE,kCAEXJ,EAAAC,EAAAC,cAACH,EAAD,KACEC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACG,EAAA,QAAD,KACEL,EAAAC,EAAAC,cAAA,SAAIE,YAAE,uCAENJ,EAAAC,EAAAC,cAAA,SACGI,cACC,4EACA,CACEC,QAASP,EAAAC,EAAAC,cAAA,cAAST,GAClBV,MAAK,GAAAyB,OAAK9B,KAAKI,MAAMC,UAI3BiB,EAAAC,EAAAC,cAACO,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,QAAD,CAAQC,SAAS,UAAUC,KAAMlC,KAAKW,cACnCe,YAAE,iBAAkBX,gBAlEFoB,IAAMC,WAArCxC,EACGyC,UAAY,CAIjBtB,KAAMuB,IAAUC,OAAOC,WAEvBpB,OAAQkB,IAAUG,UAAU,CAACH,IAAUI,KAAMJ,IAAUK,OAAOH,WAC9DnB,KAAMiB,IAAUG,UAAU,CAACH,IAAUI,KAAMJ,IAAUK,OAAOH,YAqEjDI,+BAAWhD,GAG1B,IAAMmC,EAAgBc,kBAAOC,OAAV,CAAAC,OAAA,YAAGF,CAAH","file":"RedirectToProjectModal.js","sourcesContent":["import {Flex} from 'grid-emotion';\nimport {withRouter} from 'react-router';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from 'react-emotion';\n\nimport {t, tct} from 'app/locale';\nimport Button from 'app/components/button';\nimport Text from 'app/components/text';\nimport recreateRoute from 'app/utils/recreateRoute';\n\nclass RedirectToProjectModal extends React.Component {\n  static propTypes = {\n    /**\n     * New slug to redirect to\n     */\n    slug: PropTypes.string.isRequired,\n\n    Header: PropTypes.oneOfType([PropTypes.func, PropTypes.node]).isRequired,\n    Body: PropTypes.oneOfType([PropTypes.func, PropTypes.node]).isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      timer: 5,\n    };\n  }\n\n  componentDidMount() {\n    setInterval(() => {\n      if (this.state.timer <= 1) {\n        window.location.assign(this.getNewPath());\n        return;\n      }\n\n      this.setState(state => ({\n        timer: state.timer - 1,\n      }));\n    }, 1000);\n  }\n\n  getNewPath() {\n    const {params, slug} = this.props;\n\n    return recreateRoute('', {\n      ...this.props,\n      params: {\n        ...params,\n        projectId: slug,\n      },\n    });\n  }\n\n  render() {\n    const {slug, Header, Body} = this.props;\n    return (\n      <React.Fragment>\n        <Header>{t('Redirecting to New Project...')}</Header>\n\n        <Body>\n          <div>\n            <Text>\n              <p>{t('The project slug has been changed.')}</p>\n\n              <p>\n                {tct(\n                  'You will be redirected to the new project [project] in [timer] seconds...',\n                  {\n                    project: <strong>{slug}</strong>,\n                    timer: `${this.state.timer}`,\n                  }\n                )}\n              </p>\n              <ButtonWrapper>\n                <Button priority=\"primary\" href={this.getNewPath()}>\n                  {t('Continue to %s', slug)}\n                </Button>\n              </ButtonWrapper>\n            </Text>\n          </div>\n        </Body>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withRouter(RedirectToProjectModal);\nexport {RedirectToProjectModal};\n\nconst ButtonWrapper = styled(Flex)`\n  justify-content: flex-end;\n`;\n"],"sourceRoot":""}