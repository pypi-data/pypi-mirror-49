(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1534:function(e,t,n){"use strict";n.r(t);var a=n(13),r=n.n(a),i=n(11),o=n.n(i),l=n(4),c=n.n(l),s=n(6),d=n.n(s),u=n(7),f=n.n(u),m=n(5),p=n.n(m),g=n(8),h=n.n(g),b=n(16),v=n(1),E=n.n(v),y=n(0),w=n.n(y),I=n(3),x=n(36),j=n(2),O=n(95),A=n(1674),k=n(81),R=n(24),T=n(54),z=n(78),F=n(23),L=n(199),M=n(9),_=n(205),q=n(29),C=n(600),H=n(15),W=[],S={IntegrationFeatures:function(e){return e.children({disabled:!1,disabledReason:null,ungatedFeatures:e.features,gatedFeatureGroups:[]})},FeatureList:function(e){return w.a.createElement("ul",null,e.features.map(function(e,t){return w.a.createElement("li",{key:t},e.description)}))}},B=function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=f()(this,(e=p()(t)).call.apply(e,[this].concat(r)))).onAddIntegration=function(e){n.props.closeModal(),n.props.onAddIntegration(e)},n}return h()(t,e),d()(t,[{key:"componentDidMount",value:function(){Object(x.b)("integrations.install_modal_opened",{org_id:parseInt(this.props.organization.id,10),integration:this.props.provider.key})}},{key:"featureTags",value:function(e){return e.map(function(e){return w.a.createElement(V,{key:e},e.replace(/-/g," "))})}},{key:"earlyAdopterLabel",value:function(e){return W.includes(e.key)?w.a.createElement(V,{priority:"warning"},"Early Adopter"):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.provider,a=t.organization,r=t.closeModal,i=n.metadata,l=Object(C.a)(i.description),c=i.aspects.alerts||[];!n.canAdd&&i.aspects.externalInstall&&c.push({type:"warning",icon:"icon-exit",text:i.aspects.externalInstall.noticeText});var s={style:{marginLeft:Object(H.default)(1)},size:"small",priority:"primary"},d=function(t){return n.canAdd&&w.a.createElement(A.a,o()({provider:n,onAddIntegration:e.onAddIntegration},s,t))||!n.canAdd&&i.aspects.externalInstall&&w.a.createElement(R.default,o()({icon:"icon-exit",href:i.aspects.externalInstall.url,onClick:r,external:!0},s,t),i.aspects.externalInstall.buttonText)},u=i.features.map(function(e){return{featureGate:e.featureGate,description:w.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(C.b)(e.description)}})}}),f=z.default.get("integrations:feature-gates");f.push(function(){return S});var m=f[0](),p=m.FeatureList,g=m.IntegrationFeatures,h={organization:a,features:u};return w.a.createElement(w.a.Fragment,null,w.a.createElement(b.Flex,{align:"center",mb:2},w.a.createElement(L.a,{pluginId:n.key,size:50}),w.a.createElement(b.Flex,{pl:1,align:"flex-start",direction:"column",justify:"center"},w.a.createElement(G,null,Object(j.t)("%s Integration",n.name)),w.a.createElement(b.Flex,null,this.earlyAdopterLabel(n),n.features.length&&this.featureTags(n.features)))),w.a.createElement(J,{dangerouslySetInnerHTML:{__html:l}}),w.a.createElement(p,o()({},h,{provider:n})),w.a.createElement(N,null,w.a.createElement(U,{flex:1},Object(j.t)("By %s",n.metadata.author)),w.a.createElement(b.Box,null,w.a.createElement(T.a,{href:i.source_url},Object(j.t)("View Source")),w.a.createElement(T.a,{href:i.issue_url},Object(j.t)("Report Issue")))),c.map(function(e,t){return w.a.createElement(k.default,{key:t,type:e.type,icon:e.icon},w.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(C.b)(e.text)}}))}),w.a.createElement(g,h,function(e){var t=e.disabled,n=e.disabledReason;return w.a.createElement("div",{className:"modal-footer"},t&&w.a.createElement(D,{reason:n}),w.a.createElement(R.default,{size:"small",onClick:r},Object(j.t)("Cancel")),w.a.createElement(O.a,{organization:a,access:["org:integrations"]},function(e){var n=e.hasAccess;return w.a.createElement(q.default,{title:Object(j.t)("You must be an Owner, Manager or Admin to install this."),disabled:n},w.a.createElement(d,{disabled:t||!n}))}))}))}}]),t}(w.a.Component);B.propTypes={closeModal:E.a.func.isRequired,onAddIntegration:E.a.func.isRequired,provider:E.a.object.isRequired,organization:M.default.Organization.isRequired};var D=Object(I.default)(function(e){var t=e.reason,n=r()(e,["reason"]);return w.a.createElement(b.Flex,o()({align:"center",flex:1},n),w.a.createElement(F.default,{src:"icon-circle-exclamation",size:"1.5em"}),w.a.createElement(b.Box,{ml:1},t))},{target:"e1rf4mlr0"})("color:",function(e){return e.theme.red},";font-size:0.9em;"),G=Object(I.default)(function(e){return w.a.createElement(b.Box,e)},{target:"e1rf4mlr1"})("font-weight:bold;font-size:1.4em;margin-bottom:",Object(H.default)(1),";"),J=Object(I.default)("div",{target:"e1rf4mlr2"})("font-size:1.5rem;line-height:2.1rem;margin-bottom:",Object(H.default)(2),";li{margin-bottom:6px;}"),N=Object(I.default)(b.Flex,{target:"e1rf4mlr3"})("font-size:0.9em;margin-bottom:",Object(H.default)(2),";a{margin-left:",Object(H.default)(1),";}"),U=Object(I.default)(b.Box,{target:"e1rf4mlr4"})("color:",function(e){return e.theme.gray2},";"),V=Object(I.default)(_.default,{target:"e1rf4mlr5"})("&:not(:first-child){margin-left:",Object(H.default)(.5),";}");t.default=B},1607:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var a=n(12),r=n.n(a),i=n(4),o=n.n(i),l=n(6),c=n.n(l),s=n(7),d=n.n(s),u=n(5),f=n.n(u),m=n(8),p=n.n(m),g=n(1),h=n.n(g),b=n(0),v=n.n(b),E=n(84),y=n.n(E),w=n(2),I=n(30),x=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=d()(this,(e=f()(t)).call.apply(e,[this].concat(i)))).openDialog=function(e){var t=n.props.provider.setupDialog,a=t.url,i=t.width,o=t.height,l=n.computeCenteredWindow(i,o),c=l.left,s=l.top,d=r()({},e);n.props.reinstallId&&(d.reinstall_id=n.props.reinstallId);var u="".concat(a,"?").concat(y.a.stringify(d)),f="scrollbars=yes,width=".concat(i,",height=").concat(o,",top=").concat(s,",left=").concat(c);n.dialog=window.open(u,"sentryAddIntegration",f),n.dialog.focus()},n.didReceiveMessage=function(e){if(e.origin===document.location.origin&&e.source===n.dialog){var t=e.data,a=t.success,r=t.data;n.dialog=null,a?r&&(n.props.onInstall(r),I.default.addSuccess(Object(w.t)("".concat(n.props.provider.name," added")))):I.default.addError(r.error)}},n}return p()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.dialog=null,window.addEventListener("message",this.didReceiveMessage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.didReceiveMessage),this.dialog&&this.dialog.close()}},{key:"computeCenteredWindow",value:function(e,t){var n=null!=window.screenLeft?window.screenLeft:screen.left,a=null!=window.screenTop?window.screenTop:screen.top;return{left:(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-e/2+n,top:(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-t/2+a}}},{key:"render",value:function(){return this.props.children(this.openDialog)}}]),t}(v.a.Component);x.propTypes={children:h.a.func.isRequired,provider:h.a.object.isRequired,onInstall:h.a.func.isRequired,reinstallId:h.a.string}},1674:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var a=n(11),r=n.n(a),i=n(13),o=n.n(i),l=n(4),c=n.n(l),s=n(6),d=n.n(s),u=n(7),f=n.n(u),m=n(5),p=n.n(m),g=n(8),h=n.n(g),b=n(1),v=n.n(b),E=n(0),y=n.n(E),w=n(2),I=n(1607),x=n(24),j=n(29),O=function(e){function t(){return c()(this,t),f()(this,p()(t).apply(this,arguments))}return h()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.provider,n=e.buttonText,a=e.onAddIntegration,i=e.reinstall,l=o()(e,["provider","buttonText","onAddIntegration","reinstall"]),c=n||Object(w.t)(i?"Enable":"Add %s",t.metadata.noun);return y.a.createElement(j.default,{disabled:t.canAdd,title:"Integration cannot be added on Sentry. Enable this integration via the ".concat(t.name," instance.")},y.a.createElement(I.a,{provider:t,onInstall:a},function(e){return y.a.createElement(x.default,r()({disabled:!t.canAdd},l,{onClick:function(){return e()}}),c)}))}}]),t}(y.a.Component);O.propTypes={provider:v.a.object.isRequired,onAddIntegration:v.a.func.isRequired,buttonText:v.a.string,reinstall:v.a.bool}}}]);
//# sourceMappingURL=IntegrationDetailsModal.js.map