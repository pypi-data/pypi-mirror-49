(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{2286:function(e,n,t){"use strict";t.r(n);var a=t(4),o=t.n(a),r=t(7),l=t.n(r),i=t(5),c=t.n(i),u=t(6),s=t.n(u),d=t(8),m=t.n(d),g=t(1),h=t.n(g),f=t(0),b=t.n(f),E=t(3),p=t(25),v=t(39),w=t(71),y=t(2),O=t(81),j=t(153),z=t(24),T=t(110),k=t(99),C=t(113),R=function(){return window.location.href="/"},A=Object(E.default)("div",{target:"e1prmbzz0"})("font-weight:bold;font-size:1.2em;"),S=function(e){var n=e.Header,t=e.Body,a=e.Footer;return b.a.createElement("div",null,b.a.createElement(n,null,Object(y.t)("Closing Account")),b.a.createElement(t,null,b.a.createElement(C.default,null,Object(y.t)("Your account has been deactivated and scheduled for removal.")),b.a.createElement(C.default,null,Object(y.t)("Thanks for using Sentry! We hope to see you again soon!"))),b.a.createElement(a,null,b.a.createElement(z.default,{href:"/"},Object(y.t)("Goodbye"))))};S.propTypes={Header:h.a.node,Body:h.a.node,Footer:h.a.node};var x=function(e){function n(){var e,t;o()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=l()(this,(e=c()(n)).call.apply(e,[this].concat(r)))).getSingleOwners=function(){return t.state.organizations.filter(function(e){return e.singleOwner}).map(function(e){return e.organization.slug})},t.handleChange=function(e,n,a){var o=e.slug,r=a.target.checked;n||t.setState(function(e){var n=e.orgsToRemove||new Set(t.getSingleOwners());return r?n.add(o):n.delete(o),{orgsToRemove:n}})},t.handleRemoveAccount=function(){var e=t.state.orgsToRemove,n=null===e?t.getSingleOwners():Array.from(e);Object(v.addMessage)("Closing account..."),t.api.requestPromise("/users/me/",{method:"DELETE",data:{organizations:n}}).then(function(){Object(w.h)(S,{onClose:R}),setTimeout(R,1e4)},function(){Object(v.addErrorMessage)("Error closing account")})},t.state.orgsToRemove=null,t}return m()(n,e),s()(n,[{key:"getEndpoints",value:function(){return[["organizations","/organizations/?owner=1"]]}}]),s()(n,[{key:"renderBody",value:function(){var e=this,n=this.state,t=n.organizations,a=n.orgsToRemove;return b.a.createElement("div",null,b.a.createElement(k.default,{title:"Close Account"}),b.a.createElement(C.default,null,Object(y.t)("This will permanently remove all associated data for your user"),"."),b.a.createElement(O.default,{type:"error",icon:"icon-circle-exclamation"},b.a.createElement(A,null,Object(y.t)("Closing your account is permanent and cannot be undone"),"!")),b.a.createElement(p.a,null,b.a.createElement(p.e,null,Object(y.t)("Remove the following organizations")),b.a.createElement(p.c,null,b.a.createElement(p.b,{type:"info"},Object(y.t)("Ownership will remain with other members if an organization is not deleted."),b.a.createElement("br",null),Object(y.t)("Disabled boxes mean that there is no other owner within the organization so no one else can take ownership.")),t.map(function(n){var t=n.organization,o=n.singleOwner;return b.a.createElement(p.f,{key:t.slug},b.a.createElement("label",null,b.a.createElement("input",{style:{marginRight:6},type:"checkbox",value:t.slug,onChange:e.handleChange.bind(e,t,o),name:"organizations",checked:null===a?o:a.has(t.slug),disabled:o}),t.slug))}))),b.a.createElement(T.default,{priority:"danger",message:Object(y.t)("This is permanent and cannot be undone, are you really sure you want to do this?"),onConfirm:this.handleRemoveAccount},b.a.createElement(z.default,{priority:"danger"},Object(y.t)("Close Account"))))}}]),n}(j.default);n.default=x}}]);
//# sourceMappingURL=AccountClose.js.map