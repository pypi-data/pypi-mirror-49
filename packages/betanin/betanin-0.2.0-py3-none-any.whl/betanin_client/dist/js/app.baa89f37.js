(function(t){function e(e){for(var r,o,a=e[0],c=e[1],u=e[2],d=0,v=[];d<a.length;d++)o=a[d],s[o]&&v.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(v.length)v.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},s={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0153":function(t,e,n){"use strict";var r=n("8c19"),s=n.n(r);s.a},"0370":function(t,e,n){"use strict";var r=n("5c69"),s=n.n(r);s.a},1:function(t,e){},"10b7":function(t,e,n){},"1ddf":function(t,e,n){"use strict";var r=n("1ebc"),s=n.n(r);s.a},"1e1a":function(t,e,n){},"1ebc":function(t,e,n){},"2dc5":function(t,e,n){},"2f75":function(t,e,n){"use strict";var r=n("8d6c"),s=n.n(r);s.a},"35e9":function(t,e,n){},"45d9":function(t,e,n){},"4b88":function(t,e,n){"use strict";var r=n("10b7"),s=n.n(r);s.a},"4d57":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},i=[],o=n("2877"),a={},c=Object(o["a"])(a,s,i,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,l=n("8c4f"),d={clearToken:function(){delete localStorage.token},setToken:function(t){localStorage.token=t},getToken:function(){return localStorage.token},isLoggedIn:function(){return void 0!==localStorage.token}},v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{attrs:{id:"app"}},[n("div",{staticClass:"section"},[n("nav-bar")],1),n("div",{staticClass:"section"},[n("router-view")],1)]),n("div",{attrs:{id:"footer"}},[n("div",{staticClass:"section"},[n("connection-banner")],1)])])},f=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.getConnected?"green":"red",attrs:{id:"banner"}},[n("div",{attrs:{id:"version"}},[n("p",[n("span",{directives:[{name:"show",rawName:"v-show",value:t.getSystemInfo.betaninVersion,expression:"getSystemInfo.betaninVersion"}]},[t._v("ver. ")]),n("b",[t._v(t._s(t.getSystemInfo.betaninVersion))])])]),n("div",{attrs:{id:"connection"}},[n("p",{directives:[{name:"show",rawName:"v-show",value:!t.getConnected,expression:"!getConnected"}]},[t._v("disconnected")])]),n("div",{attrs:{id:"status"}},[n("p",[t._v(t._s(t.getHistoryCount)+" imports, "+t._s(t.getActivityCount)+" active")])])])},m=[],h=n("2f62"),g={methods:Object(h["b"])("status",["doFetchSystemInfo"]),computed:Object(h["c"])({getConnected:"status/getConnected",getSystemInfo:"status/getSystemInfo",getActivityCount:"torrents/getActivityCount",getHistoryCount:"torrents/getHistoryCount"}),mounted:function(){this.doFetchSystemInfo()}},b=g,_=(n("6088"),Object(o["a"])(b,p,m,!1,null,"9c25c310",null));_.options.__file="ConnectionBanner.vue";var y=_.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar"},[n("div",{staticClass:"navbar-brand"},[n("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[n("img",{attrs:{id:"logo",src:t.getLogoPath(),height:"100%"}})]),n("a",{staticClass:"navbar-burger",class:{"is-active":t.show},attrs:{role:"button"},on:{click:t.toggleShow}},[n("span"),n("span"),n("span")])],1),n("div",{staticClass:"navbar-menu",class:{"is-active":t.show}},[n("div",{staticClass:"navbar-end"},[n("router-link",{staticClass:"navbar-item",attrs:{to:"/torrents/active"}},[t._v("Activity"),n("span",{directives:[{name:"show",rawName:"v-show",value:t.getActivityCount>0,expression:"getActivityCount > 0"}],attrs:{id:"activity-count"}},[t._v(t._s(t.getActivityCount))])]),n("router-link",{staticClass:"navbar-item",attrs:{to:"/torrents/complete"}},[t._v("History")]),n("router-link",{staticClass:"navbar-item",attrs:{to:"/settings"}},[t._v("Settings")]),n("a",{staticClass:"navbar-item",on:{click:t.logout}},[n("span",[t._v("Logout ")]),n("b-icon",{attrs:{size:"is-small",icon:"logout-variant"}})],1)],1)])])},x=[],C=n("c93e"),O=(n("a481"),n("96cf"),n("3040")),E=n("bc3a"),S=n.n(E),T=!0,k="http://",I="localhost",j=9393,A="/api",P=T?"/":k+I+":"+j,D=T?A:k+I+":"+j+A,R={baseURL:D,timeout:5e3,headers:{"Content-Type":"application/json"}},N=S.a.create(R),L=S.a.create(R);L.interceptors.request.use(function(t){return t.headers["Authorization"]="Bearer ".concat(d.getToken()),t},void 0),L.interceptors.response.use(void 0,function(t){return void 0!==t.response&&401===t.response.status&&"/login"!==sn.currentRoute.path&&F.logout(sn.currentRoute.fullPath),Promise.reject(t)});var $={insecureAxios:N,secureAxios:L},F={login:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$.insecureAxios.post("authentication/login",{username:e,password:n});case 3:r=t.sent,d.setToken(r.data.token),sn.replace(sn.currentRoute.query.redirect||"/"),t.next=15;break;case 8:if(t.prev=8,t.t0=t["catch"](0),void 0===t.t0.response||422!==t.t0.response.status){t.next=14;break}return t.abrupt("return",t.t0.response.data.message);case 14:return t.abrupt("return","unexpected error while fetching a token from the backend");case 15:case"end":return t.stop()}},t,this,[[0,8]])}));return function(e,n){return t.apply(this,arguments)}}(),logout:function(t){d.clearToken(),sn.replace({name:"login",query:{redirect:t}})}},M={data:function(){return{show:!1}},computed:Object(C["a"])({},Object(h["c"])("torrents",["getActivityCount"])),methods:{toggleShow:function(){this.show=!this.show},getLogoPath:function(){return n("cf05")},logout:function(){F.logout()}}},q=M,U=(n("1ddf"),Object(o["a"])(q,w,x,!1,null,"3747ae14",null));U.options.__file="NavBar.vue";var B=U.exports,H={name:"activity",components:{NavBar:B,ConnectionBanner:y}},V=H,z=(n("0370"),Object(o["a"])(V,v,f,!1,null,null,null));z.options.__file="Betanin.vue";var K=z.exports,G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"card"},[r("img",{attrs:{id:"logo",src:n("cf05")}}),r("div",{attrs:{id:"form"}},[r("b-field",{attrs:{type:{"is-primary":t.errors.has("username")},message:t.errors.first("username")}},[r("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{icon:"account",placeholder:"username","data-vv-name":"username"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),r("b-field",{attrs:{type:{"is-primary":t.errors.has("password")},message:t.errors.first("password")}},[r("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{icon:"lock",placeholder:"password",type:"password","data-vv-name":"password","password-reveal":""},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),r("button",{staticClass:"button is-primary is-pulled-right",on:{click:t.login}},[t._v("login")]),r("center",[t.errorMessage?r("p",{attrs:{id:"error-text"}},[t._v(t._s(t.errorMessage))]):t._e()])],1)])])},J=[],X={data:function(){return{username:"",password:"",errorMessage:""}},methods:{login:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$validator.validateAll();case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,F.login(this.username,this.password);case 7:this.errorMessage=t.sent;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},Y=X,Q=(n("efd6"),Object(o["a"])(Y,G,J,!1,null,"2a081b14",null));Q.options.__file="Login.vue";var W=Q.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"title is-5"},[t._v("config.yaml")]),n("div",{staticClass:"control",class:{"is-loading":t.isLoading}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"textarea is-small is-info has-fixed-size",attrs:{placeholder:"hello",disabled:t.wasError},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),t.wasError?t._e():n("p",[t._v("last read from disk at"),n("b",[t._v(" "+t._s(t._f("formatTimestamp")(t.readAt)))])]),n("b-field",{attrs:{grouped:"","group-multiline":"",position:"is-right",id:"buttons"}},[n("p",{staticClass:"control"},[n("button",{staticClass:"button is-light",on:{click:t.getConfig}},[t._v("reload")])]),n("p",{staticClass:"control"},[n("button",{staticClass:"button is-primary",attrs:{disabled:t.wasError},on:{click:t.setConfig}},[t._v("save")])])])],1)},tt=[],et="/beets/config",nt={data:function(){return{text:"",readAt:"",isLoading:null}},methods:{setConfig:function(){$.secureAxios.put(et,{config:this.text})},getConfig:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.prev=1,t.next=4,$.secureAxios.get(et);case 4:e=t.sent,this.text=e.data.config,this.readAt=e.data.time_read,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),this.text="could not load config from backend.\nreason: '".concat(t.t0.response.data.message,"'"),this.readAt=null;case 13:this.isLoading=!1;case 14:case"end":return t.stop()}},t,this,[[1,9]])}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.getConfig()},computed:{wasError:function(){return null===this.readAt}}},rt=nt,st=(n("eeaf"),Object(o["a"])(rt,Z,tt,!1,null,"9b348d1c",null));st.options.__file="ConfigEditor.vue";var it=st.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{width:640,scroll:"keep",active:t.$route.meta.modalIsOpen,onCancel:t.openModalClose}},[n("div",{staticClass:"modal-card"},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[t._v(t._s(t.torrent.name))])]),n("base-console",{staticClass:"modal-card-body",attrs:{torrentID:t.torrentID,isLive:t.isLive}}),n("footer",{staticClass:"modal-card-foot"},[n("div",{attrs:{id:"send-input"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.stdin,expression:"stdin"}],staticClass:"input is-small",attrs:{type:"text",disabled:!t.isLive,placeholder:t.isLive?"send to beets":"beets has quit"},domProps:{value:t.stdin},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.sendStdin(e):null},input:function(e){e.target.composing||(t.stdin=e.target.value)}}})]),n("div",{attrs:{id:"send-button"}},[n("button",{staticClass:"button is-small",attrs:{disabled:!t.isLive},on:{click:t.sendStdin}},[t._v("send")])])])],1)])},at=[],ct=(n("6762"),n("2fdb"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}]},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLive,expression:"isLive"}],attrs:{id:"live-box"}},[n("span",{attrs:{id:"live-fade"}},[t._v("■")]),n("span",{attrs:{id:"live-text"}},[t._v("live")])]),t._l(t.getAllLines(t.torrentID,t.lineLimit),function(e){return n("p",{key:e.index,domProps:{innerHTML:t._s(t.colorLine(e.data))}})})],2)}),ut=[],lt=n("a322"),dt="TORRENTS_ONE_UPDATE",vt="TORRENTS_ONE_DELETE",ft="TORRENTS_ALL_CREATE",pt="LINES_CREATE",mt="LINES_FETCHED_CREATE",ht="NOTI_STRINGS_UPDATE",gt="NOTI_STRING_UPDATE",bt="NOTI_POSSIBLE_UPDATE",_t="NOTI_SERVICES_UPDATE",yt="NOTI_SERVICE_CREATE",wt="NOTI_SERVICE_DELETE",xt="NOTI_SERVICE_UPDATE",Ct="NOTI_SERVICE_TESTING_UPDATE",Ot="STATUS_CONNECTED_UPDATE",Et="STATUS_SYSTEM_UPDATE",St=n("61ab"),Tt=n.n(St),kt=new Tt.a,It={props:["lineLimit","torrentID","isLive"],computed:Object(C["a"])({},Object(h["c"])({getAllLines:"lines/getAll",getFetchedLines:"lines/getFetched"}),Object(h["c"])({getOneTorrent:"torrents/getOne"})),methods:Object(C["a"])({},Object(h["b"])({doFetchAllLines:"lines/doFetchAll"}),Object(h["d"])(Object(lt["a"])({},mt,"lines/".concat(mt))),{colorLine:function(t){return kt.toHtml(t)}}),mounted:function(){this.getFetchedLines(this.torrentID)||(this.doFetchAllLines(this.torrentID),this[mt](this.torrentID))}},jt=It,At=(n("87f0"),Object(o["a"])(jt,ct,ut,!1,null,"7ba7e8a6",null));At.options.__file="BaseConsole.vue";var Pt=At.exports,Dt={data:function(){return{stdin:""}},components:{BaseConsole:Pt},computed:Object(C["a"])({},Object(h["c"])("torrents",["getOne"]),{torrentID:function(){return this.$route.params.torrentID},torrent:function(){return this.getOne(this.torrentID)||{}},isLive:function(){var t=this.torrent.status;return["PROCESSING","NEEDS_INPUT"].includes(t)}}),methods:{openModalClose:function(){this.$router.push({name:"torrents",params:{listType:this.$route.params.listType}})},sendStdin:function(t){$.secureAxios.post("torrents/".concat(this.torrentID,"/console/stdin"),{text:this.stdin}),this.stdin=""}}},Rt=Dt,Nt=(n("2f75"),Object(o["a"])(Rt,ot,at,!1,null,"6d11cc8f",null));Nt.options.__file="ModalConsole.vue";var Lt,$t,Ft,Mt,qt=Nt.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"title is-5"},[t._v("notification format")]),n("div",{attrs:{id:"strings-editor"}},[n("div",{attrs:{id:"strings-inputs"}},[n("b-field",{attrs:{label:"title"}},[n("b-input",{model:{value:t.stringsTitle,callback:function(e){t.stringsTitle=e},expression:"stringsTitle"}})],1),n("b-field",{attrs:{label:"body"}},[n("b-input",{attrs:{type:"textarea"},model:{value:t.stringsBody,callback:function(e){t.stringsBody=e},expression:"stringsBody"}})],1)],1),t._m(0)]),n("div",{staticClass:"field is-pulled-right controls"},[n("button",{staticClass:"button is-primary is-right",attrs:{id:"format-save-button"},on:{click:function(e){t.doPutStrings()}}},[t._v("save")])]),n("hr"),n("h5",{staticClass:"title is-5"},[t._v("services")]),n("div",{attrs:{id:"service-editor"}},[n("h6",{directives:[{name:"show",rawName:"v-show",value:0===t.getServices.length,expression:"getServices.length === 0"}]},[n("b-icon",{attrs:{icon:"alert"}}),t._v("  no services here yet, add one below")],1),t._l(t.getServices,function(t){return n("notification-service",{key:t.id,ref:"services",refInFor:!0,attrs:{serviceID:t.id}})}),n("div",{staticClass:"controls",attrs:{id:"service-controls"}},[n("div",{staticClass:"field has-addons",attrs:{id:"service-type-selector"}},[n("div",{staticClass:"control"},[n("div",{staticClass:"select is-fullwidth"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.newServiceType,expression:"newServiceType"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.newServiceType=e.target.multiple?n:n[0]}}},t._l(t.getPossible,function(e){return n("option",{key:e.service_name,domProps:{value:e.service_name}},[t._v(t._s(e.service_name))])}))])]),n("div",{staticClass:"control"},[n("button",{staticClass:"button",on:{click:function(e){t.doPostService(t.newServiceType)}}},[t._v("add new")])])]),n("div",{staticClass:"field"},[n("div",{staticClass:"field"},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-primary",class:{"is-loading":t.getIsTesting},on:{click:function(e){t.saveServices()}}},[t._v("save")])])])])])],2)])},Bt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"variables-help"}},[n("label",{staticClass:"label"},[t._v("available variables")]),n("ul",[n("li",[n("code",[t._v("$id")]),t._v(" the unique id or hash of the torrent")]),n("li",[n("code",[t._v("$title")]),t._v(" the title of the torrent")]),n("li",[n("code",[t._v("$time")]),t._v(" the timestamp of the last update to the torrent")]),n("li",[n("code",[t._v("$status")]),t._v(" the current betanin status of the torrent. eg. '"),n("b",[t._v("needs input")]),t._v("'")]),n("li",[n("code",[t._v("$console_path")]),t._v(" the relative path to the console modal")])])])}],Ht=(n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"line"}},[n("b-switch",{attrs:{id:"enabled-switch"},model:{value:t.enabled,callback:function(e){t.enabled=e},expression:"enabled"}},[t._v(t._s(["disabled","enabled"][Number(t.service.enabled)]))]),n("div",{attrs:{id:"url"}},[n("b-field",{attrs:{type:{"is-primary":t.errors.has("protocol")},message:t.errors.first("protocol")}},[n("b-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"protocol-selector","data-vv-name":"protocol"},model:{value:t.protocol,callback:function(e){t.protocol=e},expression:"protocol"}},[n("option",{attrs:{disabled:"",value:""}},[t._v("please select")]),t._l(t.getPossibleProtocols(t.service.type),function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})],2)],1),n("p",{attrs:{id:"protocol-helper"}},[t._v("://")]),n("b-field",{attrs:{type:{"is-primary":t.errors.has("notProtocol")},message:t.errors.first("notProtocol")}},[n("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"not-protocol-box",icon:"earth",placeholder:"see info button for help","data-vv-name":"notProtocol"},model:{value:t.notProtocol,callback:function(e){t.notProtocol=e},expression:"notProtocol"}})],1),n("a",{attrs:{id:"info-link",href:t.getPossibleInfo(t.service.type),target:"_blank"}},[n("b-icon",{attrs:{icon:"information",type:"is-info"}})],1)],1),n("p",{staticClass:"control",attrs:{id:"delete-button"}},[n("button",{staticClass:"button left-button",on:{click:function(e){t.NOTI_SERVICE_DELETE(t.service.id)}}},[t._v("remove")])])],1)}),Vt=[],zt=(n("20d6"),n("9393")),Kt=(n("ffc1"),n("c5f6"),n("7514"),function(t,e){return"undefined"===typeof e?t:t.slice(-e)}),Gt=function(t,e){return t.find(function(t){return t.id===e})},Jt=function t(e,n,r,s){var i=Number(n.index),o=e.length,a="undefined"!==typeof r?r:0,c="undefined"!==typeof s?s:o-1,u=a+Math.floor((c-a)/2);0===o?e.push(n):i>e[c].index?e.splice(c+1,0,n):i<e[a].index?e.splice(a,0,n):i<e[u].index?t(e,n,a,u-1):i>e[u].index&&t(e,n,u+1,c)},Xt=function(t){for(var e={torrent_id:"torrentID"},n=Object.entries(t),r=0;r<n.length;r++){var s=Object(zt["a"])(n[r],2),i=s[0],o=s[1];if(i in e)delete t[i],t[e[i]]=o;else{var a=i.replace(/(_\w)/g,function(t){return t[1].toUpperCase()});i!==a&&(delete t[i],t[a]=o)}}return t},Yt={torrents:[]},Qt={getActivity:function(t){return t.torrents.filter(function(t){return"COMPLETED"!==t.status})},getHistory:function(t){return t.torrents.filter(function(t){return"COMPLETED"===t.status})},getActivityCount:function(t,e){return e.getActivity.length},getHistoryCount:function(t,e){return e.getHistory.length},getOne:function(t){return function(e){return Gt(t.torrents,e)}}},Wt={doFetchAll:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,$.secureAxios.get("torrents/");case 3:r=t.sent,n(ft,r.data);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),doDeleteOne:function(t,e){var n=t.commit;$.secureAxios.delete("torrents/".concat(e)),n(vt,e)},doRetryOne:function(t,e){$.secureAxios.put("torrents/".concat(e))},doSocket__newTorrent:function(t,e){var n=t.commit;n(dt,e)}},Zt=(Lt={},Object(lt["a"])(Lt,ft,function(t,e){r["default"].set(t,"torrents",e)}),Object(lt["a"])(Lt,dt,function(t,e){var n=t.torrents.findIndex(function(t){return t.id===e.id});n>-1?r["default"].set(t.torrents,n,e):t.torrents.unshift(e)}),Object(lt["a"])(Lt,vt,function(t,e){t.torrents.splice(t.torrents.findIndex(function(t){return t.id===e}),1)}),Lt),te={state:Yt,getters:Qt,actions:Wt,mutations:Zt,namespaced:!0},ee={lines:{},fetched:[]},ne={getAll:function(t){return function(e,n){return Kt(t.lines[e]||[],n)}},getExists:function(t){return function(e){return Boolean(t.lines[e])}},getFetched:function(t){return function(e){return t.fetched.includes(e)}}},re={doFetchAll:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(e,n){var r,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,$.secureAxios.get("torrents/".concat(n,"/console/stdout"));case 3:s=t.sent,s.data.forEach(function(t){r(pt,Object(C["a"])({torrentID:n},t))});case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),doSocket__newLine:function(t,e){var n=t.commit,r=Xt(e);n(pt,r)}},se=($t={},Object(lt["a"])($t,pt,function(t,e){var n=e.torrentID,s=e.index,i=e.data,o=n in t.lines?t.lines[n]:[];Jt(o,{index:s,data:i}),r["default"].set(t.lines,n,o)}),Object(lt["a"])($t,mt,function(t,e){t.fetched.push(e)}),$t),ie={state:ee,getters:ne,actions:re,mutations:se,namespaced:!0},oe=(n("4f7f"),n("8afe")),ae=n("3799"),ce={strings:{},services:[],possible:[],isTesting:!1},ue={getStrings:function(t){return t.strings},getPossible:function(t){return t.possible},getServices:function(t){return t.services},getIsTesting:function(t){return t.isTesting},getServiceFromID:function(t){return function(e){return Gt(t.services,e)}},getPossibility:function(t){return function(e){return t.possible.find(function(t){return t.service_name===e})}},getPossibleInfo:function(t,e){return function(t){return e.getPossibility(t).setup_url}},getPossibleProtocols:function(t,e){return function(t){var n=e.getPossibility(t);return Object(oe["a"])(new Set(Object(oe["a"])(n.protocols||[]).concat(Object(oe["a"])(n.secure_protocols||[]))))}}},le={doPostService:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(e,n){var r,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,$.secureAxios.post("/notifications/services",{type:n});case 3:s=t.sent,r(yt,s.data);case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),doPutServices:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(e){var n,r,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.getters,t.next=3,$.secureAxios.put("/notifications/services",{services:r.getServices});case 3:return t.next=5,n(Ct,!0);case 5:return t.prev=5,t.next=8,$.secureAxios.get("/notifications/test_services",r.getServices);case 8:i=t.sent,s=i.data.result,t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](5);case 14:return t.prev=14,t.next=17,n(Ct,!1);case 17:return t.finish(14);case 18:ae["Toast"].open({message:s?"testing succeeded":"testing failed",type:s?"is-green":"is-primary"});case 19:case"end":return t.stop()}},t,this,[[5,12,14,18]])}));return function(e){return t.apply(this,arguments)}}(),doFetchServices:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,$.secureAxios.get("/notifications/services");case 3:r=t.sent,n(_t,r.data);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),doFetchPossible:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,$.secureAxios.get("/notifications/possible_services");case 3:r=t.sent,n(bt,r.data.schemas);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),doFetchStrings:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,$.secureAxios.get("/notifications/strings");case 3:r=t.sent,n(ht,r.data);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),doPutStrings:function(t){var e=t.getters;$.secureAxios.put("/notifications/strings",e.getStrings)}},de=(Ft={},Object(lt["a"])(Ft,ht,function(t,e){r["default"].set(t,"strings",e)}),Object(lt["a"])(Ft,gt,function(t,e){var n=e.key,s=e.value;r["default"].set(t.strings,n,s)}),Object(lt["a"])(Ft,yt,function(t,e){t.services.push(e)}),Object(lt["a"])(Ft,_t,function(t,e){r["default"].set(t,"services",e)}),Object(lt["a"])(Ft,xt,function(t,e){var n=e.serviceID,s=e.key,i=e.value,o=t.services.findIndex(function(t){return t.id===n});r["default"].set(t.services[o],s,i)}),Object(lt["a"])(Ft,wt,function(t,e){t.services.splice(t.services.findIndex(function(t){return t.id===e}),1)}),Object(lt["a"])(Ft,bt,function(t,e){r["default"].set(t,"possible",e)}),Object(lt["a"])(Ft,Ct,function(t,e){r["default"].set(t,"isTesting",e)}),Ft),ve={state:ce,getters:ue,actions:le,mutations:de,namespaced:!0},fe={connected:!1,systemInfo:{}},pe={getConnected:function(t){return t.connected},getSystemInfo:function(t){return t.systemInfo}},me={doSocket__connect:function(t){var e=t.commit;t.dispatch;e(Ot,!0)},doSocket__disconnect:function(t){var e=t.commit;e(Ot,!1)},doFetchSystemInfo:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(e){var n,r,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,$.secureAxios.get("/meta/system_info");case 3:r=t.sent,s=Xt(r.data),n(Et,s);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},he=(Mt={},Object(lt["a"])(Mt,Ot,function(t,e){r["default"].set(t,"connected",e)}),Object(lt["a"])(Mt,Et,function(t,e){r["default"].set(t,"systemInfo",e)}),Mt),ge={state:fe,getters:pe,actions:me,mutations:he,namespaced:!0};r["default"].use(h["a"]);var be=new h["a"].Store({strict:!1,modules:{torrents:te,lines:ie,notifications:ve,status:ge}}),_e=function(t){return{get:function(){var e=be.getters["notifications/getServiceFromID"],n=e(this.serviceID);return n[t]},set:function(e){be.commit("notifications/".concat(xt),{serviceID:this.serviceID,key:t,value:e})}}},ye=function(t){return{get:function(){var e=be.getters["notifications/getStrings"];return e[t]},set:function(e){be.commit("notifications/".concat(gt),{key:t,value:e})}}},we={props:["serviceID"],data:function(){return{deleteIsVisible:!1}},computed:Object(C["a"])({},Object(h["c"])("notifications",["getServiceFromID","getPossibleProtocols","getPossibleInfo"]),{service:function(){return this.getServiceFromID(this.serviceID)},enabled:_e("enabled"),protocol:_e("protocol"),notProtocol:_e("not_protocol")}),methods:Object(C["a"])({},Object(h["d"])("notifications",[wt]))},xe=we,Ce=(n("8279"),Object(o["a"])(xe,Ht,Vt,!1,null,"42df9cae",null));Ce.options.__file="NotificationService.vue";var Oe=Ce.exports,Ee=n("7bb1"),Se={components:{NotificationService:Oe,ValidationObserver:Ee["a"]},mounted:function(){this.doFetchPossible(),this.doFetchServices(),this.doFetchStrings()},computed:Object(C["a"])({},Object(h["c"])("notifications",["getServices","getPossible","getIsTesting"]),{stringsTitle:ye("title"),stringsBody:ye("body")}),methods:Object(C["a"])({},Object(h["b"])("notifications",["doFetchPossible","doFetchServices","doFetchStrings","doPutStrings","doPostService","doPutServices"]),{saveServices:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$refs.services||[],n=e.map(function(t){return t.$validator.validateAll()}),t.next=4,Promise.all(n);case 4:r=t.sent,r.every(function(t){return t})&&this.doPutServices();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),data:function(){return{newServiceType:"Kodi/XBMC"}}},Te=Se,ke=(n("9ba1"),Object(o["a"])(Te,Ut,Bt,!1,null,"1600cdf4",null));ke.options.__file="NotificationEditor.vue";var Ie=ke.exports,je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",{staticClass:"tabs"},[n("ul",[n("router-link",{attrs:{tag:"li",to:"/settings/clients"}},[n("a",[n("b-icon",{attrs:{icon:"download"}}),t._v("torrent clients")],1)]),n("router-link",{attrs:{tag:"li",to:"/settings/notifications"}},[n("a",[n("b-icon",{attrs:{icon:"alert-circle"}}),t._v("notifications")],1)]),n("router-link",{attrs:{tag:"li",to:"/settings/beets"}},[n("a",[n("b-icon",{attrs:{icon:"note"}}),t._v("beets config")],1)])],1)]),n("router-view")],1)},Ae=[],Pe=(n("4b88"),{}),De=Object(o["a"])(Pe,je,Ae,!1,null,"ea4cff02",null);De.options.__file="Settings.vue";var Re=De.exports,Ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",{staticClass:"title is-5"},[t._v("api key")]),n("code",[t._v(t._s(t.apiKey))]),n("hr"),n("div",{staticClass:"title is-5"},[t._v("script examples")]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[n("div",{staticClass:"title is-7 example-heading"},[t._v("transmission")]),n("pre",[n("u",[t._v("# torrent-finished.sh")]),t._v('\n\n#!/bin/sh\n\ncurl \\\n    --request POST \\\n    --data-urlencode "path=/downloads_wall" \\\n    --data-urlencode "name=$TR_TORRENT_NAME" \\\n    --header "X-API-Key: '),n("b",[t._v(t._s(t.apiKey))]),t._v('" \\\n    "https://'),n("b",[t._v("your.domain")]),t._v('/api/torrents/$TR_TORRENT_HASH"')]),n("br"),t._m(0)]),t._m(1)])])},Le=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",[n("u",[t._v("# settings.json (excerpt)")]),t._v('\n\n...\n"script-torrent-done-enabled": '),n("b",[t._v("true")]),t._v(',\n"script-torrent-done-filename": '),n("b",[t._v('"/path/to/above/finished.sh"')]),t._v(",\n...")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column"},[n("div",{staticClass:"title is-7 example-heading"},[t._v("deluge")]),n("pre",[n("u",[t._v("# torrent-finished.sh")]),t._v("\n\n#!/bin/sh\n\ncoming soon")])])}],$e={data:function(){return{apiKey:"loading..."}},mounted:function(){var t=Object(O["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.secureAxios.get("clients/api_key");case 2:e=t.sent,this.apiKey=e.data.api_key;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},Fe=$e,Me=(n("b3c2"),Object(o["a"])(Fe,Ne,Le,!1,null,null,null));Me.options.__file="TorrentClients.vue";var qe=Me.exports,Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[0==t.torrents.length?n(t.emptyTorrentsComponent,{tag:"component"}):n("b-table",{attrs:{data:t.torrents,"opened-detailed":t.openedDetails,detailed:"","detail-key":"id",paginated:"","per-page":"50","pagination-simple":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-table-column",{attrs:{label:"name"}},[t._v(t._s(t._f("truncate")(e.row.name,64)))]),n("b-table-column",{attrs:{label:"status",numeric:!0}},[n("span",{staticClass:"status-group",style:{color:t.statusStyle(e.row.status).colour}},[n("b-icon",{attrs:{icon:t.statusStyle(e.row.status).icon,size:"is-small"}}),t._v(" "+t._s(t.statusStyle(e.row.status).text))],1),n("router-link",{directives:[{name:"show",rawName:"v-show",value:e.row.has_lines,expression:"props.row.has_lines"}],staticClass:"status-group link",attrs:{to:{name:"modal console",params:{torrentID:e.row.id}}}},[n("b-icon",{attrs:{icon:"console",size:"is-small"}}),t._v(" view")],1),n("span",{directives:[{name:"show",rawName:"v-show",value:["FAILED","COMPLETED"].includes(e.row.status),expression:'["FAILED", "COMPLETED"].includes(props.row.status)'}],staticClass:"status-group"},[n("span",{staticClass:"link",attrs:{title:"remove torrent"},on:{click:function(n){t.deleteTorrent(e.row.id)}}},[n("b-icon",{staticClass:"link",attrs:{icon:"close",size:"is-small"}})],1),t._v(" "),n("span",{staticClass:"link",attrs:{title:"retry import"},on:{click:function(n){t.retryTorrent(e.row.id)}}},[n("b-icon",{staticClass:"link",attrs:{title:"retry import",icon:"loop",size:"is-small"}})],1)])],1)]}},{key:"detail",fn:function(e){return[n("div",{attrs:{id:"row-status"}},[n("p",[n("strong",[t._v("id")]),t._v(" "+t._s(e.row.id))]),n("p",[n("strong",[t._v("status")]),t._v(" "+t._s(t._f("lower")(e.row.status)))]),n("p",[n("strong",[t._v("created")]),t._v(" "+t._s(e.row.created))]),n("p",[n("strong",[t._v("updated")]),t._v(" "+t._s(e.row.updated))])])]}}])}),n("router-view",{attrs:{name:"modal"}})],1)},Be=[],He=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"title is-6"},[n("b-icon",{attrs:{icon:"alert"}}),t._v("  there are no torrents being imported at the moment")],1),n("div",{staticClass:"title is-7 subtitle"},[t._v("make sure that you have set your torrent client up correctly")])])},Ve=[],ze=(n("0153"),{}),Ke=Object(o["a"])(ze,He,Ve,!1,null,"6b1b5ecc",null);Ke.options.__file="NoActive.vue";var Ge=Ke.exports,Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"title is-6"},[n("b-icon",{attrs:{icon:"alert"}}),t._v("  there are no imported torrents yet")],1)])},Xe=[],Ye={},Qe=Object(o["a"])(Ye,Je,Xe,!1,null,null,null);Qe.options.__file="NoHistory.vue";var We=Qe.exports,Ze={ENQUEUED:{text:"enqueued",icon:"clock-outline",colour:"hsl(36, 99%, 65%)"},PROCESSING:{text:"processing",icon:"clock-fast",colour:"hsl(48, 98%, 52%"},NEEDS_INPUT:{text:"needs input",icon:"alert",colour:"hsl(48, 98%, 52%)"},FAILED:{text:"failed",icon:"close",colour:"hsl(349, 58%, 57%)"},COMPLETED:{text:"completed",icon:"check",colour:"hsl(141, 71%, 48%)"},DOWNLOADING:{text:"downloading",icon:"sleep",colour:"hsl(0, 0%, 86%)"}},tn={computed:Object(C["a"])({},Object(h["c"])("torrents",["getActivity","getHistory"]),{emptyTorrentsComponent:function(){return"active"===this.$route.params.listType?Ge:We},torrents:function(){return"active"===this.$route.params.listType?this.getActivity:this.getHistory}}),methods:Object(C["a"])({},Object(h["b"])({doDeleteOneTorrent:"torrents/doDeleteOne",doRetryOneTorrent:"torrents/doRetryOne",doFetchAllTorrents:"torrents/doFetchAll"}),{retryTorrent:function(t){confirm("do you want to retry this?")&&(this.doRetryOneTorrent(t),this.$router.push({name:"modal console",params:{torrentID:t}}))},deleteTorrent:function(t){confirm("do you want to remove this from betanin?")&&this.doDeleteOneTorrent(t)},statusStyle:function(t){return Ze[t]}}),data:function(){return{openedDetails:[]}},mounted:function(){this.doFetchAllTorrents()}},en=tn,nn=(n("71a2"),Object(o["a"])(en,Ue,Be,!1,null,"5891be86",null));nn.options.__file="Torrents.vue";var rn=nn.exports;r["default"].use(l["a"]);var sn=new l["a"]({linkActiveClass:"is-active",routes:[{name:"login",path:"/login",component:W},{name:"betanin",path:"/",redirect:{name:"torrents",params:{listType:"active"}},component:K,children:[{path:"torrents/:listType",name:"torrents",component:rn,beforeEnter:on,children:[{path:"console/:torrentID",name:"modal console",components:{modal:qt},meta:{modalIsOpen:!0}}]},{path:"settings",name:"settings",component:Re,beforeEnter:on,children:[{path:"clients",component:qe},{path:"notifications",component:Ie},{path:"beets",component:it},{path:"",redirect:"clients"}]}]},{path:"*",redirect:"/"}]});function on(t,e,n){d.isLoggedIn()?n():n({name:"login",query:{redirect:t.fullPath}})}n("456d");var an={formatTimestamp:function(t){var e=new Date(t);return e.toLocaleTimeString("en-IE")},lower:function(t){return t.toLowerCase()},toYesNo:function(t){return t?"yes":"no"},round:function(t){return Math.round(t)},truncate:function(t,e,n){return t?t.slice(0,e)+(e<t.length?n||"...":""):""}};Object.keys(an).forEach(function(t){r["default"].filter(t,an[t])});var cn=n("8a03"),un=n.n(cn),ln=(n("5363"),n("f87c")),dn=n("8055"),vn=n.n(dn),fn=n("123d"),pn=n.n(fn);r["default"].config.productionTip=!1,r["default"].use(un.a,{defaultIconPack:"mdi",defaultContainerElement:"app"}),r["default"].use(ln["a"],vn()(P),{store:be,actionPrefix:"doSocket__",mutationPrefix:"SOCKET__"}),r["default"].use(Ee["c"]),Ee["b"].localize("en",{custom:{protocol:{required:"protocol required"},notProtocol:{required:"url required"}}}),r["default"].use(pn.a);var mn=new r["default"]({router:sn,store:be,render:function(t){return t(u)}});mn.$mount("#app")},"58a6":function(t,e,n){},"5c69":function(t,e,n){},6088:function(t,e,n){"use strict";var r=n("2dc5"),s=n.n(r);s.a},"71a2":function(t,e,n){"use strict";var r=n("58a6"),s=n.n(r);s.a},8279:function(t,e,n){"use strict";var r=n("4d57"),s=n.n(r);s.a},"85c8":function(t,e,n){},"87f0":function(t,e,n){"use strict";var r=n("45d9"),s=n.n(r);s.a},"87f2":function(t,e,n){},"8c19":function(t,e,n){},"8d6c":function(t,e,n){},"9ba1":function(t,e,n){"use strict";var r=n("35e9"),s=n.n(r);s.a},b3c2:function(t,e,n){"use strict";var r=n("1e1a"),s=n.n(r);s.a},cf05:function(t,e,n){t.exports=n.p+"img/logo.a908a471.png"},eeaf:function(t,e,n){"use strict";var r=n("87f2"),s=n.n(r);s.a},efd6:function(t,e,n){"use strict";var r=n("85c8"),s=n.n(r);s.a}});
//# sourceMappingURL=app.baa89f37.js.map