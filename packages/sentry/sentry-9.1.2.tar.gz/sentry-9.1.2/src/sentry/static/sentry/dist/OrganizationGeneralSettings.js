(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{2364:function(e,a,t){"use strict";t.r(a);var n=t(11),i=t.n(n),r=t(26),o=t.n(r),s=t(10),l=t(1),c=t.n(l),u=t(0),d=t.n(u),g=t(17),m=t.n(g),p=t(25),f=t(39),h=t(260),v=t(2),b=t(37),E=t(479),j=t(227),O=t(53),w=t(33),z=t(99),S=t(113),y=t(1867),R=t(257),D=t(1549),I=t(66),M=t(616),q=t(846),N=m()({displayName:"OrganizationSettingsForm",propTypes:{location:c.a.object,orgId:c.a.string.isRequired,access:c.a.object.isRequired,initialData:c.a.object.isRequired,onSave:c.a.func.isRequired},mixins:[b.default,I.a],render:function(){var e=this.props,a=e.initialData,t=e.orgId,n=e.onSave,i=e.access,r="/organizations/".concat(t,"/");return d.a.createElement(R.default,{className:"ref-organization-settings",apiMethod:"PUT",apiEndpoint:r,saveOnBlur:!0,allowUndo:!0,initialData:a,onSubmitSuccess:function(e,t,i,r){"function"==typeof n&&n(a,t.initialData)},onSubmitError:function(e){return Object(f.addErrorMessage)("Unable to save change")}},d.a.createElement(M.a,null),d.a.createElement(D.a,{features:this.getFeatures(),access:i,location:this.props.location,forms:q.default,disabled:!i.has("org:write")}),d.a.createElement(y.a,{type:"organization",allowGravatar:!1,endpoint:"".concat(r,"avatar/"),model:a,onSave:h.g,disabled:!i.has("org:write")}))}}),T=m()({displayName:"OrganizationGeneralSettings",propTypes:{routes:c.a.arrayOf(c.a.object)},mixins:[b.default],getInitialState:function(){return{loading:!0,error:!1,data:null}},componentDidMount:function(){var e=this;Promise.all([this.fetchData()]).then(function(a){var t=o()(a,1)[0];e.setState({data:t,loading:!1})},function(){e.setState({error:!0,loading:!1})})},fetchData:function(){var e=this;return new Promise(function(a,t){e.api.request("/organizations/".concat(e.props.params.orgId,"/"),{method:"GET",success:function(e){a(e)},error:function(){t()}})})},handleRemoveOrganization:function(){var e=(this.state||{}).data;e&&(Object(f.addLoadingMessage)(),Object(h.e)(this.api,{orgId:this.props.params.orgId,successMessage:"".concat(e.name," is queued for deletion."),errorMessage:"Error removing the ".concat(e&&e.name," organization")}))},handleSave:function(e,a){a.slug&&a.slug!==e.slug?(Object(h.a)(e,a),s.browserHistory.replace("/settings/".concat(a.slug,"/"))):(this.setState({data:a}),Object(h.g)(a))},render:function(){var e=this.state,a=e.data,t=e.loading,n=e.error,r=this.props.params.orgId,o=a&&new Set(a.access),s=a&&a.projects&&!!a.projects.length;return d.a.createElement("div",null,n&&d.a.createElement(O.default,null),t&&!n&&d.a.createElement(w.default,null),a&&!t&&!n&&d.a.createElement("div",null,d.a.createElement(z.default,{title:Object(v.t)("Organization Settings")}),d.a.createElement(N,i()({},this.props,{initialData:a,orgId:r,access:o,onSave:this.handleSave})),o.has("org:admin")&&!a.isDefault&&d.a.createElement(p.a,null,d.a.createElement(p.e,null,Object(v.t)("Remove Organization")),d.a.createElement(E.default,{label:Object(v.t)("Remove Organization"),help:Object(v.t)("Removing this organization will delete all data including projects and their associated events.")},d.a.createElement("div",null,d.a.createElement(j.a,{className:"btn btn-danger",priority:"danger",size:"small",title:Object(v.t)("Remove %s organization",a&&a.name),message:d.a.createElement("div",null,d.a.createElement(S.default,null,Object(v.tct)("Removing the organization, [name] is permanent and cannot be undone! Are you sure you want to continue?",{name:a&&d.a.createElement("strong",null,a.name)})),s&&d.a.createElement("div",null,d.a.createElement(S.default,{noMargin:!0},Object(v.t)("This will also remove the following associated projects:")),d.a.createElement("ul",{className:"ref-projects"},a.projects.map(function(e){return d.a.createElement("li",{key:e.slug},e.slug)})))),onConfirm:this.handleRemoveOrganization},Object(v.t)("Remove Organization")))))))}});a.default=T}}]);
//# sourceMappingURL=OrganizationGeneralSettings.js.map