(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{1604:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s});var a=n(45);function r(e,t){return(new a.Client).requestPromise("/organizations/".concat(e,"/releases/").concat(encodeURIComponent(t),"/"),{method:"DELETE"})}function s(e){return e.reduce(function(e,t){var n=t.filename,a=t.repoName,r=t.author,s=t.type;return e.hasOwnProperty(a)||(e[a]={}),e[a].hasOwnProperty(n)||(e[a][n]={authors:{},types:new Set,repos:new Set}),e[a][n].authors[r.email]=r,e[a][n].types.add(s),e},{})}},1722:function(e,t,n){"use strict";var a=n(4),r=n.n(a),s=n(6),o=n.n(s),i=n(7),c=n.n(i),l=n(5),u=n.n(l),m=n(8),p=n.n(m),d=n(1),h=n.n(d),f=n(0),g=n.n(f),v=n(16),y=n(33),E=n(53),j=n(62),b=n(29),C=n(63),k=n(2),I=n(25),w=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"render",value:function(){var e={};return e.width=this.props.authorCommits/this.props.totalCommits*100+"%",g.a.createElement("div",{className:"commit-bar",style:e})}}]),t}(g.a.Component);w.propTypes={totalCommits:h.a.number.isRequired,authorCommits:h.a.number.isRequired};var N=function(e){function t(e){var n;return r()(this,t),(n=c()(this,u()(t).call(this,e))).state={loading:!0,error:!1},n}return p()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.api.request(this.getPath(),{method:"GET",success:function(t,n,a){e.setState({error:!1,loading:!1,commitList:t,pageLinks:a.getResponseHeader("Link")})},error:function(){e.setState({error:!0,loading:!1})}})}},{key:"getPath",value:function(){var e=this.props,t=e.orgId,n=e.projectId,a=e.version,r=encodeURIComponent(a);return this.props.projectId?"/projects/".concat(t,"/").concat(n,"/releases/").concat(r,"/commits/"):"/organizations/".concat(t,"/releases/").concat(r,"/commits/")}},{key:"renderEmpty",value:function(){return g.a.createElement("div",{className:"box empty"},Object(k.t)("No authors in this release"))}},{key:"render",value:function(){if(this.state.loading)return g.a.createElement(y.default,null);if(this.state.error)return g.a.createElement(E.default,null);var e=this.state.commitList,t=e.reduce(function(e,t){var n=t.author;return e.hasOwnProperty(n.email)?e[n.email].commitCount+=1:e[n.email]={commitCount:1,author:n},e},{}),n=Object.values(t);return n.sort(function(e,t){return t.commitCount-e.commitCount}),g.a.createElement("div",{style:{marginTop:5}},g.a.createElement("h6",{className:"nav-header m-b-1"},Object(k.t)("Commits by Author")),!n.length&&this.renderEmpty(),g.a.createElement(I.a,null,g.a.createElement(I.c,null,n.map(function(t,n){var a=t.author,r=t.commitCount;return g.a.createElement(I.f,{key:n,p:1,align:"center"},g.a.createElement(v.Flex,null,g.a.createElement(b.default,{title:"".concat(a.name," ").concat(a.email)},g.a.createElement(j.default,{user:a,size:20}))),g.a.createElement(v.Flex,{flex:"1",px:1},g.a.createElement(w,{style:{marginLeft:5},totalCommits:e.length,authorCommits:r})),g.a.createElement("div",null,r))}))))}}]),t}(g.a.Component);N.propTypes={api:h.a.object,orgId:h.a.string.isRequired,projectId:h.a.string,version:h.a.string.isRequired},t.a=Object(C.default)(N)},1723:function(e,t,n){"use strict";var a=n(26),r=n.n(a),s=n(4),o=n.n(s),i=n(6),c=n.n(i),l=n(7),u=n.n(l),m=n(5),p=n.n(m),d=n(8),h=n.n(d),f=n(1),g=n.n(f),v=n(0),y=n.n(v),E=n(10),j=n(9),b=n(33),C=n(53),k=n(2),I=n(56),w=n(63),N=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=u()(this,(e=p()(t)).call.apply(e,[this].concat(r)))).state={loading:!0,error:!1,stats:[],newIssueCount:null},n}return h()(t,e),c()(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([this.getStatReceived(),this.getNewIssuesCount(),n.e(106).then(n.t.bind(null,1861,7))]).then(function(t){var n=r()(t,3),a=n[0],s=n[1],o=n[2];e.setState({loading:!1,stats:a,newIssueCount:s&&s.newGroups,Sparklines:o.Sparklines,SparklinesLine:o.SparklinesLine,error:!1})},function(){e.setState({error:!0})})}},{key:"getStatReceived",value:function(){var e=this,t=this.props,n=t.api,a=t.orgId,r=this.props.project.slug,s="/projects/".concat(a,"/").concat(r,"/stats/");return n.requestPromise(s,{method:"GET",data:"stat=received",success:function(t,n,a){e.setState({stats:t}),e.getNewIssuesCount()},error:function(){e.setState({error:!0})}})}},{key:"getNewIssuesCount",value:function(){var e=this,t=this.props,n=t.api,a=t.orgId,r=t.version,s=this.props.project.slug,o="/projects/".concat(a,"/").concat(s,"/releases/").concat(encodeURIComponent(r),"/");return n.requestPromise(o,{method:"GET",success:function(t,n,a){e.setState({newIssueCount:t.newGroups,loading:!1})},error:function(){e.setState({error:!0})}})}},{key:"renderProjectSummary",value:function(){var e=this.props.project,t=this.state.newIssueCount;return y.a.createElement(y.a.Fragment,null,y.a.createElement("h6",{className:"m-b-0"},e.slug),y.a.createElement("p",{className:"m-b-0 text-muted"},y.a.createElement("small",null,t>0?Object(k.tn)("%s new issue","%s new issues",t):Object(k.t)("No new issues"))))}},{key:"render",value:function(){var e=this.props,t=e.organization,n=e.orgId,a=e.project,r=e.version;if(this.state.loading)return y.a.createElement(b.default,null);if(this.state.error)return y.a.createElement(C.default,null);var s=this.state,o=s.Sparklines,i=s.SparklinesLine,c=s.stats.map(function(e){return e[1]}),l=new Set(t.features).has("sentry10");return y.a.createElement("li",null,y.a.createElement("div",{className:"sparkline pull-right",style:{width:96}},y.a.createElement(o,{data:c,width:100,height:32},y.a.createElement(i,{style:{stroke:"#8f85d4",fill:"none",strokeWidth:3}}))),l?y.a.createElement("div",null,this.renderProjectSummary()):y.a.createElement(E.Link,{to:"/".concat(n,"/").concat(a.slug,"/releases/").concat(encodeURIComponent(r),"/")},this.renderProjectSummary()))}}]),t}(y.a.Component);N.propTypes={api:g.a.object.isRequired,organization:j.default.Organization,orgId:g.a.string,project:g.a.object,version:g.a.string},t.a=Object(I.a)(Object(w.default)(N))},1724:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n(4),r=n.n(a),s=n(6),o=n.n(s),i=n(7),c=n.n(i),l=n(5),u=n.n(l),m=n(8),p=n.n(m),d=n(0),h=n.n(d),f=n(1),g=n.n(f),v=n(23),y=n(68),E=n(61),j=n(2),b=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"getBasePath",value:function(){var e=this.props,t=e.orgId,n=e.projectId;return n?"/".concat(t,"/").concat(n,"/"):"/organizations/".concat(t,"/issues/")}},{key:"renderEmpty",value:function(){return h.a.createElement("div",{className:"box empty"},Object(j.t)("None"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.deploys,a=t.version;return h.a.createElement(h.a.Fragment,null,h.a.createElement("h6",{className:"nav-header m-b-1"},Object(j.t)("Deploys")),h.a.createElement("ul",{className:"nav nav-stacked"},n.length?n.map(function(t){var n="".concat(e.getBasePath(),"?query=release:").concat(a,"&environment=").concat(encodeURIComponent(t.environment));return h.a.createElement("li",{key:t.id},h.a.createElement(E.a,{to:n,title:Object(j.t)("View in stream")},h.a.createElement("div",{className:"row row-flex row-center-vertically"},h.a.createElement("div",{className:"col-xs-6"},h.a.createElement("span",{className:"repo-label",style:{verticalAlign:"bottom"}},t.environment,h.a.createElement(v.default,{src:"icon-open",style:{marginLeft:6}}))),h.a.createElement("div",{className:"col-xs-6 align-right"},h.a.createElement("small",null,h.a.createElement(y.default,{date:t.dateFinished}))))))}):this.renderEmpty()))}}]),t}(h.a.Component);b.propTypes={deploys:g.a.array.isRequired,version:g.a.string.isRequired,orgId:g.a.string.isRequired,projectId:g.a.string}},1725:function(e,t,n){"use strict";var a=n(4),r=n.n(a),s=n(6),o=n.n(s),i=n(7),c=n.n(i),l=n(5),u=n.n(l),m=n(8),p=n.n(m),d=n(0),h=n.n(d),f=n(3),g=n(15),v=n(24),y=n(488),E=n(811),j=n(9),b=n(2),C=n(56),k=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"render",value:function(){return h.a.createElement(I,{centered:!0},h.a.createElement(y.a,{src:"icon-commit"}),h.a.createElement("h5",null,Object(b.t)("Releases are better with commit data!")),h.a.createElement("p",null,Object(b.t)("Connect a repository to see commit info, files changed, and authors\n                  involved in future releases"),"."),h.a.createElement(v.default,{priority:"primary",href:"/organizations/".concat(this.props.organization.slug,"/repos/")},Object(b.t)("Connect a repository")))}}]),t}(h.a.Component);k.propTypes={organization:j.default.Organization};var I=Object(f.default)(E.default,{target:"ecm6yd60"})("margin-top:",Object(g.default)(4),";padding-top:",Object(g.default)(2),";padding-bottom:",Object(g.default)(4),";");t.a=Object(C.a)(k)},1726:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var a=n(12),r=n.n(a),s=n(4),o=n.n(s),i=n(6),c=n.n(i),l=n(7),u=n.n(l),m=n(5),p=n.n(m),d=n(8),h=n.n(d),f=n(0),g=n.n(f),v=n(1),y=n.n(v),E=n(3),j=n(597),b=n(25),C=n(15),k=n(2),I=function(e){function t(){return o()(this,t),u()(this,p()(t).apply(this,arguments))}return h()(t,e),c()(t,[{key:"getResolvedPath",value:function(){var e=this.props,t=e.version,n=e.orgId,a=e.projectId;return a?"/projects/".concat(n,"/").concat(a,"/releases/").concat(encodeURIComponent(t),"/resolved/"):"/organizations/".concat(n,"/releases/").concat(encodeURIComponent(t),"/resolved/")}},{key:"getIssuesPath",value:function(){var e=this.props,t=e.orgId,n=e.projectId;return n?"/projects/".concat(t,"/").concat(n,"/issues/"):"/organizations/".concat(t,"/issues/")}},{key:"render",value:function(){var e=this.props,t=e.version,n=e.orgId,a=e.query;return g.a.createElement(g.a.Fragment,null,g.a.createElement("h5",null,Object(k.t)("Issues Resolved in this Release")),g.a.createElement(w,{endpoint:this.getResolvedPath(),query:a,pagination:!1,renderEmpty:function(){return g.a.createElement(b.a,null,g.a.createElement(b.c,null,g.a.createElement(b.f,{justify:"center"},Object(k.t)("No issues resolved"))))},showActions:!1,params:{orgId:n}}),g.a.createElement("h5",null,Object(k.t)("New Issues in this Release")),g.a.createElement(w,{endpoint:this.getIssuesPath(),query:r()({},a,{query:'first-release:"'+t+'"',limit:5}),statsPeriod:"0",pagination:!1,renderEmpty:function(){return g.a.createElement(b.a,null,g.a.createElement(b.c,null,g.a.createElement(b.f,{justify:"center"},Object(k.t)("No new issues"))))},showActions:!1,params:{orgId:n}}))}}]),t}(g.a.Component);I.propTypes={query:y.a.object.isRequired,version:y.a.string.isRequired,orgId:y.a.string.isRequired,projectId:y.a.string};var w=Object(E.default)(j.a,{target:"e1xme6vx0"})("margin-bottom:",Object(C.default)(2),";")},1729:function(e,t,n){"use strict";var a=n(4),r=n.n(a),s=n(6),o=n.n(s),i=n(7),c=n.n(i),l=n(5),u=n.n(l),m=n(8),p=n.n(m),d=n(1),h=n.n(d),f=n(0),g=n.n(f),v=n(62),y=n(29),E=n(23),j=function(e){function t(e){var n;return r()(this,t),(n=c()(this,u()(t).call(this,e))).state={loading:!0},n}return p()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.filename,n=e.authors;return g.a.createElement("li",{className:"list-group-item list-group-item-sm release-file-change"},g.a.createElement("div",{className:"row row-flex row-center-vertically"},g.a.createElement("div",{className:"col-sm-10 truncate file-name"},g.a.createElement(E.default,{src:"icon-file",className:"icon-file-generic",size:"15"}),t),g.a.createElement("div",{className:"col-sm-2 avatar-grid align-right"},n.map(function(e,t){return g.a.createElement(y.default,{key:t,title:"".concat(e.name," ").concat(e.email)},g.a.createElement("span",{className:"avatar-grid-item m-b-0"},g.a.createElement(v.default,{user:e})))}))))}}]),t}(g.a.PureComponent);j.propTypes={filename:h.a.string.isRequired,authors:h.a.array.isRequired};var b=j,C=n(2);function k(e){return g.a.createElement("li",{className:"list-group-item list-group-item-sm align-center"},g.a.createElement("span",{className:"icon-container"}),g.a.createElement("a",{onClick:e.onClick},Object(C.tn)("Show %s collapsed file","Show %s collapsed files",e.count)))}k.propTypes={onClick:h.a.func.isRequired,count:h.a.number.isRequired};var I=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=c()(this,(e=u()(t)).call.apply(e,[this].concat(s)))).onCollapseToggle=function(){n.setState({collapsed:!n.state.collapsed})},n.state={loading:!0,collapsed:!0},n}return p()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,n=e.repository,a=e.fileChangeSummary,r=t.MAX_WHEN_COLLAPSED,s=Object.keys(a),o=s.length;s.sort(),this.state.collapsed&&o>r&&(s=s.slice(0,r));var i=o-s.length,c=o>r;return g.a.createElement("div",null,g.a.createElement("h5",null,Object(C.tn)("%s file changed in "+n,"%s files changed in "+n,o)),g.a.createElement("ul",{className:"list-group list-group-striped m-b-2"},s.map(function(e){var t=a[e],n=t.authors,r=t.types;return g.a.createElement(b,{key:e,filename:e,authors:Object.values(n),types:r})}),i>0&&g.a.createElement(k,{onClick:this.onCollapseToggle,count:i}),0===i&&c&&g.a.createElement("li",{className:"list-group-item list-group-item-sm align-center"},g.a.createElement("span",{className:"icon-container"}),g.a.createElement("a",{onClick:this.onCollapseToggle},Object(C.t)("Collapse")))))}}]),t}(g.a.Component);I.propTypes={fileChangeSummary:h.a.object,repository:h.a.string},I.MAX_WHEN_COLLAPSED=5;t.a=I},2333:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return R});var a=n(4),r=n.n(a),s=n(6),o=n.n(s),i=n(7),c=n.n(i),l=n(5),u=n.n(l),m=n(8),p=n.n(m),d=n(0),h=n.n(d),f=n(1),g=n.n(f),v=n(9),y=n(612),E=n(1722),j=n(1723),b=n(1729),C=n(114),k=n(2),I=n(1604),w=n(1724),N=n(1725),O=n(1726),R=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,n=e.version,a="/organizations/".concat(t,"/releases/").concat(encodeURIComponent(n),"/");return[["fileList","".concat(a,"commitfiles/")],["deploys","".concat(a,"deploys/")],["repos","/organizations/".concat(t,"/repos/")]]}},{key:"renderEmpty",value:function(){return h.a.createElement("div",{className:"box empty"},Object(k.t)("None"))}},{key:"renderBody",value:function(){var e=this.props,t=e.release,n=e.query,a=e.params,r=a.orgId,s=a.version,o=this.state,i=o.fileList,c=o.repos.length>0,l=Object(I.b)(i);return h.a.createElement("div",null,h.a.createElement("div",{className:"row",style:{paddingTop:10}},h.a.createElement("div",{className:"col-sm-8"},h.a.createElement(O.a,{version:s,orgId:r,query:n}),c&&h.a.createElement("div",null,Object.keys(l).map(function(e,t){return h.a.createElement(b.a,{key:t,repository:e,fileChangeSummary:l[e]})}))),h.a.createElement("div",{className:"col-sm-4"},c?h.a.createElement("div",null,t.lastCommit&&h.a.createElement(y.a,{commit:t.lastCommit,headerClass:"nav-header"}),h.a.createElement(E.a,{orgId:r,version:s}),h.a.createElement("h6",{className:"nav-header m-b-1"},Object(k.t)("Projects Affected")),h.a.createElement("ul",{className:"nav nav-stacked"},0===t.projects.length?this.renderEmpty():t.projects.map(function(e){return h.a.createElement(j.a,{key:e.slug,orgId:r,project:e,version:s})}))):h.a.createElement(N.a,null),h.a.createElement(w.a,{deploys:this.state.deploys,version:s,orgId:r}))))}}]),t}(C.default);R.propTypes={release:v.default.Release,query:g.a.object}}}]);
//# sourceMappingURL=OrganizationReleaseOverview.js.map