(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{1540:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a.n(n),o=a(42),s=a(12),u=a.n(s),c=a(4),i=a.n(c),l=a(6),d=a.n(l),p=a(7),h=a.n(p),m=a(5),f=a.n(m),b=a(8),y=a.n(b),E=a(10),w=a(1),v=a.n(w),S=a(0),g=a.n(S),j=a(17),O=a.n(j),C=a(2),P=a(81),k=a(37),q=a(24),M=a(32),R=a(257),T=a(80),U=a(113),B=a(13),N=a.n(B),x=a(45),F=a(822),H=function(e){function t(e){var a;return i()(this,t),(a=h()(this,f()(t).call(this,e))).state={authenticators:null},a.api=new x.Client,a}return y()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this;this.api.requestPromise("/authenticators/").then(function(t){e.setState({authenticators:t||[]})}).catch(function(){})}},{key:"componentWillUnmount",value:function(){this.api.clear(),this.api=null}},{key:"render",value:function(){var e=this,t=this.state,a=t.className,n=t.authenticators;return n&&n.length?g.a.createElement("div",{className:a},n.map(function(t){var a=t.id,n=N()(t,["id"]);return"u2f"===a&&n.challenge?g.a.createElement(F.default,r()({key:a},e.props,{challengeData:n.challenge})):null})):null}}]),t}(g.a.Component),A=a(15);a.d(t,"SudoModal",function(){return D});var D=function(e){function t(){var e,a;i()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=h()(this,(e=f()(t)).call.apply(e,[this].concat(r)))).handleSuccess=function(){var e=a.props,t=e.closeModal,n=e.superuser,r=e.router,o=e.retryRequest;o?n?r.replace(u()({},r.getCurrentLocation(),{state:{forceUpdate:new Date}})):a.setState({busy:!0},function(){o().then(function(){a.setState({busy:!1},t)})}):t()},a.handleError=function(){a.setState({busy:!1,error:!0})},a.handleU2fTap=function(e){return a.setState({busy:!0}),a.props.api.requestPromise("/auth/",{method:"PUT",data:e}).then(function(){a.handleSuccess()}).catch(function(e){throw a.setState({busy:!1}),e})},a.state={error:!1,busy:!1},a}return y()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.closeModal,a=e.superuser,n=e.user,r=e.Header,s=e.Body;return g.a.createElement(g.a.Fragment,null,g.a.createElement(r,{closeButton:!0,onHide:t},Object(C.t)("Confirm Password to Continue")),g.a.createElement(s,null,n.hasPasswordAuth?g.a.createElement(g.a.Fragment,null,g.a.createElement(U.default,{className:Object(o.css)({marginBottom:Object(A.default)(1)})},a?Object(C.t)("You are attempting to access a resource that requires superuser access, please re-authenticate as a superuser."):Object(C.t)("Help us keep your account safe by confirming your identity.")),this.state.error&&g.a.createElement(P.default,{className:Object(o.css)({marginBottom:0}),type:"error",icon:"icon-circle-exclamation"},Object(C.t)("Incorrect password")),g.a.createElement(R.default,{apiMethod:"PUT",apiEndpoint:"/auth/",submitLabel:Object(C.t)("Confirm Password"),onSubmit:this.handleSubmit,onSubmitSuccess:this.handleSuccess,onSubmitError:this.handleError,hideErrors:!0,resetOnError:!0,hideFooter:!n.hasPasswordAuth},g.a.createElement(T.a,{autoFocus:!0,type:"password",inline:!1,label:Object(C.t)("Password"),flexibleControlStateSize:!0,name:"password",className:Object(o.css)({paddingLeft:0,paddingRight:0,borderBottom:"none"})}),g.a.createElement(H,{displayMode:"sudo",onTap:this.handleU2fTap}))):g.a.createElement("div",null,g.a.createElement(U.default,null,Object(C.t)("You will need to reauthenticate to continue.")),g.a.createElement(q.default,{priority:"primary",href:"/auth/login/?next=".concat(encodeURIComponent(location.pathname))},Object(C.t)("Continue")))))}}]),t}(g.a.Component);D.propTypes={api:v.a.object,closeModal:v.a.func.isRequired,retryRequest:v.a.func,superuser:v.a.bool,router:v.a.object,user:v.a.object,Header:v.a.oneOfType([v.a.func,v.a.node]).isRequired,Body:v.a.oneOfType([v.a.func,v.a.node]).isRequired};var L=O()({displayName:"SudoModalContainer",mixins:[k.default],render:function(){var e=M.default.get("user");return g.a.createElement(D,r()({},this.props,{user:e,api:this.api}))}});t.default=Object(E.withRouter)(L)}}]);
//# sourceMappingURL=SudoModal.js.map