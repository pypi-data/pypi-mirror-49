(function(e){function t(t){for(var i,a,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)a=s[d],r[a]&&f.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},r={index:0},o=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("df31")},"01bd":function(e,t,n){"use strict";var i=n("b954"),r=n.n(i);r.a},"0372":function(e,t,n){"use strict";var i=n("18e4"),r=n.n(i);r.a},"0c25":function(e,t,n){"use strict";var i=n("d9c5"),r=n.n(i);r.a},"18e4":function(e,t,n){},"1f7a":function(e,t,n){"use strict";var i=n("b38b"),r=n.n(i);r.a},2567:function(e,t,n){},2744:function(e,t,n){"use strict";var i=n("3729"),r=n.n(i);r.a},3729:function(e,t,n){},4230:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i="/admin/api",r={accountsList:i+"/accounts",createAccountID:i+"/account/create_id",addAccount:i+"/accounts/add",addAccountName:i+"/accounts/add",deleteAccount:i+"/accounts/delete",account:i+"/account",goCreateAppUrl:i+"/go_create_app",goGetCode:i+"/go_get_code",stylizes:i+"/stylizes",uploadFile:i+"/uploadFile"}},7008:function(e,t,n){"use strict";var i=n("8f5c"),r=n.n(i);r.a},7192:function(e,t,n){"use strict";var i=n("2567"),r=n.n(i);r.a},"7fee":function(e,t,n){"use strict";var i=n("946c"),r=n.n(i);r.a},"8f5c":function(e,t,n){},"946c":function(e,t,n){},a5f1:function(e,t,n){"use strict";var i=n("dc15"),r=n.n(i);r.a},a8d4:function(e,t,n){"use strict";var i=n("d005"),r=n.n(i);r.a},b38b:function(e,t,n){},b954:function(e,t,n){},d005:function(e,t,n){},d9c5:function(e,t,n){},dc15:function(e,t,n){},df31:function(e,t,n){"use strict";n.r(t);n("14c6"),n("08c1"),n("4842"),n("d9fc");var i=n("a026"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"desktop full"},[e._l(e.users,function(t){return n("user-icon",{key:t.id,attrs:{user:t},on:{dblclick:function(n){return e.createRootWindow(t)}}})}),e._l(e.windows,function(t,i){return n("window",{key:i,attrs:{id:i,user:t.user,file:t.file,z:t.z},on:{createWindow:e.createWindow,close:e.closeWindow,focus:e.setTop,contextmenu:e.contextmenu}})}),n("contextmenu",{attrs:{x:e.menu.x,y:e.menu.y,file:e.menu.file},model:{value:e.menu.show,callback:function(t){e.$set(e.menu,"show",t)},expression:"menu.show"}})],2)},o=[],a=(n("7f7f"),n("96cf"),n("3b8d")),s=(n("ac6a"),n("6b54"),""),c={accounts:s+"/accounts",loadFile:s+"/path"},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"window",class:{active:e.$store.state.activeID===e.id,dragging:e.dragging},style:{"z-index":e.z},attrs:{tabindex:e.z},on:{focus:e.focus,blur:e.blur}},[n("div",{staticClass:"window--head"},[n("div",{staticClass:"name"},[e._v(" "+e._s(e.current.name))]),n("div",{staticClass:"controller",staticStyle:{"margin-right":"10px"}},[n("svg",{staticClass:"icon",class:{disabled:e.loading},attrs:{"aria-hidden":"true"},on:{click:function(t){return e.load(!0)}}},[n("use",{attrs:{"xlink:href":"#py_shuaxin"}})]),n("svg",{staticClass:"icon",class:{disabled:e.loading||e.historyIndex<=0},attrs:{"aria-hidden":"true"},on:{click:function(t){return e.go()}}},[n("use",{attrs:{"xlink:href":"#py_houtui"}})]),n("svg",{staticClass:"icon",class:{disabled:e.loading||e.historyIndex>=e.history.length-1},attrs:{"aria-hidden":"true"},on:{click:function(t){return e.go(1)}}},[n("use",{attrs:{"xlink:href":"#py_qianjin"}})])]),n("div",{staticClass:"controller"},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(t){return e.$emit("close",e.id)}}},[n("use",{attrs:{"xlink:href":"#py_guanbi"}})])])]),n("div",{staticClass:"window--path"},[e._v("\n        路径："+e._s(e.user.name)+e._s(e.current.path)+"\n    ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.dragging,expression:"!dragging"}],staticClass:"window--body",class:{loading:e.loading}},[e.loading?n("window-loading"):e._e(),[e.showFolder?[n("window-folder",{ref:"content",attrs:{user:e.user,id:e.id,file:e.current},on:{open:e.open,loadFinish:e.loadFinish}})]:e.showEditor?[n("window-editor",{ref:"content",attrs:{user:e.user,file:e.current},on:{loadFinish:e.loadFinish}})]:e.showViewer?[n("window-viewer",{ref:"content",attrs:{user:e.user,file:e.current},on:{loadFinish:e.loadFinish}})]:e.showPlayer?[n("window-player",{ref:"content",attrs:{user:e.user,file:e.current},on:{loadFinish:e.loadFinish}})]:e._e()]],2)])},l=[],d=(n("7514"),n("c5f6"),n("d225")),f=(n("ac4d"),n("8a81"),n("0d6d"),Object.freeze({Normal:Symbol("normal"),Image:Symbol("image"),Audio:Symbol("audio"),Video:Symbol("Video"),Text:Symbol("text"),Code:Symbol("Code"),Word:Symbol("word"),Excel:Symbol("excel"),PPT:Symbol("ppt"),Zip:Symbol("zip"),Folder:Symbol("folder"),PDF:Symbol("pdf")})),h=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],p=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],m=["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],v=["application/zip","application/x-7z-compressed","application/x-rar-compressed","application/x-tar","application/x-bzip","application/x-bzip2"];function g(e,t){for(var n=0;n<t.length;n++)if(-1!==e.lastIndexOf(t[n]))return!0;return!1}var w=[".py",".cs",".c",".htm",".js",".xml",".php",".jsp",".rb",".pl",".asp",".ini",".cg",".java",".as",".config",".hh",".hs",".css",".scss",".sass"],x=function e(t,n,i,r){Object(d["a"])(this,e),this.name=t,this.mimeType=i,i?-1!==i.indexOf("image/")?this.type=f.Image:-1!==i.indexOf("audio/")?this.type=f.Audio:-1!==i.indexOf("video/")?this.type=f.Video:g(t,w)?this.type=f.Code:-1!==h.indexOf(i)?this.type=f.Word:-1!==p.indexOf(i)?this.type=f.Excel:-1!==m.indexOf(i)?this.type=f.PPT:-1!==v.indexOf(i)?this.type=f.Zip:this.type="text/plain"===i?f.Text:"application/pdf"===i?f.PDF:f.Normal:this.type=f.Folder,this.path=n,this.thumbnail=r},b=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(d["a"])(this,e),this.id=t,this.name=n,this.lock=i},y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-editor-container"},[n("div",{staticClass:"text-editor"}),n("div",{staticClass:"saving",class:{show:e.saving}},[e._v("保存中")])])},_=[],C=(n("4917"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")}),k=[],O={name:"window-base-content",data:function(){return{loading:!1}},methods:{load:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],!this.loading){e.next=3;break}return e.abrupt("return");case 3:if(this.loading=!0,!this.loadContent){e.next=7;break}return e.next=7,this.loadContent(t);case 7:this.loading=!1,this.$emit("loadFinish");case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.load()}},j=O,I=n("2877"),F=Object(I["a"])(j,C,k,!1,null,"05f4ddb7",null),R=F.exports,z={extends:R,name:"window-editor",props:["id","user","file"],data:function(){return{$cm:null,saving:!1}},methods:{loadContent:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r,o,a,s,c,u,l,d=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]&&d[0],n=":"+this.file.path,e.next=4,this.$store.dispatch("load",{force:t,user:this.user,path:n});case 4:return i=e.sent,r=i.data,e.next=8,this.$http.get(r["@microsoft.graph.downloadUrl"]);case 8:o=e.sent,a=o.data,this.$cm.setValue(a.toString()),s=this.file.name.match(/.+\.([^.]+)$/),console.log("editor 1",s),s&&(l=CodeMirror.findModeByExtension(s[1]),l&&(c=l.mode,u=l.mime)),console.log("editor 2",c,u),c?(this.$cm.setOption("mode",u),CodeMirror.autoLoadMode(this.$cm,c)):this.$cm.setOption("mode","text/plain");case 16:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loading&&!this.saving){e.next=2;break}return e.abrupt("return");case 2:return this.saving=!0,e.next=5,this.$http({method:"post",url:"/admin/api/upload/"+this.user.id,params:{path:this.file.path,type:"text"},data:this.$cm.getValue()});case 5:this.saving=!1;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){CodeMirror.modeURL="https://cdn.bootcss.com/codemirror/5.48.0/mode/%N/%N.js",this.$cm=CodeMirror(this.$el.querySelector(".text-editor"),{lineNumbers:!0,extraKeys:{"Ctrl-S":this.save,"Cmd-S":this.save}})}},W=z,S=(n("0372"),Object(I["a"])(W,y,_,!1,null,null,null)),T=S.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image-viewer"},[e.loading?e._e():n("img",{attrs:{src:e.src,alt:"图片"}})])},M=[],P={extends:R,name:"window-viewer",props:["user","file"],data:function(){return{src:""}},methods:{loadContent:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,i,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=":"+this.file.path,e.next=3,this.$store.dispatch("load",{user:this.user,path:n,force:t});case 3:return i=e.sent,r=i.data,this.src=r["@microsoft.graph.downloadUrl"],o=new Image,o.src=this.src,e.next=10,new Promise(function(e){o.addEventListener("load",function(){e()}),setTimeout(function(){e()},1e4)});case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},D=P,A=(n("2744"),Object(I["a"])(D,E,M,!1,null,"1916bc7c",null)),V=A.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"player"})},L=[],U={extends:R,name:"window-player",props:["user","file"],data:function(){return{}},methods:{loadContent:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("player mounted"),n=":".concat(this.file.path),e.next=4,this.$store.dispatch("load",{user:this.user,path:n,force:t});case 4:i=e.sent,r=i.data,console.log("player",n,r),new DPlayer({container:this.$el,video:{url:r["@microsoft.graph.downloadUrl"]}});case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){this.load()}},X=U,Y=(n("1f7a"),Object(I["a"])(X,N,L,!1,null,"66043b1f",null)),Z=Y.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"folder",on:{dragover:function(e){e.preventDefault()},drop:function(t){return t.preventDefault(),e.drop(t)}}},e._l(e.files,function(t,i){return n("file-icon",{key:i,attrs:{file:t,id:e.id},on:{dblclick:e.open}})}),1)},B=[],J=(n("f386"),n("df7c")),G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file",on:{dblclick:function(t){return e.$emit("dblclick",e.file)},contextmenu:function(t){return t.preventDefault(),function(t){return e.$store.commit("showMenu",{e:t,id:e.id,file:e.file})}(t)}}},[e.image?n("div",{staticClass:"file-icon"},[n("img",{attrs:{src:e.file.thumbnail}})]):n("svg",{staticClass:"icon file-icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#"+e.icon}})]),n("div",{staticClass:"file-name"},[e._v(e._s(e.file.name))])])},H=[],K={props:{id:String,file:x},data:function(){return{image:null}},computed:{icon:function(){switch(this.file.type){case f.Folder:return Icons["folder"];case f.Audio:return Icons["audio"];case f.Video:return Icons["video"];case f.Image:return Icons["image"];case f.Text:return Icons["text"];case f.Zip:return Icons["zip"];case f.PDF:return Icons["pdf"];case f.Word:return Icons["word"];case f.Excel:return Icons["excel"];case f.PPT:return Icons["ppt"];case f.Code:return Icons["code"];default:return Icons["default"]}}},mounted:function(){var e=this;if(this.file.type===f.Image){var t=new Image;t.src=this.file.thumbnail,t.addEventListener("load",function(){e.image=e.file.thumbnail})}}},Q=K,ee=(n("7fee"),Object(I["a"])(Q,G,H,!1,null,"76416f60",null)),te=ee.exports,ne={extends:R,name:"window-folder",components:{FileIcon:te},props:["user","file","id"],data:function(){return{loading:!1,files:[],uploads:[]}},watch:{file:function(){this.load()}},methods:{drop:function(e){if(console.log("drop",e),e.dataTransfer.items){for(var t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind){var n=e.dataTransfer.items[t].getAsFile();console.log("1 ... file["+t+"].name = "+n.name)}}else for(var i=0;i<e.dataTransfer.files.length;i++)console.log("2 ... file["+i+"].name = "+e.dataTransfer.files[i].name)},open:function(e){this.$emit("open",e)},loadContent:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r,o=this,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],this.uploads.length=0,n="","/"!==this.file.path&&(n=":".concat(this.file.path,":")),n+="/children?expand=thumbnails",e.next=7,this.$store.dispatch("load",{user:this.user,path:n,force:t});case 7:i=e.sent,r=i.data,this.files=r.value.map(function(e){var t=Object(J["join"])(o.file.path,e.name),n=e.file?e.file.mimeType:null,i=new x(e.name,t,n);return i.type===f.Image&&(i.thumbnail=e.thumbnails[0]["small"]["url"]),i});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},ie=ne,re=(n("7192"),Object(I["a"])(ie,q,B,!1,null,"e37e6a58",null)),oe=re.exports,ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loading"},[e._v("\n    读取中\n")])},se=[],ce={name:"window-loading"},ue=ce,le=(n("01bd"),Object(I["a"])(ue,ae,se,!1,null,"09339c0c",null)),de=le.exports,fe={components:{WindowLoading:de,WindowFolder:oe,WindowPlayer:Z,WindowViewer:V,WindowEditor:T},props:{id:String,user:b,file:x,z:Number},data:function(){return{loading:!1,dragging:!1,zIndex:0,active:!0,history:[],historyIndex:0}},methods:{focus:function(){this.$store.state.activeID!==this.id&&this.$emit("focus",this.id)},blur:function(){},loadFinish:function(){this.loading=!1},load:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n=this,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]&&i[0],this.loading=!0,this.$nextTick(function(){n.$refs["content"].load(t)});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),open:function(e){this.loading||(this.history.splice(this.historyIndex+1),this.append(e),this.historyIndex++,this.load())},go:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(!this.loading){var t=this.historyIndex+e;t>=0&&t<this.history.length&&(this.historyIndex+=e)}},append:function(e){this.history.push(e)}},computed:{current:function(){return this.history[this.historyIndex]},showFolder:function(){return this.current.type===f.Folder},showPlayer:function(){return-1!==[f.Video,f.Audio].indexOf(this.current.type)},showEditor:function(){return-1!==[f.Code,f.Text].indexOf(this.current.type)},showViewer:function(){return-1!==[f.Image].indexOf(this.current.type)}},beforeMount:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.append(this.file),e.next=3,this.load();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),watch:{},mounted:function(){var e=this,t=$(this.$el),n=t.find(".window--head");t.mousedown(function(){e.focus()}).draggable({handle:n,cancel:".controller",start:function(){e.focus(),e.dragging=!0},stop:function(){e.dragging=!1}}).resizable({minHeight:150,minWidth:200,start:function(){},stop:function(){e.dragging=!1}})}},he=fe,pe=(n("a8d4"),Object(I["a"])(he,u,l,!1,null,"33c2f414",null)),me=pe.exports,ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user",on:{dblclick:function(t){return e.$emit("dblclick",e.user)}}},[n("div",{staticClass:"user-icon"},[n("svg",{staticClass:"icon main-icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#"+e.icon}})]),e.user.lock?n("svg",{staticClass:"icon lock-icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#py_lock"}})]):e._e()]),n("div",{staticClass:"user-name"},[e._v(e._s(e.user.name))])])},ge=[],we={props:{user:b},data:function(){return{icon:Icons["user"]}}},xe=we,be=(n("7008"),Object(I["a"])(xe,ve,ge,!1,null,"c4edb55a",null)),ye=be.exports,_e=(n("e008"),n("2ef0")),$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.value?n("div",{staticClass:"contextmenu full",style:{"z-index":e.$store.state.z},on:{click:e.hide,contextmenu:function(t){return t.preventDefault(),e.hide(t)}}},[n("div",{staticClass:"contextmenu-list",style:{left:e.offsetX,top:e.offsetY}},e._l(e.list,function(t,i){return n("div",{key:i,on:{click:t.event}},[e._v(e._s(t.name))])}),0)]):e._e()},Ce=[],ke={name:"contextmenu",props:["value","x","y","id","file"],data:function(){return{list:[]}},methods:{hide:function(){this.$emit("input",!1)}},computed:{offsetX:function(){return this.x+5+"px"},offsetY:function(){return this.y+5+"px"}},watch:{file:function(){var e=this;this.list.length=0,[f.Folder,f.Text,f.Code,f.Image,f.Video,f.Audio].indexOf(this.file.type)>-1&&this.list.push({name:"新窗口打开",event:function(){e.$store.commit("createWindowFromMenu",{file:e.file})}}),this.file.type!==f.Folder&&this.list.push({name:"下载文件",event:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:alert("下载文件");case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()})}}},Oe=ke,je=(n("a5f1"),Object(I["a"])(Oe,$e,Ce,!1,null,"c0295bec",null)),Ie=je.exports,Fe={components:{Contextmenu:Ie,UserIcon:ye,Window:me},data:function(){return{defaultProps:{children:"children",label:"label"},users:[],windows:{},menu:{show:!1,x:0,y:0,id:null,file:null}}},methods:{createRootWindow:function(e){this.createWindow(e,new x("/","/"))},createWindow:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Date.now().toString(32);this.$set(this.windows,i,{id:i,user:e,file:t,z:this.$store.state.z}),this.$store.state.z++,n&&(this.$store.state.activeID=i)},createWindowFromMenu:function(e){console.log("createWindowFromMenu",e),this.createWindow(this.windows[this.menu.id].user,e,!0)},clearWindow:function(){this.windows={}},closeWindow:function(e){console.log("关闭窗口",e),this.$delete(this.windows,e)},setTop:function(e){console.log("setTop",e),this.$store.state.activeID=e,this.windows[e].z=this.$store.state.z;var t=Object(_e["sortBy"])(this.windows,"z");t.forEach(function(e){var n=t.indexOf(e);e.z=n+1}),this.$store.state.z=t.length+1},contextmenu:function(e,t,n){console.log("右键",e,t,n),this.menu.show=!0,this.menu.x=e.clientX,this.menu.y=e.clientY,this.menu.file=n,this.menu.id=t}},beforeMount:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.state.menuCallback=this.contextmenu,this.$store.state.createWindowFromMenu=this.createWindowFromMenu,e.next=4,this.$store.dispatch("api",{url:c.accounts});case 4:for(n in t=e.sent,this.users.length=0,t.data)i=t.data[n],r=new b(i.id,i.name),this.users.push(r);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},Re=Fe,ze=(n("0c25"),Object(I["a"])(Re,r,o,!1,null,"85ba5150",null)),We=ze.exports,Se=n("2f62"),Te=n("4230"),Ee=n("bc3a");i["default"].use(Se["a"]);var Me=new Se["a"].Store({state:{z:1,activeID:null,error:null,cache:{},menuCallback:null,createWindowFromMenu:null},mutations:{setError:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"错误";e.error={title:n,content:t.data}},setCache:function(e,t){var n=t.url,i=t.res;e.cache[n]=i},showMenu:function(e,t){var n=t.e,i=t.id,r=t.file;e.menuCallback(n,i,r)},createWindowFromMenu:function(e,t){var n=t.file,i=t.active,r=void 0!==i&&i;e.createWindowFromMenu(n,r)}},actions:{api:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee(n);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),t.commit("setError",e.t0.response),e.abrupt("return",null);case 10:case"end":return e.stop()}},e,null,[[0,6]])}));function t(t,n){return e.apply(this,arguments)}return t}(),load:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var i,r,o,a,s,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.user,r=n.path,o=n.force,a=void 0!==o&&o,s=c.loadFile+"/"+i.id+"?path="+r,console.log("load",s,a),!t.state.cache[s]||a){e.next=5;break}return e.abrupt("return",t.state.cache[s]);case 5:return e.next=7,Ee.get(s);case 7:return u=e.sent,200===u.status&&t.commit("setCache",{url:s,res:u}),e.abrupt("return",u);case 10:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),uploadText:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var i,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=n.user,r=n.path,o=n.content,e.next=3,Ee.post({method:"post",url:Te["a"].uploadFile+"/"+i.id,params:{path:r,type:"text"},data:o});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),uploadFiles:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var i,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=n.user,r=n.path,o=n.content,e.next=3,Ee({method:"post",url:Te["a"].uploadFile+"/"+i.id,params:{path:r,type:"binary"},data:o});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()}});i["default"].config.productionTip=!1,i["default"].prototype.$http=n("bc3a"),new i["default"]({store:Me,render:function(e){return e(We)}}).$mount("#app")},e008:function(e,t,n){}});