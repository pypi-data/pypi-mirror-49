(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1620:function(e,t,a){"use strict";var n=a(26),i=a.n(n),s=a(44),r=a.n(s),l=a(1),o=a.n(l),c=a(0),u=a.n(c),h=a(17),d=a.n(h),m=a(37),f=a(347),p=a(53),b=a(33);t.a=d()({displayName:"internalStatChart",propTypes:{since:o.a.number.isRequired,resolution:o.a.string.isRequired,stat:o.a.string.isRequired,label:o.a.string,height:o.a.number},mixins:[m.default],getDefaultProps:function(){return{height:150}},getInitialState:function(){return{error:!1,loading:!0,data:null}},componentWillMount:function(){this.fetchData()},componentWillReceiveProps:function(e){r()(e,this.props)||this.setState({loading:!0},this.fetchData)},shouldComponentUpdate:function(e,t){return this.state.loading!==t.loading},fetchData:function(){var e=this;this.api.request("/internal/stats/",{method:"GET",data:{since:this.props.since,resolution:this.props.resolution,key:this.props.stat},success:function(t){e.setState({data:t,loading:!1,error:!1})},error:function(t){e.setState({error:!0})}})},getChartPoints:function(){return this.state.data.map(function(e){var t=i()(e,2);return{x:t[0],y:t[1]}})},render:function(){return this.state.loading?u.a.createElement(b.default,null):this.state.error?u.a.createElement(p.default,{onRetry:this.fetchData}):u.a.createElement(f.default,{points:this.getChartPoints(),className:"standard-barchart",label:this.props.label,height:this.props.height})}})},2317:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return S});var n=a(50),i=a.n(n),s=a(12),r=a.n(s),l=a(4),o=a.n(l),c=a(6),u=a.n(c),h=a(7),d=a.n(h),m=a(5),f=a.n(m),p=a(96),b=a.n(p),g=a(8),v=a.n(g),E=a(0),k=a.n(E),w=a(153),y=a(1620),N=a(41),S=function(e){function t(){var e,a;o()(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=d()(this,(e=f()(t)).call.apply(e,[this].concat(i)))).changeTask=function(e){a.setState({activeTask:e})},a}return v()(t,e),u()(t,[{key:"getDefaultState",value:function(){return r()({},b()(f()(t.prototype),"getDefaultState",this).call(this),{timeWindow:"1w",since:(new Date).getTime()/1e3-604800,resolution:"1h",taskName:null})}},{key:"getEndpoints",value:function(){return[["taskList","/internal/queue/tasks/"]]}},{key:"changeWindow",value:function(e){var t;if("1h"===e)t=3600;else if("1d"===e)t=86400;else{if("1w"!==e)throw new Error("Invalid time window");t=604800}this.setState({since:(new Date).getTime()/1e3-t,timeWindow:e})}},{key:"renderBody",value:function(){var e,t=this,a=this.state,n=a.activeTask,s=a.taskList;return k.a.createElement("div",null,k.a.createElement("div",{className:"btn-group pull-right"},["1h","1d","1w"].map(function(e){return k.a.createElement("a",{className:"btn btn-sm ".concat(e==t.state.timeWindow?"btn-primary":"btn-default"),onClick:function(){return t.changeWindow(e)},key:e},e)})),k.a.createElement("h3",{className:"no-border"},"Queue Overview"),k.a.createElement("div",{className:"box"},k.a.createElement("div",{className:"box-header"},k.a.createElement("h3",null,"Global Throughput")),k.a.createElement(y.a,{since:this.state.since,resolution:this.state.resolution,stat:"jobs.all.started",label:"jobs started"})),k.a.createElement("h3",{className:"no-border"},"Task Details"),k.a.createElement("div",null,k.a.createElement("div",null,k.a.createElement("label",null,"Show details for task:"),k.a.createElement(N.SelectField,{name:"task",onChange:this.changeTask,value:n,allowClear:!0,choices:(e=[""]).concat.apply(e,i()(s)).map(function(e){return[e,e]})})),n?k.a.createElement("div",null,k.a.createElement("div",{className:"box box-mini",key:"jobs.started"},k.a.createElement("div",{className:"box-header"},"Jobs Started ",k.a.createElement("small",null,n)),k.a.createElement(y.a,{since:this.state.since,resolution:this.state.resolution,stat:"jobs.started.".concat(this.state.activeTask),label:"jobs",height:100})),k.a.createElement("div",{className:"box box-mini",key:"jobs.finished"},k.a.createElement("div",{className:"box-header"},"Jobs Finished ",k.a.createElement("small",null,n)),k.a.createElement(y.a,{since:this.state.since,resolution:this.state.resolution,stat:"jobs.finished.".concat(this.state.activeTask),label:"jobs",height:100}))):null))}}]),t}(w.default)}}]);
//# sourceMappingURL=AdminQueue.js.map