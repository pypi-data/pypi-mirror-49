# For distributed tests, call tox with `-n NUMBER` arguments
# Use `setup.cfg` as single-source of truth for dependency specification

[tox]
minversion = 3.8
envlist = default
requires =
    # The following tox extension allows faster virtualenv management
    tox-pip-extensions
    # TODO: the `tox-env` extension can replace virtualenv with builtin venv,
    # however, tox-pip-extensions seems to not be compatible with it.
tox_pip_extensions_ext_venv_update = true

[testenv]
setenv = TOXINIDIR = {toxinidir}
passenv =
    HOME
commands =
    default: py.test -k "not system" {posargs}
    system: py.test -k system {posargs}
    all: py.test -vv {posargs}
extras =
    all
    testing
