(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{2367:function(e,t,a){"use strict";a.r(t);var r=a(12),n=a.n(r),s=a(44),o=a.n(s),i=a(177),c=a.n(i),l=a(1),p=a.n(l),u=a(0),m=a.n(u),h=a(17),d=a.n(h),y=a(10),v=a(97),f=a.n(v),g=a(84),E=a.n(g),j=a(36),q=a(9),b=a(37),S=a(53),w=a(33),L=a(107),I=a(85),R=a(595),N=a(2),k=a(25),x=a(145),O=a(189),T=a(188),z=a(1865),D=a(4),P=a.n(D),_=a(6),B=a.n(_),H=a(7),M=a.n(H),Q=a(5),J=a.n(Q),W=a(8),C=a.n(W),A=function(e){function t(){return P()(this,t),M()(this,J()(t).apply(this,arguments))}return C()(t,e),B()(t,[{key:"render",value:function(){return m.a.createElement(x.a,null,m.a.createElement("p",null,this.props.message),m.a.createElement("p",null,m.a.createElement("a",{href:"https://docs.sentry.io/learn/releases/"},Object(N.t)("Learn how to integrate Release Tracking"))))}}]),t}(m.a.Component);A.propTypes={message:p.a.string.isRequired};var F=A,G=a(1866),K=a(1856),U=a(1863);a.d(t,"ProjectReleases",function(){return V});var V=d()({displayName:"ProjectReleases",propTypes:{setProjectNavSection:p.a.func,environment:q.default.Environment},contextTypes:{organization:q.default.Organization,project:q.default.Project},mixins:[b.default],getInitialState:function(){return{releaseList:[],loading:!0,error:!1,query:this.props.location.query.query||"",pageLinks:"",environment:this.props.environment}},componentWillMount:function(){var e=this.props,t=e.location,a=e.params.orgId;new Set(this.context.organization.features).has("sentry10")&&y.browserHistory.replace("/organizations/".concat(a,"/releases/").concat(t.search)),this.props.setProjectNavSection("releases"),this.fetchData()},componentDidMount:function(){var e=this.context,t=e.organization,a=e.project;Object(j.b)("releases.tab_viewed",{org_id:parseInt(t.id,10),project_id:parseInt(a.id,10)})},componentWillReceiveProps:function(e){if(!o()(c()(E.a.parse(e.location.search),"environment"),c()(E.a.parse(this.props.location.search),"environment"))){var t=e.location.query;this.setState({query:t.query},this.fetchData)}e.environment!==this.props.environment&&this.setState({environment:e.environment},this.fetchData)},onSearch:function(e){var t={};""!==e&&(t.query=e);var a=this.props.params,r=a.orgId,n=a.projectId;y.browserHistory.push({pathname:"/".concat(r,"/").concat(n,"/releases/"),query:t})},fetchData:function(){var e=this;this.setState({loading:!0,error:!1});var t=this.props.params,a=t.orgId,r=t.projectId,s="/projects/".concat(a,"/").concat(r,"/releases/"),o=n()({},this.props.location.query,{per_page:20,query:this.state.query});this.state.environment?o.environment=this.state.environment.name:delete o.environment,this.api.request(s,{query:o,success:function(t,a,r){e.setState({error:!1,loading:!1,releaseList:t,pageLinks:r.getResponseHeader("Link")})},error:function(){e.setState({error:!0,loading:!1})}})},renderStreamBody:function(){var e=this.props.params;return this.state.loading?this.renderLoading():this.state.error?m.a.createElement(S.default,{onRetry:this.fetchData}):this.state.releaseList.length>0?m.a.createElement("div",null,m.a.createElement(U.a,{project:this.context.project}),m.a.createElement(G.a,{orgId:e.orgId,projectId:e.projectId,releaseList:this.state.releaseList})):this.state.query&&""!==this.state.query?this.renderNoQueryResults():this.renderEmpty()},renderLoading:function(){return m.a.createElement(w.default,null)},renderNoQueryResults:function(){return m.a.createElement(x.a,null,m.a.createElement("p",null,Object(N.t)("Sorry, no releases match your filters.")))},renderEmpty:function(){var e=this.state.environment,t=this.context.project,a=t.latestRelease,r=e?Object(N.tct)("There don't seem to be any releases in your [env] environment yet",{env:e.displayName}):Object(N.t)("There don't seem to be any releases yet.");return null===a?m.a.createElement(z.a,null):m.a.createElement("div",null,m.a.createElement(U.a,{project:t}),m.a.createElement(F,{message:r}))},render:function(){var e=this.context,t=e.project.slug,a=e.organization.name;return m.a.createElement(f.a,{title:"Releases - ".concat(t," - ").concat(a," - Sentry")},m.a.createElement("div",{className:"ref-project-releases"},m.a.createElement(I.default,{target:"releases",type:"invisible"}),m.a.createElement("div",{className:"row",style:{marginBottom:"5px"}},m.a.createElement("div",{className:"col-sm-7"},m.a.createElement(T.a,{withMargins:!0},Object(N.t)("Releases"))),m.a.createElement("div",{className:"col-sm-5 release-search",style:{marginTop:"5px"}},m.a.createElement(R.a,{defaultQuery:"",placeholder:Object(N.t)("Search for a release"),query:this.state.query,onSearch:this.onSearch}))),m.a.createElement(k.a,null,m.a.createElement(K.a,null),m.a.createElement(k.c,null,this.renderStreamBody())),m.a.createElement(L.default,{pageLinks:this.state.pageLinks})))}});t.default=Object(O.a)(V)}}]);
//# sourceMappingURL=ProjectReleases.js.map