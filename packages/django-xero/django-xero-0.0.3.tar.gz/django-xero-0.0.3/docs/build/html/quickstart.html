

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quickstart &mdash; django-xero 0.0.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Supported Platforms &amp; Requirements" href="requirements.html" />
    <link rel="prev" title="Django-Xero" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> django-xero
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Supported Platforms &amp; Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Module Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Credits &amp; License</a></li>
<li class="toctree-l1"><a class="reference internal" href="issues.html">Issues</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">django-xero</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>There is a <code class="docutils literal notranslate"><span class="pre">&#64;xero_required</span></code> decorator for views, which will automatically
check if an active Xero session is present. If not, it will redirect to an interstitial page
asking the user to do the authentication dance. You can control that page by creating a
custom template <code class="docutils literal notranslate"><span class="pre">xero/interstitial.html</span></code> (make sure it has a link to <code class="docutils literal notranslate"><span class="pre">xero-auth-start</span></code> somewhere).</p>
<p>Once authorized, in your view you will get a <cite>.xerouser</cite> attribute which you can use to do stuff like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">djxero.decorators</span> <span class="k">import</span> <span class="n">xero_required</span>

<span class="nd">@login_required</span>
<span class="nd">@xero_required</span>
<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">xerouser</span><span class="o">.</span><span class="n">client</span>
    <span class="n">contacts</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">contacts</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>That client is a preconfigured <code class="docutils literal notranslate"><span class="pre">xero.Xero</span></code> object from <a class="reference external" href="https://github.com/freakboy3742/pyxero">pyxero</a>.</p>
<p>Whenever you want to manually trigger authentication with Xero, just redirect to the view
<code class="docutils literal notranslate"><span class="pre">xero-auth-start</span></code> and this package will do the rest.
The view accepts an optional <code class="docutils literal notranslate"><span class="pre">next</span></code> parameter to control where the user will land
on successful authentication; otherwise it will redirect to <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p>
<p>Xero sessions last for 30 minutes, but if you want to end them earlier, POST to
the view <code class="docutils literal notranslate"><span class="pre">xero-logout</span></code> (again with an optional <code class="docutils literal notranslate"><span class="pre">next</span></code>).</p>
<p>Some details will be exposed in <code class="docutils literal notranslate"><span class="pre">User</span></code> instances under <code class="docutils literal notranslate"><span class="pre">.xerouser</span></code>, but Xero mechanisms
are such that it’s all pretty meaningless - there is currently no way to know anything about the user
from the Xero session alone. For that reason, note that <strong>you must have some other registration mechanism to
create a regular Django user first</strong> (e.g. regular login page with some other auth system); this package only extends
that <code class="docutils literal notranslate"><span class="pre">User</span></code> instance to attach a temporary Xero session.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="requirements.html" class="btn btn-neutral float-right" title="Supported Platforms &amp; Requirements" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Django-Xero" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Giacomo Lacava

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>