<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Worklists Tab &#8212; Products.DCWorkflow 2.4.0.dev0 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.4.0.dev0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Products.DCWorkflow Changelog" href="../changes.html" />
    <link rel="prev" title="Variables Tab" href="Variables.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../changes.html" title="Products.DCWorkflow Changelog"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Variables.html" title="Variables Tab"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Products.DCWorkflow 2.4.0.dev0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">DCWorkflow Narrative Documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="worklists-tab">
<h1>Worklists Tab<a class="headerlink" href="#worklists-tab" title="Permalink to this headline">Â¶</a></h1>
<p>Work lists are a way to make people aware of tasks they are required to
perform, usually reviewing content in the publishing context. Work lists are
implemented as a catalog query that puts an action in the actions box when
there are some tasks the member needs to perform.</p>
<p>From the work lists tab it&#8217;s possible to add new work lists, and rename and
delete existing work lists. The list of existing work lists also displays a
short summary of each work list&#8217;s description, the catalog query it uses, and
any guard conditions. You can access the details of each work list by
clicking on them.</p>
<p>In each work list&#8217;s properties tab, you can set the description of the work
list, and it&#8217;s various behaviour defining properties. The &#8220;Catalog variable
matches&#8221; field sets the state that is work list matches. The &#8220;variable_name =
&#8221; text to the left of the text box is the name of the state variable defined
at the bottom of the variables tab. The values can be set to a number of
possible matches separated by semicolons. [<strong>Note:</strong> CVS feature. There&#8217;s
more in doc/worklists.stx, but I&#8217;m not sure I understand the implications]</p>
<p>The action box fields are discussed in more detail in the Action Box section.
In this case, the url that the work list links to should probably implement a
search page with a catalog query similar to the &#8220;Catalog variable matches&#8221;,
otherwise the difference between the number of items waiting and the items
reported in the search will be confusing.</p>
<p>[<strong>Note:</strong> What we <em>really</em> need from the work list is a way to define full
catalog queries for the action, and a new action box variable that urlquotes
that query so it can be passed straight to the search page. This way, the
work list count and the number of items on the search page will be the same
as they are derived from the same query string, defined in one place.</p>
<p>Reply from Shane: work lists already exercise the catalog too heavily, and
most people don&#8217;t understand their purpose. Expanding their capabilities
further could impact performance. I think perhaps the UI should instead
display work lists on a user&#8217;s home page rather than the actions box, which
would open up new possibilities.]</p>
<p>The guard fields are described in detail in the <a class="reference internal" href="Guards.html"><span class="doc">Guards</span></a> section. It&#8217;s
probably better to avoid using permission and role guards, as they&#8217;re not
really necessary - a user will see a work list action only if they can see
content in that particular state, so the state guards are usually sufficient.
In addition, as the work lists are in the &#8216;global&#8217; actions category by
default, and global actions are evaluated in the context of the site root,
local roles like Owner or locally set Reviewer roles, and the permissions
they grant, will not apply. [<em>Note:</em> Does anyone know a good reason why work
lists appear in the global box rather than in the workflow box? This
particular problem should vanish if they are moved there.]</p>
<p>Whether a work list action appears in the action box, and the number of items
in the work list depends on several factors:</p>
<ul class="simple">
<li>The state that the work list is generated for</li>
<li>The name of the state variable used to indicate the current state of an
object</li>
<li>Whether the user can view content which is in that state</li>
</ul>
<p>This has some unexpected consequences:</p>
<ul class="simple">
<li>If you have several workflow that use the same state variable, and similar
state names, and each has a work list on, say, the &#8216;pending&#8217; state, then both
work lists will appear in the action box, and the number of items in each
will be the total of all the content in a &#8216;pending&#8217; state, regardless of
which workflow manages that content (except that if the work list action
entries are exactly the same text, the action tool will filter out the
duplicate).</li>
<li>If each workflow manages the permissions on content in the &#8216;pending&#8217; state
differently, by, say, using two different reviewer roles, then users who have
one role and not the other will see a single work list entry with the right
number of items, but users with both roles will see the same as above.</li>
</ul>
<p>So there are a few tricks to getting the work lists to do the kinds of things
we want.</p>
<p>If you have several similar workflows, such as a standard one, and a couple
of specialized ones for particular content, and you want to have one reviewer
role for the lot, then you should set up just one work list in the standard
workflow for the states that need them, and leave the other workflow to rely
on that work list.</p>
<p>If you have a workflow that uses a different reviewer role than other
workflows, and consequently, you want it to have it&#8217;s own separate work
lists, you have two choices. One is to use state names that are unique to
each workflow, while the second is to use state variable name that is unique
each workflow. The second option is obviously a lot easier, however, if you
change the name of the state variable when there exists content that is using
this workflow, they will immediately loose there workflow state and default
to the initial state. In addition, you&#8217;ll need to add a field index for the
new state variable name in the portal_catalog tool, by hand.</p>
<p>[Note: In the first instance, we could add an action box name field to each
state so that nicely formated names appear in the action box for things like
&#8220;Published (yet to be effective)&#8221; rather than &#8220;published_not_yet_effective&#8221;,
and so we can lie about the names to make them unique, so that
&#8220;foo_workflow_pending&#8221; looks like &#8220;Pending&#8221;. In the second instance, I see no
reason why the state variable name change action shouldn&#8217;t migrate the value
of the old state variable to the new for all the content managed by this
workflow, and it could probably automatically add indexes for new state
variable names if they don&#8217;t already exists (and perhaps remove indexes for
state variable names not used elsewhere).</p>
<p>While we&#8217;re thinking about ways to make sweeping workflow changes less
painful, there are a couple of changes that could be made to the code that
changes content type to workflow mappings: if a content to workflow mapping
has changed, then, for each instance of that content type, attempt to keep
the state variable the same unless that state doesn&#8217;t exist in the new
workflow, then evaluate any automatic transitions on that state. This way
it&#8217;s possible to migrate between workflows by ensuring that states with the
same name have the same semantics, or if they don&#8217;t exists in the new
workflow, we can create placeholder states with an automatic transition to
the state we want to be in.]</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="Variables.html"
                        title="previous chapter">Variables Tab</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../changes.html"
                        title="next chapter">Products.DCWorkflow Changelog</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/narrative/Worklists.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../changes.html" title="Products.DCWorkflow Changelog"
             >next</a> |</li>
        <li class="right" >
          <a href="Variables.html" title="Variables Tab"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Products.DCWorkflow 2.4.0.dev0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >DCWorkflow Narrative Documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, CMF Developers.
      Last updated on May 04, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.5.
    </div>
  </body>
</html>