[sadm]
env = network.fail2ban

[sadmenv]
target.dir = tdata/deploy.target/plugin/${sadm:env}

[sync]
testing.network.fail2ban = assets/testing.txt testing.txt

[os.pkg]
update = no

[network.fail2ban]
jail.dir = network/fail2ban/etc/jail.d
jail.enable = testing

[_sadmtest.check]
builddir.file.testing_jail = /etc/fail2ban/jail.d/testing.conf 8dc558bea04634032a81969039d6c446

[_sadmtest.mock.deploy]
cmd.call =
	0; /usr/bin/dpkg-query -s less >/dev/null 2>/dev/null
	0; /usr/bin/dpkg-query -s vim-tiny >/dev/null 2>/dev/null
	0; /usr/bin/dpkg-query -s sudo >/dev/null 2>/dev/null
	0; /usr/bin/dpkg-query -s rsync >/dev/null 2>/dev/null
	0; /usr/bin/dpkg-query -s python3 >/dev/null 2>/dev/null
	0; /usr/bin/dpkg-query -s whois >/dev/null 2>/dev/null
	0; /usr/bin/dpkg-query -s python3-pyinotify >/dev/null 2>/dev/null
	0; /usr/bin/dpkg-query -s python3-systemd >/dev/null 2>/dev/null
	0; /usr/bin/dpkg-query -s fail2ban >/dev/null 2>/dev/null
	1; /usr/bin/dpkg-query -s nano >/dev/null 2>/dev/null
cmd.check_call =
	0; service fail2ban restart
	0; service fail2ban status
