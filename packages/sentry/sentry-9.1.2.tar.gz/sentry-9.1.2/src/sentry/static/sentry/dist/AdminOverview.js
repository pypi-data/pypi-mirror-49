(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{2362:function(e,t,a){"use strict";a.r(t);var s=a(4),n=a.n(s),r=a(6),i=a.n(r),o=a(7),l=a.n(o),c=a(5),u=a.n(c),p=a(8),d=a.n(p),h=a(0),f=a.n(h),v=a(2),m=a(153),x=a(1),g=a.n(x),b=a(17),w=a.n(b),E=a(37),D=a(259),S=a(53),y=a(33),R=w()({displayName:"apiChart",propTypes:{since:g.a.number.isRequired,resolution:g.a.string.isRequired},mixins:[E.default],getInitialState:function(){return{error:!1,loading:!0,rawData:{"client-api.all-versions.responses.2xx":null,"client-api.all-versions.responses.4xx":null,"client-api.all-versions.responses.5xx":null}}},componentWillMount:function(){this.fetchData()},componentWillReceiveProps:function(e){this.props.since!==e.since&&this.setState(this.getInitialState(),this.fetchData)},fetchData:function(){var e=this;["client-api.all-versions.responses.2xx","client-api.all-versions.responses.4xx","client-api.all-versions.responses.5xx"].forEach(function(t){e.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(a){e.setState(function(e){var s=e.rawData;return s[t]=a,{rawData:s}},e.requestFinished)},error:function(t){e.setState({error:!0})}})})},requestFinished:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData(),e["client-api.all-versions.responses.2xx"]&&e["client-api.all-versions.responses.4xx"]&&e["client-api.all-versions.responses.5xx"]&&this.setState({loading:!1})},processRawSeries:function(e){return e.map(function(e){return{x:e[0],y:e[1]}})},getChartSeries:function(){var e=this.state.rawData;return[{data:this.processRawSeries(e["client-api.all-versions.responses.4xx"]),color:"rgb(86, 175, 232)",shadowSize:0,label:"4xx"},{data:this.processRawSeries(e["client-api.all-versions.responses.5xx"]),color:"rgb(244, 63, 32)",label:"5xx"},{data:this.processRawSeries(e["client-api.all-versions.responses.2xx"]),color:"rgb(78, 222, 73)",label:"2xx"}]},render:function(){return this.state.loading?f.a.createElement(y.default,null):this.state.error?f.a.createElement(S.default,{onRetry:this.fetchData}):f.a.createElement(D.default,{series:this.getChartSeries(),height:150,className:"standard-barchart"})}}),j=w()({displayName:"eventChart",propTypes:{since:g.a.number.isRequired,resolution:g.a.string.isRequired},mixins:[E.default],getInitialState:function(){return{error:!1,loading:!0,rawData:{"events.total":null,"events.dropped":null},stats:{received:[],rejected:[]},systemTotal:{received:0,rejected:0,accepted:0}}},componentWillMount:function(){this.fetchData()},componentWillReceiveProps:function(e){this.props.since!==e.since&&this.setState(this.getInitialState(),this.fetchData)},fetchData:function(){var e=this;["events.total","events.dropped"].forEach(function(t){e.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(a){e.setState(function(e){var s=e.rawData;return s[t]=a,{rawData:s}},e.requestFinished)},error:function(t){e.setState({error:!0})}})})},requestFinished:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData()},processOrgData:function(){var e=this.state.rawData,t=0,a=0,s={},n={},r=[0,0];e["events.total"].forEach(function(i,o){var l=i[1],c=e["events.dropped"][o][1],u=i[0];void 0===s[u]?(s[u]=l,n[u]=c):(s[u]+=l,n[u]+=c),t+=l,a+=c,l>0&&(r[0]+=l,r[1]+=1)}),this.setState({systemTotal:{received:t,rejected:a,accepted:t-a,avgRate:parseInt(r[0]/r[1]/60,10)},stats:{rejected:Object.keys(n).map(function(e){return{x:e,y:n[e]||null}}),accepted:Object.keys(s).map(function(e){return{x:e,y:s[e]-n[e]}})},loading:!1})},getChartSeries:function(){var e=this.state.stats;return[{data:e.accepted,label:"Accepted",color:"rgba(86, 175, 232, 1)"},{data:e.rejected,color:"rgba(244, 63, 32, 1)",label:"Dropped"}]},render:function(){return this.state.loading?f.a.createElement(y.default,null):this.state.error?f.a.createElement(S.default,{onRetry:this.fetchData}):f.a.createElement(D.default,{series:this.getChartSeries(),height:150,className:"standard-barchart"})}});a.d(t,"default",function(){return q});var q=function(e){function t(){return n()(this,t),l()(this,u()(t).apply(this,arguments))}return d()(t,e),i()(t,[{key:"getTitle",value:function(){return"Admin Overview"}},{key:"getEndpoints",value:function(){return[]}},{key:"renderBody",value:function(){var e=(new Date).getTime()/1e3-604800;return f.a.createElement("div",null,f.a.createElement("h3",null,Object(v.t)("System Overview")),f.a.createElement("div",{className:"box"},f.a.createElement("div",{className:"box-header"},f.a.createElement("h4",null,Object(v.t)("Event Throughput"),f.a.createElement("span",{id:"rate",className:"pull-right"}))),f.a.createElement(j,{since:e,resolution:"1h"})),f.a.createElement("div",{className:"box"},f.a.createElement("div",{className:"box-header"},f.a.createElement("h4",null,Object(v.t)("API Responses"))),f.a.createElement(R,{since:e,resolution:"1h"})))}}]),t}(m.default)}}]);
//# sourceMappingURL=AdminOverview.js.map