{"version":3,"sources":["webpack:///./app/views/organizationIntegrations/addIntegration.jsx","webpack:///./app/views/acceptProjectTransfer.jsx","webpack:///./app/views/integrationInstallation.jsx"],"names":["AddIntegration","openDialog","urlParams","_this$props$provider$","_this","props","provider","setupDialog","url","width","height","_this$computeCentered","computeCenteredWindow","left","top","query","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default","reinstallId","reinstall_id","installUrl","concat","queryString","stringify","opts","dialog","window","open","focus","didReceiveMessage","message","origin","document","location","source","_message$data","data","success","onInstall","IndicatorStore","addSuccess","t","name","addError","error","this","addEventListener","removeEventListener","close","screenLeft","undefined","screen","screenTop","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","children","React","Component","propTypes","PropTypes","func","isRequired","object","string","AcceptProjectTransfer","handleSubmit","formData","api","request","method","organization","orgSlug","router","push","addSuccessMessage","errorMsg","responseJSON","detail","addErrorMessage","disableLog","_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_4___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","prototype","call","transferDetails","state","choices","organizations","forEach","org","slug","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","app_components_narrowLayout__WEBPACK_IMPORTED_MODULE_10__","app_views_settings_components_settingsPageHeader__WEBPACK_IMPORTED_MODULE_12__","title","tct","projectSettings","project","app_views_settings_components_forms_form__WEBPACK_IMPORTED_MODULE_9__","onSubmit","submitLabel","submitPriority","initialData","app_views_settings_components_forms_selectField__WEBPACK_IMPORTED_MODULE_11__","label","style","borderBottom","AsyncView","IntegrationInstallation","selectedOrg","providers","reloading","orgId","key","id","onSelectOrg","_ref","value","setState","hasAccess","access","includes","_this2","_this$state","installationId","params","AddButton","p","react__WEBPACK_IMPORTED_MODULE_7___default","app_components_button__WEBPACK_IMPORTED_MODULE_14__","_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1___default","priority","busy","app_views_organizationIntegrations_addIntegration__WEBPACK_IMPORTED_MODULE_11__","addIntegration","disabled","onClick","installation_id","_this3","_this$state2","map","featureListHooks","HookStore","get","FeatureList","app_components_narrowLayout__WEBPACK_IMPORTED_MODULE_18__","app_components_alert__WEBPACK_IMPORTED_MODULE_12__","type","icon","InstallLink","href","Fragment","features","metadata","formatter","singleLineRenderer","app_views_settings_components_forms_field__WEBPACK_IMPORTED_MODULE_15__","inline","stacked","required","app_components_forms_selectControl__WEBPACK_IMPORTED_MODULE_19__","onChange","placeholder","options","_ref2","_ref3","_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default","className","renderAddButton","_this4","find","providerId","styled","target"],"mappings":"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","file":"AcceptProjectTransfer.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport queryString from 'query-string';\n\nimport {t} from 'app/locale';\nimport IndicatorStore from 'app/stores/indicatorStore';\n\nexport default class AddIntegration extends React.Component {\n  static propTypes = {\n    children: PropTypes.func.isRequired,\n    provider: PropTypes.object.isRequired,\n    onInstall: PropTypes.func.isRequired,\n    reinstallId: PropTypes.string,\n  };\n\n  componentDidMount() {\n    this.dialog = null;\n    window.addEventListener('message', this.didReceiveMessage);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('message', this.didReceiveMessage);\n    this.dialog && this.dialog.close();\n  }\n\n  computeCenteredWindow(width, height) {\n    const screenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;\n\n    const screenTop = window.screenTop != undefined ? window.screenTop : screen.top;\n\n    const innerWidth = window.innerWidth\n      ? window.innerWidth\n      : document.documentElement.clientWidth\n        ? document.documentElement.clientWidth\n        : screen.width;\n\n    const innerHeight = window.innerHeight\n      ? window.innerHeight\n      : document.documentElement.clientHeight\n        ? document.documentElement.clientHeight\n        : screen.height;\n\n    const left = innerWidth / 2 - width / 2 + screenLeft;\n    const top = innerHeight / 2 - height / 2 + screenTop;\n\n    return {left, top};\n  }\n\n  openDialog = urlParams => {\n    const name = 'sentryAddIntegration';\n    const {url, width, height} = this.props.provider.setupDialog;\n    const {left, top} = this.computeCenteredWindow(width, height);\n\n    const query = {...urlParams};\n\n    if (this.props.reinstallId) {\n      query.reinstall_id = this.props.reinstallId;\n    }\n\n    const installUrl = `${url}?${queryString.stringify(query)}`;\n    const opts = `scrollbars=yes,width=${width},height=${height},top=${top},left=${left}`;\n\n    this.dialog = window.open(installUrl, name, opts);\n    this.dialog.focus();\n  };\n\n  didReceiveMessage = message => {\n    if (message.origin !== document.location.origin) {\n      return;\n    }\n\n    if (message.source !== this.dialog) {\n      return;\n    }\n\n    const {success, data} = message.data;\n    this.dialog = null;\n\n    if (!success) {\n      IndicatorStore.addError(data.error);\n      return;\n    }\n\n    if (!data) {\n      return;\n    }\n\n    this.props.onInstall(data);\n    IndicatorStore.addSuccess(t(`${this.props.provider.name} added`));\n  };\n\n  render() {\n    return this.props.children(this.openDialog);\n  }\n}\n","import React from 'react';\n\nimport {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';\nimport AsyncView from 'app/views/asyncView';\nimport Form from 'app/views/settings/components/forms/form';\nimport NarrowLayout from 'app/components/narrowLayout';\nimport SelectField from 'app/views/settings/components/forms/selectField';\nimport SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';\nimport {t, tct} from 'app/locale';\n\nclass AcceptProjectTransfer extends AsyncView {\n  getEndpoints() {\n    const query = this.props.location.query;\n    return [['transferDetails', '/accept-transfer/', {query}]];\n  }\n\n  getTitle() {\n    return t('Accept Project Transfer');\n  }\n\n  handleSubmit = formData => {\n    this.api.request('/accept-transfer/', {\n      method: 'POST',\n      data: {\n        data: this.props.location.query.data,\n        organization: formData.organization,\n      },\n      success: () => {\n        const orgSlug = formData.organization;\n\n        this.props.router.push(`/${orgSlug}`);\n        addSuccessMessage(t('Project successfully transferred'));\n      },\n      error: error => {\n        const errorMsg =\n          error && error.responseJSON && typeof error.responseJSON.detail === 'string'\n            ? error.responseJSON.detail\n            : '';\n\n        addErrorMessage(\n          t('Unable to transfer project') + errorMsg ? `: ${errorMsg}` : ''\n        );\n      },\n    });\n  };\n\n  renderError(error) {\n    let disableLog = false;\n    // Check if there is an error message with `transferDetails` endpoint\n    // If so, show as toast and ignore, otherwise log to sentry\n    if (error && error.responseJSON && typeof error.responseJSON.detail === 'string') {\n      addErrorMessage(error.responseJSON.detail);\n      disableLog = true;\n    }\n\n    super.renderError(error, disableLog);\n  }\n\n  renderBody() {\n    const {transferDetails} = this.state;\n    const choices = [];\n\n    transferDetails.organizations.forEach(org => {\n      choices.push([org.slug, org.slug]);\n    });\n    return (\n      <NarrowLayout>\n        <SettingsPageHeader title={t('Approve Transfer Project Request')} />\n        <p>\n          {tct(\n            'Projects must be transferred to a specific [organization]. ' +\n              'You can grant specific teams access to the project later under the [projectSettings]. ' +\n              '(Note that granting access to at least one team is necessary for the project to ' +\n              'appear in all parts of the UI.)',\n            {\n              organization: <strong>{t('Organization')}</strong>,\n              projectSettings: <strong>{t('Project Settings')}</strong>,\n            }\n          )}\n        </p>\n        <p>\n          {tct('Please select which [organization] you want for the project [project].', {\n            organization: <strong>{t('Organization')}</strong>,\n            project: transferDetails.project.slug,\n          })}\n        </p>\n        <Form\n          onSubmit={this.handleSubmit}\n          submitLabel={t('Transfer Project')}\n          submitPriority=\"danger\"\n          initialData={{organization: choices[0] && choices[0][0]}}\n        >\n          <SelectField\n            choices={choices}\n            label={t('Organization')}\n            name={'organization'}\n            style={{borderBottom: 'none'}}\n          />\n        </Form>\n      </NarrowLayout>\n    );\n  }\n}\n\nexport default AcceptProjectTransfer;\n","import React from 'react';\nimport styled from 'react-emotion';\n\nimport {singleLineRenderer} from 'app/utils/marked';\nimport {t, tct} from 'app/locale';\nimport AddIntegration from 'app/views/organizationIntegrations/addIntegration';\nimport Alert from 'app/components/alert';\nimport AsyncView from 'app/views/asyncView';\nimport Button from 'app/components/button';\nimport Field from 'app/views/settings/components/forms/field';\nimport HookStore from 'app/stores/hookStore';\nimport IndicatorStore from 'app/stores/indicatorStore';\nimport NarrowLayout from 'app/components/narrowLayout';\nimport SelectControl from 'app/components/forms/selectControl';\n\nexport default class IntegrationInstallation extends AsyncView {\n  state = {\n    selectedOrg: null,\n    organization: null,\n    providers: [],\n    reloading: false,\n  };\n\n  getEndpoints() {\n    return [['organizations', '/organizations/']];\n  }\n\n  getTitle() {\n    return t('Choose Installation Organization');\n  }\n\n  get provider() {\n    return this.state.providers.find(p => p.key === this.props.params.providerId);\n  }\n\n  onInstall = data => {\n    const orgId = this.state.organization.slug;\n    this.props.router.push(\n      `/settings/${orgId}/integrations/${data.provider.key}/${data.id}`\n    );\n  };\n\n  onSelectOrg = ({value: orgId}) => {\n    this.setState({selectedOrg: orgId, reloading: true});\n    const reloading = false;\n\n    this.api.request(`/organizations/${orgId}/`, {\n      success: organization => this.setState({organization, reloading}),\n      error: () => {\n        this.setState({reloading});\n        IndicatorStore.addError(t('Failed to retrieve organization details'));\n      },\n    });\n\n    this.api.request(`/organizations/${orgId}/config/integrations/`, {\n      success: providers => this.setState({providers: providers.providers, reloading}),\n      error: () => {\n        this.setState({reloading});\n        IndicatorStore.addError(t('Failed to retrieve integration provider details'));\n      },\n    });\n  };\n\n  hasAccess = org => org.access.includes('org:integrations');\n\n  renderAddButton() {\n    const {organization, reloading} = this.state;\n    const {installationId} = this.props.params;\n\n    const AddButton = p => (\n      <Button priority=\"primary\" busy={reloading} {...p}>\n        Install Integration\n      </Button>\n    );\n\n    if (!this.provider) {\n      return <AddButton disabled />;\n    }\n\n    return (\n      <AddIntegration provider={this.provider} onInstall={this.onInstall}>\n        {addIntegration => (\n          <AddButton\n            disabled={organization && !this.hasAccess(organization)}\n            onClick={() => addIntegration({installation_id: installationId})}\n          />\n        )}\n      </AddIntegration>\n    );\n  }\n\n  renderBody() {\n    const {organization, selectedOrg} = this.state;\n    const choices = this.state.organizations.map(org => [org.slug, org.slug]);\n\n    const featureListHooks = HookStore.get('integrations:feature-gates');\n    featureListHooks.push(() => ({FeatureList: null}));\n\n    const {FeatureList} = featureListHooks[0]();\n\n    return (\n      <NarrowLayout>\n        <h3>{t('Finish integration installation')}</h3>\n        <p>\n          {tct(\n            `Please pick a specific [organization:organization] to link with\n            your integration installation.`,\n            {\n              organization: <strong />,\n            }\n          )}\n        </p>\n\n        {selectedOrg &&\n          organization &&\n          !this.hasAccess(organization) && (\n            <Alert type=\"error\" icon=\"icon-circle-exclamation\">\n              <p>\n                {tct(\n                  `You do not have permission to install integrations in\n                  [organization]. Ask your organization owner or manager to\n                  visit this page to finish installing this integration.`,\n                  {organization: <strong>{organization.slug}</strong>}\n                )}\n              </p>\n              <InstallLink>{window.location.href}</InstallLink>\n            </Alert>\n          )}\n\n        {this.provider &&\n          organization &&\n          this.hasAccess(organization) &&\n          FeatureList && (\n            <React.Fragment>\n              <p>\n                {tct(\n                  'The following features will be availble for [organization] when installed.',\n                  {organization: <strong>{organization.slug}</strong>}\n                )}\n              </p>\n              <FeatureList\n                organization={organization}\n                features={this.provider.metadata.features}\n                formatter={singleLineRenderer}\n                provider={this.provider}\n              />\n            </React.Fragment>\n          )}\n\n        <Field label={t('Organization')} inline={false} stacked required>\n          {() => (\n            <SelectControl\n              onChange={this.onSelectOrg}\n              value={selectedOrg}\n              placeholder={t('Select an organization')}\n              options={choices.map(([value, label]) => ({value, label}))}\n            />\n          )}\n        </Field>\n\n        <div className=\"form-actions\">{this.renderAddButton()}</div>\n      </NarrowLayout>\n    );\n  }\n}\n\nconst InstallLink = styled('pre')`\n  margin-bottom: 0;\n  background: #fbe3e1;\n`;\n"],"sourceRoot":""}