{"version":3,"sources":["webpack:///./app/views/vstsOrganizationLink.jsx"],"names":["VSTSOrganizationLink","organizations","form","$","attr","submit","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","app_components_narrowLayout__WEBPACK_IMPORTED_MODULE_10__","app_components_forms__WEBPACK_IMPORTED_MODULE_11__","className","submitLabel","t","onSubmit","this","type","name","value","getCookie","CSRF_COOKIE_NAME","targetId","targetName","choices","clearable","defaultChoice","label","props","location","query","state","map","o","slug","AsyncView"],"mappings":"iTAUqBA,iJAEjB,MAAO,CAAC,CAAC,gBAAiB,uDAI1B,MAAO,sEAIP,MAAO,CACLC,cAAe,uCAsBjB,IAAMC,EAAOC,IAAE,kBACfD,EAAKE,KAAK,SAAU,QACpBF,EAAKE,KAAK,SAAU,+BACpBF,EAAKG,0CAIL,OACEC,EAAAC,EAAAC,cAACC,EAAA,QAAD,KACEH,EAAAC,EAAAC,cAACE,EAAA,KAAD,CACEC,UAAU,gBACVC,YAAaC,YAAE,YACfC,SAAUC,KAAKD,UAEfR,EAAAC,EAAAC,cAAA,SACEQ,KAAK,SACLC,KAAK,sBACLC,MAAOC,YAAUC,OAGnBd,EAAAC,EAAAC,cAAA,SAAOQ,KAAK,SAASC,KAAK,UAAUC,MAAOH,KAAKM,WAChDf,EAAAC,EAAAC,cAAA,SAAOQ,KAAK,SAASC,KAAK,YAAYC,MAAOH,KAAKO,aAElDhB,EAAAC,EAAAC,cAACE,EAAA,YAAD,CACEa,QAASR,KAAKd,cACduB,WAAW,EACXN,MAAOH,KAAKU,cACZR,KAAK,eACLS,MAAOb,YAAE,8EA7CjB,OAAOE,KAAKY,MAAMC,SAASC,MAAMR,4CAIjC,OAAON,KAAKY,MAAMC,SAASC,MAAMP,iDAIjC,OAAOP,KAAKe,MAAM7B,cAAc8B,IAAI,SAAAC,GAAC,MAAI,CAACA,EAAEC,KAAMD,EAAEf,8CAIpD,OAASF,KAAKd,cAAc,GAAKc,KAAKd,cAAc,GAAG,GAAK,UA5BdiC","file":"VSTSOrganizationLink.js","sourcesContent":["import $ from 'jquery';\nimport React from 'react';\n\nimport {t} from 'app/locale';\nimport {CSRF_COOKIE_NAME} from 'app/constants';\nimport AsyncView from 'app/views/asyncView';\nimport NarrowLayout from 'app/components/narrowLayout';\nimport {Form, SelectField} from 'app/components/forms';\nimport getCookie from 'app/utils/getCookie';\n\nexport default class VSTSOrganizationLink extends AsyncView {\n  getEndpoints() {\n    return [['organizations', '/organizations/']];\n  }\n\n  getTitle() {\n    return 'Link Organization to VSTS';\n  }\n\n  getDefaultState() {\n    return {\n      organizations: [],\n    };\n  }\n\n  get targetId() {\n    return this.props.location.query.targetId;\n  }\n\n  get targetName() {\n    return this.props.location.query.targetName;\n  }\n\n  get organizations() {\n    return this.state.organizations.map(o => [o.slug, o.name]);\n  }\n\n  get defaultChoice() {\n    return !!this.organizations[0] ? this.organizations[0][0] : '';\n  }\n\n  onSubmit() {\n    // Because Form can't also just be a normal form.\n    const form = $('.link-org-form');\n    form.attr('method', 'POST');\n    form.attr('action', '/extensions/vsts/configure/');\n    form.submit();\n  }\n\n  render() {\n    return (\n      <NarrowLayout>\n        <Form\n          className=\"link-org-form\"\n          submitLabel={t('Continue')}\n          onSubmit={this.onSubmit}\n        >\n          <input\n            type=\"hidden\"\n            name=\"csrfmiddlewaretoken\"\n            value={getCookie(CSRF_COOKIE_NAME)}\n          />\n\n          <input type=\"hidden\" name=\"vsts_id\" value={this.targetId} />\n          <input type=\"hidden\" name=\"vsts_name\" value={this.targetName} />\n\n          <SelectField\n            choices={this.organizations}\n            clearable={false}\n            value={this.defaultChoice}\n            name=\"organization\"\n            label={t('Organization to use with Azure DevOps')}\n          />\n        </Form>\n      </NarrowLayout>\n    );\n  }\n}\n"],"sourceRoot":""}