{"version":3,"sources":["webpack:///./app/views/admin/adminSettings.jsx"],"names":["optionsAvailable","AdminSettings","this","getEndpoint","data","state","initialData","fields","_i","length","key","option","field","lodash_isUndefined__WEBPACK_IMPORTED_MODULE_5___default","value","defn","getOption","defaultValue","getOptionField","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","t","app_components_forms__WEBPACK_IMPORTED_MODULE_10__","apiMethod","apiEndpoint","onSubmit","requireChanges","AsyncView"],"mappings":"gSAQMA,EAAmB,CACvB,oBACA,qBACA,uBACA,wBACA,oBACA,0BACA,qBACA,uBACA,4BACA,oBAGmBC,iJAEjB,MAAO,CAAC,CAAC,OAAQC,KAAKC,sDAItB,MAAO,0DAQP,IALW,IACJC,EAAQF,KAAKG,MAAbD,KAEDE,EAAc,GACdC,EAAS,GACfC,EAAA,EAAAA,EAAkBR,EAAlBS,OAAAD,IAAoC,CAA/B,IAAME,EAAOV,EAAJQ,GAENG,EAASP,EAAKM,IAAQ,CAACE,MAAO,IACpC,GAAIC,IAAcF,EAAOG,QAA2B,KAAjBH,EAAOG,MAAc,CACtD,IAAMC,EAAOC,YAAUN,GACvBJ,EAAYI,GAAOK,EAAKE,aAAeF,EAAKE,eAAiB,QAE7DX,EAAYI,GAAOC,EAAOG,MAE5BP,EAAOG,GAAOQ,YAAeR,EAAKC,EAAOC,OAG3C,OACEO,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAKC,YAAE,aAEPH,EAAAC,EAAAC,cAACE,EAAA,QAAD,CACEC,UAAU,MACVC,YAAavB,KAAKC,cAClBuB,SAAUxB,KAAKwB,SACfpB,YAAaA,EACbqB,gBAAgB,GAEhBR,EAAAC,EAAAC,cAAA,qBACCd,EAAO,qBACPA,EAAO,sBACPA,EAAO,wBACPA,EAAO,yBACPA,EAAO,qBAERY,EAAAC,EAAAC,cAAA,8BACCd,EAAO,2BACPA,EAAO,sBACPA,EAAO,wBACPA,EAAO,6BAERY,EAAAC,EAAAC,cAAA,oBACCd,EAAO,6BAnDyBqB","file":"AdminSettings.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\n\nimport AsyncView from 'app/views/asyncView';\nimport {t} from 'app/locale';\nimport {getOption, getOptionField} from 'app/options';\nimport {ApiForm} from 'app/components/forms';\n\nconst optionsAvailable = [\n  'system.url-prefix',\n  'system.admin-email',\n  'system.support-email',\n  'system.security-email',\n  'system.rate-limit',\n  'auth.allow-registration',\n  'auth.ip-rate-limit',\n  'auth.user-rate-limit',\n  'api.rate-limit.org-create',\n  'beacon.anonymous',\n];\n\nexport default class AdminSettings extends AsyncView {\n  getEndpoints() {\n    return [['data', this.getEndpoint()]];\n  }\n\n  getEndpoint() {\n    return '/internal/options/';\n  }\n\n  renderBody() {\n    const {data} = this.state;\n\n    const initialData = {};\n    const fields = {};\n    for (const key of optionsAvailable) {\n      // TODO(dcramer): we should not be mutating options\n      const option = data[key] || {field: {}};\n      if (_.isUndefined(option.value) || option.value === '') {\n        const defn = getOption(key);\n        initialData[key] = defn.defaultValue ? defn.defaultValue() : '';\n      } else {\n        initialData[key] = option.value;\n      }\n      fields[key] = getOptionField(key, option.field);\n    }\n\n    return (\n      <div>\n        <h3>{t('Settings')}</h3>\n\n        <ApiForm\n          apiMethod=\"PUT\"\n          apiEndpoint={this.getEndpoint()}\n          onSubmit={this.onSubmit}\n          initialData={initialData}\n          requireChanges={true}\n        >\n          <h4>General</h4>\n          {fields['system.url-prefix']}\n          {fields['system.admin-email']}\n          {fields['system.support-email']}\n          {fields['system.security-email']}\n          {fields['system.rate-limit']}\n\n          <h4>Security & Abuse</h4>\n          {fields['auth.allow-registration']}\n          {fields['auth.ip-rate-limit']}\n          {fields['auth.user-rate-limit']}\n          {fields['api.rate-limit.org-create']}\n\n          <h4>Beacon</h4>\n          {fields['beacon.anonymous']}\n        </ApiForm>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}